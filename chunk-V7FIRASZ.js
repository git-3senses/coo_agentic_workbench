import"./chunk-7UZYWCAJ.js";import{c as V,d as K,f as v,g as z}from"./chunk-PT2JM3JA.js";import{a as j}from"./chunk-E4BST6GI.js";import{Wb as R,Xb as O}from"./chunk-FLFKSUZI.js";import{a as L,c as F,f as D,m as P}from"./chunk-SL2VEL43.js";import{Bb as f,Dc as M,Kb as y,Mb as s,Na as r,Nb as w,Ob as m,Rb as N,Sa as h,Sb as I,Tb as A,Y as b,ab as _,ca as u,da as x,eb as g,pb as l,qb as n,rb as a,sb as c,vc as T,wc as k,xc as E,yb as S,zb as p}from"./chunk-IVDQKAZB.js";import"./chunk-7RJXRMKA.js";function X(o,t){o&1&&c(0,"lucide-icon",27)}function U(o,t){o&1&&c(0,"lucide-icon",28)}function W(o,t){o&1&&c(0,"lucide-icon",46)}function q(o,t){if(o&1&&(n(0,"div",43),g(1,W,1,0,"lucide-icon",44),n(2,"p",45),s(3),a()()),o&2){let e=f().$implicit;l("@fadeIn",void 0),r(),l("ngIf",e.isAiFlagged),r(2),w(e.reasoning||"User manually selected this indicator.")}}function G(o,t){if(o&1){let e=S();n(0,"div",36)(1,"div",37)(2,"div",38)(3,"input",39),A("ngModelChange",function(d){let C=u(e).$implicit;return I(C.met,d)||(C.met=d),x(d)}),p("change",function(){u(e);let d=f(2);return x(d.calculateTier())}),a()(),n(4,"div",40)(5,"p",41),s(6),a(),g(7,q,4,3,"div",42),a()()()}if(o&2){let e=t.$implicit;r(3),N("ngModel",e.met),r(2),y("text-indigo-900",e.met),r(),m(" ",e.text," "),r(),l("ngIf",e.met||e.reasoning)}}function $(o,t){if(o&1&&(n(0,"div",29)(1,"div",30)(2,"h3",31),c(3,"lucide-icon",32),s(4),a(),n(5,"span",33),s(6),a()(),n(7,"div",34),g(8,G,8,5,"div",35),a()()),o&2){let e=t.$implicit,i=f();r(3),l("name",e.icon),r(),m(" ",e.name," "),r(2),m(" ",i.getCategoryScore(e.id),"/5 "),r(2),l("ngForOf",i.getCriteria(e.id))}}var B=class o{projectDescription="";embedded=!1;cancel=new h;completed=new h;isScanning=!1;totalScore=0;classificationTier="LITE";categories=[{id:"INNOVATION",name:"Product Innovation",icon:"zap"},{id:"MARKET",name:"Market & Customer",icon:"users"},{id:"RISK",name:"Risk & Regulatory",icon:"shield-alert"},{id:"FINANCIAL",name:"Financial & Ops",icon:"banknote"}];criteria=[{id:"i1",category:"INNOVATION",text:"Novel Product Structure (New Architecture)",met:!1,reasoning:""},{id:"i2",category:"INNOVATION",text:"New Asset Class (Previously Untradeable)",met:!1,reasoning:""},{id:"i3",category:"INNOVATION",text:"Innovative Technology (Blockchain/AI)",met:!1,reasoning:""},{id:"i4",category:"INNOVATION",text:"New Revenue Model",met:!1,reasoning:""},{id:"i5",category:"INNOVATION",text:"Unique Market Position (Market Making)",met:!1,reasoning:""},{id:"m1",category:"MARKET",text:"New Customer Segment",met:!1,reasoning:""},{id:"m2",category:"MARKET",text:"New Geographic Market",met:!1,reasoning:""},{id:"m3",category:"MARKET",text:"New Distribution Channel",met:!1,reasoning:""},{id:"m4",category:"MARKET",text:"New Partnership Model",met:!1,reasoning:""},{id:"r1",category:"RISK",text:"New Risk Categories (e.g. Model Risk)",met:!1,reasoning:""},{id:"r2",category:"RISK",text:"New Regulatory Framework",met:!1,reasoning:""},{id:"r3",category:"RISK",text:"New Capital Treatment",met:!1,reasoning:""},{id:"r4",category:"RISK",text:"New Compliance Monitoring",met:!1,reasoning:""},{id:"r5",category:"RISK",text:"New Legal Agreements (Masters)",met:!1,reasoning:""},{id:"r6",category:"RISK",text:"New Operational Processes",met:!1,reasoning:""},{id:"f1",category:"FINANCIAL",text:"New Settlement Mechanism",met:!1,reasoning:""},{id:"f2",category:"FINANCIAL",text:"New Currency Exposure",met:!1,reasoning:""},{id:"f3",category:"FINANCIAL",text:"New Counterparty Types",met:!1,reasoning:""},{id:"f4",category:"FINANCIAL",text:"New Pricing Model",met:!1,reasoning:""},{id:"f5",category:"FINANCIAL",text:"New Data Requirements",met:!1,reasoning:""}];getCriteria(t){return this.criteria.filter(e=>e.category===t)}getCategoryScore(t){return this.criteria.filter(e=>e.category===t&&e.met).length}calculateTier(){this.totalScore=this.criteria.filter(t=>t.met).length,this.totalScore>=15?this.classificationTier="COMPLEX":this.totalScore>=10?this.classificationTier="STANDARD":this.classificationTier="LITE"}getTierColor(){switch(this.classificationTier){case"COMPLEX":return"text-rose-600";case"STANDARD":return"text-amber-500";default:return"text-emerald-600"}}projectId="NPA-"+Math.floor(Math.random()*1e4);governanceService=b(j);scanProject(){this.isScanning=!0,this.governanceService.analyzeClassification(this.projectDescription).subscribe(t=>{this.isScanning=!1,this.classificationTier=t.tier==="Existing"||t.tier==="NPA Lite"?"LITE":t.tier==="Variation"?"STANDARD":"COMPLEX",this.applyAiRules()})}applyAiRules(){let t=this.projectDescription.toLowerCase();(t.includes("crypto")||t.includes("token")||t.includes("blockchain"))&&(this.mark("i2","Asset Class: Digital Assets/Tokens detected."),this.mark("i3","Tech: DLT/Blockchain infrastructure detected."),this.mark("r1","Risk: New Operational & Custody risks associated with Digital Assets.")),(t.includes("cross-border")||t.includes("international"))&&(this.mark("m2","Market: Multi-jurisdictional rollout detected."),this.mark("f2","Financial: FX and detailed currency exposure.")),t.includes("retail")&&t.includes("complex")&&this.mark("r4","Compliance: Enhanced suitability checks needed for retail complex products."),this.calculateTier()}mark(t,e){let i=this.criteria.find(d=>d.id===t);i&&(i.met=!0,i.reasoning=e,i.isAiFlagged=!0)}confirm(){let t={tier:this.classificationTier==="LITE"?"NPA Lite":this.classificationTier==="STANDARD"?"Variation":"New-to-Group",riskLevel:"LOW",reason:"User Confirmed",requiredApprovers:[],score:this.totalScore,breakdown:this.criteria.filter(e=>e.met).map(e=>e.id)};this.governanceService.saveClassification(this.projectId,t).subscribe({next:e=>{console.log("Classification Saved:",e),this.completed.emit({tier:this.classificationTier,score:this.totalScore})},error:e=>console.error("Failed to save classification:",e)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=_({type:o,selectors:[["app-classification-scorecard"]],inputs:{projectDescription:"projectDescription",embedded:"embedded",projectId:"projectId"},outputs:{cancel:"cancel",completed:"completed"},decls:41,vars:9,consts:[[1,"font-sans","text-slate-900",3,"ngClass"],[1,"bg-white","border-b","border-slate-200","px-6","py-4","flex","items-center","justify-between","shrink-0","shadow-sm","z-10"],[1,"text-lg","font-bold","text-slate-900","flex","items-center","gap-2"],["name","scale",1,"w-5","h-5","text-indigo-600"],[1,"text-xs","text-slate-500","mt-0.5"],[1,"flex","items-center","gap-6"],[1,"flex","items-center","gap-2","px-4","py-2","bg-indigo-50","text-indigo-700","rounded-lg","text-sm","font-semibold","hover:bg-indigo-100","transition-colors","border","border-indigo-100",3,"click","disabled"],["name","sparkles","class","w-4 h-4",4,"ngIf"],["name","loader-2","class","w-4 h-4 animate-spin",4,"ngIf"],[1,"h-8","w-px","bg-slate-200"],[1,"text-right"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-wider"],[1,"text-xl","font-black","tracking-tight","flex","items-center","justify-end","gap-2",3,"ngClass"],[1,"text-xs","font-normal","text-slate-400","bg-slate-100","px-1.5","py-0.5","rounded","border","border-slate-200"],[1,"flex-1","overflow-y-auto","p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","max-w-6xl","mx-auto"],["class","bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",4,"ngFor","ngForOf"],[1,"bg-white","border-t","border-slate-200","p-4","flex","justify-between","items-center","shrink-0","z-20","shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]"],[1,"flex","items-center","gap-4","text-xs","text-slate-500"],[1,"flex","items-center","gap-1.5"],[1,"w-2","h-2","rounded-full","bg-emerald-500"],[1,"w-2","h-2","rounded-full","bg-amber-500"],[1,"w-2","h-2","rounded-full","bg-rose-500"],[1,"flex","gap-3"],[1,"px-4","py-2","text-slate-500","font-medium","hover:text-slate-800","transition-colors",3,"click"],[1,"px-6","py-2","bg-slate-900","text-white","rounded-lg","font-bold","shadow-md","hover:bg-slate-800","transition-all","flex","items-center","gap-2",3,"click"],["name","arrow-right",1,"w-4","h-4"],["name","sparkles",1,"w-4","h-4"],["name","loader-2",1,"w-4","h-4","animate-spin"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","overflow-hidden","flex","flex-col"],[1,"bg-slate-50","px-4","py-3","border-b","border-slate-100","flex","items-center","justify-between"],[1,"font-bold","text-slate-700","text-sm","uppercase","tracking-wide","flex","items-center","gap-2"],[1,"w-4","h-4","text-slate-400",3,"name"],[1,"text-xs","font-semibold","px-2","py-0.5","rounded-full","bg-white","border","border-slate-200","text-slate-500"],[1,"divide-y","divide-slate-50"],["class","p-4 hover:bg-slate-50/50 transition-colors group relative",4,"ngFor","ngForOf"],[1,"p-4","hover:bg-slate-50/50","transition-colors","group","relative"],[1,"flex","items-start","gap-3"],[1,"pt-0.5"],["type","checkbox",1,"w-4","h-4","rounded","border-slate-300","text-indigo-600","focus:ring-indigo-500","cursor-pointer",3,"ngModelChange","change","ngModel"],[1,"flex-1"],[1,"text-sm","font-medium","text-slate-700","leading-snug"],["class","mt-2 text-xs bg-slate-50 p-2 rounded border border-slate-100 text-slate-600 flex items-start gap-2",4,"ngIf"],[1,"mt-2","text-xs","bg-slate-50","p-2","rounded","border","border-slate-100","text-slate-600","flex","items-start","gap-2"],["name","bot","class","w-3 h-3 text-indigo-500 mt-0.5 shrink-0",4,"ngIf"],[1,"leading-relaxed"],["name","bot",1,"w-3","h-3","text-indigo-500","mt-0.5","shrink-0"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),c(4,"lucide-icon",3),s(5," Classification Scorecard "),a(),n(6,"p",4),s(7,"NPA Classification Framework v1.0 (Feb 2026)"),a()(),n(8,"div",5)(9,"button",6),p("click",function(){return i.scanProject()}),g(10,X,1,0,"lucide-icon",7)(11,U,1,0,"lucide-icon",8),s(12),a(),c(13,"div",9),n(14,"div",10)(15,"div",11),s(16,"Proposed Tier"),a(),n(17,"div",12),s(18),n(19,"span",13),s(20),a()()()()(),n(21,"div",14)(22,"div",15),g(23,$,9,4,"div",16),a()(),n(24,"div",17)(25,"div",18)(26,"div",19),c(27,"div",20),s(28," Lite (0-9) "),a(),n(29,"div",19),c(30,"div",21),s(31," Standard (10-14) "),a(),n(32,"div",19),c(33,"div",22),s(34," Complex (15+) "),a()(),n(35,"div",23)(36,"button",24),p("click",function(){return i.cancel.emit()}),s(37,"Back"),a(),n(38,"button",25),p("click",function(){return i.confirm()}),s(39," Confirm Classification "),c(40,"lucide-icon",26),a()()()()),e&2&&(l("ngClass",i.embedded?"h-full flex flex-col bg-slate-50":"fixed inset-0 z-[200] bg-slate-50 flex flex-col"),r(9),l("disabled",i.isScanning),r(),l("ngIf",!i.isScanning),r(),l("ngIf",i.isScanning),r(),m(" ",i.isScanning?"Scanning Brief...":"AI Risk Scan"," "),r(5),l("ngClass",i.getTierColor()),r(),m(" ",i.classificationTier," "),r(2),m("",i.totalScore,"/20"),r(3),l("ngForOf",i.categories))},dependencies:[M,T,k,E,P,L,F,D,O,R],encapsulation:2,data:{animation:[V("fadeIn",[z(":enter",[v({opacity:0}),K("300ms ease-out",v({opacity:1}))])])]}})};export{B as ClassificationScorecardComponent};
