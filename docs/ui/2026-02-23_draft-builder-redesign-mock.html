<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Draft Builder – Concrete Redesign (Mock)</title>
    <style>
      :root {
        --bg: #f8fafc;
        --panel: #ffffff;
        --muted: #64748b;
        --text: #0f172a;
        --border: rgba(15, 23, 42, 0.10);
        --border-strong: rgba(15, 23, 42, 0.16);
        --blue: #2563eb;
        --amber: #f59e0b;
        --green: #10b981;
        --red: #ef4444;
        --shadow: 0 1px 2px rgba(0,0,0,0.05);
        --shadow-lg: 0 16px 40px rgba(15,23,42,0.10);
        --radius: 14px;
        --radius-sm: 10px;
        --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: var(--font);
        background: var(--bg);
        color: var(--text);
      }

      /* Toggle between EDIT + READONLY by switching this class on <body>:
         - mode-edit
         - mode-readonly
      */
      body.mode-edit .readonly-only { display: none !important; }
      body.mode-readonly .edit-only { display: none !important; }

      /* Layout */
      .app { height: 100vh; display: flex; flex-direction: column; }
      .topbar {
        background: var(--panel);
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        box-shadow: var(--shadow);
      }
      .topbar-left { display: flex; align-items: center; gap: 12px; }
      .btn-icon {
        width: 34px; height: 34px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        display: inline-flex; align-items: center; justify-content: center;
        cursor: pointer;
      }
      .title {
        display: flex; flex-direction: column; line-height: 1.1;
      }
      .title h1 { margin: 0; font-size: 13px; font-weight: 800; letter-spacing: -0.01em; }
      .title p { margin: 2px 0 0; font-size: 10px; color: var(--muted); font-weight: 600; }

      .topbar-right { display: flex; align-items: center; gap: 12px; }
      .pill {
        display: inline-flex; align-items: center; gap: 8px;
        padding: 6px 10px; border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        font-size: 11px;
        font-weight: 800;
        color: var(--muted);
      }
      .progress {
        display: flex; align-items: center; gap: 10px;
        min-width: 320px;
        padding: 8px 10px;
        border-radius: 999px;
        background: #fff;
        border: 1px solid var(--border);
      }
      .bar {
        flex: 1;
        height: 7px;
        background: rgba(15, 23, 42, 0.08);
        border-radius: 999px;
        overflow: hidden;
      }
      .bar > span {
        display: block;
        height: 100%;
        width: 57%;
        background: linear-gradient(90deg, var(--blue), #60a5fa);
      }
      .metrics { display: flex; gap: 8px; align-items: baseline; }
      .metrics .pct { font-weight: 900; color: var(--blue); font-variant-numeric: tabular-nums; }
      .metrics .counts { font-size: 10px; color: var(--muted); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

      .main { flex: 1; display: grid; grid-template-columns: 250px 1fr 360px; min-height: 0; }

      .left, .right, .center { min-height: 0; }
      .left, .right { background: var(--panel); }
      .left { border-right: 1px solid var(--border); }
      .right { border-left: 1px solid var(--border); }
      .center { display: flex; flex-direction: column; min-width: 0; }

      /* Left stepper */
      .stepper { padding: 14px 12px; overflow: auto; height: 100%; }
      .stepper h2 { margin: 0 0 10px; font-size: 11px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.08em; }
      .step {
        padding: 10px 10px;
        border-radius: 12px;
        display: grid;
        grid-template-columns: 22px 1fr auto;
        gap: 10px;
        align-items: center;
        cursor: pointer;
      }
      .step:hover { background: rgba(37, 99, 235, 0.05); }
      .step.active { background: rgba(37, 99, 235, 0.08); outline: 1px solid rgba(37, 99, 235, 0.18); }
      .dot {
        width: 18px; height: 18px; border-radius: 999px;
        display: inline-flex; align-items: center; justify-content: center;
        font-size: 10px; font-weight: 900;
        border: 1px solid var(--border);
        color: var(--muted);
        background: #fff;
      }
      .step.active .dot { border-color: rgba(37, 99, 235, 0.35); color: var(--blue); }
      .step-title { font-size: 12px; font-weight: 800; }
      .step-sub { font-size: 10px; color: var(--muted); margin-top: 2px; font-weight: 700; }
      .badge {
        font-size: 10px;
        font-weight: 900;
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        color: var(--muted);
        background: #fff;
        font-variant-numeric: tabular-nums;
      }
      .badge.req { border-color: rgba(239, 68, 68, 0.20); color: #b91c1c; background: rgba(239, 68, 68, 0.06); }
      .badge.ok { border-color: rgba(16, 185, 129, 0.22); color: #047857; background: rgba(16, 185, 129, 0.07); }

      /* Center header + form */
      .section-header {
        background: var(--panel);
        border-bottom: 1px solid var(--border);
        padding: 14px 16px;
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: flex-start;
      }
      .section-header .lhs { display: flex; gap: 12px; align-items: flex-start; min-width: 0; }
      .icon {
        width: 36px; height: 36px; border-radius: 12px;
        display: inline-flex; align-items: center; justify-content: center;
        background: rgba(37, 99, 235, 0.08);
        border: 1px solid rgba(37, 99, 235, 0.15);
        color: var(--blue);
        flex: none;
      }
      .section-header h3 { margin: 0; font-size: 14px; font-weight: 900; letter-spacing: -0.01em; }
      .section-header p { margin: 4px 0 0; font-size: 11px; color: var(--muted); font-weight: 650; }
      .quick-actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; justify-content: flex-end; }
      .btn {
        border: 1px solid var(--border);
        background: #fff;
        padding: 8px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 900;
        cursor: pointer;
        display: inline-flex; align-items: center; gap: 8px;
      }
      .btn.primary { border-color: rgba(37, 99, 235, 0.25); background: rgba(37, 99, 235, 0.07); color: #1d4ed8; }
      .btn.danger { border-color: rgba(239, 68, 68, 0.25); background: rgba(239, 68, 68, 0.07); color: #b91c1c; }

      .canvas { padding: 14px 16px 24px; overflow: auto; }

      .cluster {
        background: #fff;
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 14px;
        margin-bottom: 12px;
      }
      .cluster-head {
        display: flex; align-items: center; justify-content: space-between; gap: 10px;
        margin-bottom: 12px;
      }
      .cluster-head h4 {
        margin: 0;
        font-size: 12px;
        font-weight: 950;
        letter-spacing: -0.01em;
      }
      .cluster-head .hint { font-size: 10px; color: var(--muted); font-weight: 700; }

      .field {
        border-radius: 12px;
        padding: 12px;
        border: 1px solid rgba(15, 23, 42, 0.08);
        background: rgba(248, 250, 252, 0.65);
        margin-bottom: 10px;
      }
      .field:last-child { margin-bottom: 0; }
      .field.top { border-color: rgba(37, 99, 235, 0.20); background: rgba(37, 99, 235, 0.04); }
      .field-row {
        display: flex; align-items: flex-start; justify-content: space-between; gap: 12px;
      }
      .field-label { display: flex; align-items: center; gap: 8px; min-width: 0; }
      .field-label .name { font-size: 12px; font-weight: 950; }
      .req-star { color: var(--red); font-weight: 950; }
      .chips { display: inline-flex; gap: 6px; flex-wrap: wrap; justify-content: flex-end; }
      .chip {
        font-size: 10px;
        padding: 4px 8px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        color: var(--muted);
        font-weight: 900;
      }
      .chip.ai { border-color: rgba(37, 99, 235, 0.25); color: #1d4ed8; background: rgba(37, 99, 235, 0.06); cursor: pointer; }
      .chip.manual { border-color: rgba(15, 23, 42, 0.10); }
      .chip.adapted { border-color: rgba(245, 158, 11, 0.25); color: #92400e; background: rgba(245, 158, 11, 0.07); }
      .chip.lowconf { border-color: rgba(239, 68, 68, 0.25); color: #b91c1c; background: rgba(239, 68, 68, 0.06); }

      .field-body { margin-top: 10px; }

      /* EDIT mode input */
      .input, .textarea {
        width: 100%;
        border: 1px solid var(--border-strong);
        background: #fff;
        border-radius: 12px;
        padding: 10px 12px;
        font-size: 12px;
        font-weight: 650;
        color: var(--text);
        outline: none;
        box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
        transition: box-shadow 120ms ease, border-color 120ms ease;
      }
      .textarea { min-height: 92px; resize: vertical; }
      .input:focus, .textarea:focus { border-color: rgba(37, 99, 235, 0.55); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.12); }

      /* READONLY mode rendering */
      body.mode-readonly .field { background: transparent; border: 0; padding: 10px 0; margin-bottom: 12px; }
      body.mode-readonly .cluster { padding: 16px; }
      body.mode-readonly .field-row { padding: 0; }
      body.mode-readonly .readonly-text {
        padding: 0;
        font-size: 13px;
        line-height: 1.5;
        color: rgba(15, 23, 42, 0.92);
        font-weight: 650;
        white-space: pre-wrap;
      }
      body.mode-readonly .readonly-empty {
        color: rgba(100, 116, 139, 0.75);
        font-style: italic;
        font-weight: 650;
      }

      .meta-row {
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        color: var(--muted);
        font-size: 10px;
        font-weight: 750;
      }
      .link {
        color: #1d4ed8;
        text-decoration: none;
        font-weight: 900;
      }
      .link:hover { text-decoration: underline; }

      /* Right panel */
      .right { display: flex; flex-direction: column; min-width: 0; }
      .tabs {
        padding: 8px;
        background: rgba(248, 250, 252, 0.7);
        border-bottom: 1px solid var(--border);
        display: flex;
        gap: 6px;
      }
      .tab {
        flex: 1;
        padding: 8px 10px;
        border-radius: 12px;
        border: 1px solid transparent;
        background: transparent;
        font-size: 11px;
        font-weight: 950;
        color: var(--muted);
        cursor: pointer;
      }
      .tab.active {
        background: #fff;
        border-color: rgba(37, 99, 235, 0.14);
        color: var(--text);
        box-shadow: var(--shadow);
      }

      .agents {
        padding: 10px 12px;
        border-bottom: 1px solid var(--border);
        display: flex;
        gap: 8px;
        overflow: auto;
      }
      .agent {
        padding: 7px 10px;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: #fff;
        font-size: 11px;
        font-weight: 950;
        color: var(--muted);
        cursor: pointer;
        white-space: nowrap;
      }
      .agent.active { border-color: rgba(37, 99, 235, 0.30); color: #1d4ed8; background: rgba(37, 99, 235, 0.06); }

      .panel { flex: 1; min-height: 0; overflow: auto; padding: 12px; }
      .card {
        border: 1px solid var(--border);
        background: #fff;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 12px;
        margin-bottom: 10px;
      }
      .card h5 { margin: 0; font-size: 12px; font-weight: 950; }
      .card p { margin: 6px 0 0; font-size: 11px; color: var(--muted); font-weight: 700; line-height: 1.4; }
      .kpi-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
      .kpi {
        border: 1px solid rgba(15,23,42,0.10);
        border-radius: 12px;
        padding: 10px;
        background: rgba(248, 250, 252, 0.7);
      }
      .kpi .v { font-size: 16px; font-weight: 950; font-variant-numeric: tabular-nums; }
      .kpi .k { font-size: 10px; color: var(--muted); font-weight: 800; margin-top: 2px; }

      .compose {
        border-top: 1px solid var(--border);
        padding: 10px 12px;
        background: #fff;
      }
      .compose-row { display: flex; gap: 10px; align-items: flex-end; }
      .compose textarea {
        flex: 1;
        border: 1px solid var(--border-strong);
        border-radius: 14px;
        padding: 10px 12px;
        min-height: 44px;
        max-height: 110px;
        resize: none;
        font-size: 12px;
        font-weight: 650;
      }
      .send {
        width: 42px; height: 42px;
        border-radius: 14px;
        border: 1px solid rgba(37, 99, 235, 0.30);
        background: rgba(37, 99, 235, 0.08);
        color: #1d4ed8;
        font-weight: 950;
        cursor: pointer;
      }

      /* Added (non-removing) enhancements: Issues list + field task */
      .issue {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        padding: 10px;
        border-radius: 12px;
        border: 1px solid rgba(239, 68, 68, 0.18);
        background: rgba(239, 68, 68, 0.06);
        margin-top: 10px;
      }
      .issue .t { font-size: 11px; font-weight: 950; color: #7f1d1d; }
      .issue .s { font-size: 10px; font-weight: 850; color: rgba(127, 29, 29, 0.75); margin-top: 4px; }
      .issue .jump { align-self: center; }

      .field-task {
        border: 1px dashed rgba(37, 99, 235, 0.35);
        border-radius: 14px;
        padding: 10px;
        background: rgba(37, 99, 235, 0.05);
        margin-top: 10px;
      }
      .field-task .hd { display: flex; justify-content: space-between; gap: 10px; }
      .field-task .hd .l { font-size: 11px; font-weight: 950; }
      .field-task .hd .r { font-size: 10px; font-weight: 900; color: var(--muted); }
      .field-task .bd { margin-top: 8px; font-size: 11px; color: rgba(15,23,42,0.86); font-weight: 700; line-height: 1.4; }
      .field-task .actions { margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap; }
      .mini { padding: 7px 10px; border-radius: 12px; border: 1px solid var(--border); background: #fff; font-size: 11px; font-weight: 950; cursor: pointer; }
      .mini.primary { border-color: rgba(37,99,235,0.25); background: rgba(37,99,235,0.08); color: #1d4ed8; }
      .mini.ghost { background: transparent; }
    </style>
  </head>

  <!-- Switch class to mode-readonly to preview checker/readonly view -->
  <body class="mode-edit">
    <div class="app">
      <!-- Top bar -->
      <div class="topbar">
        <div class="topbar-left">
          <button class="btn-icon" title="Back">←</button>
          <div class="title">
            <h1>NPA Draft Builder</h1>
            <p>NPA-2026-003 · Green Bond ETF (POC)</p>
          </div>
          <span class="pill edit-only">Edit Mode · Maker/Checker</span>
          <span class="pill readonly-only">Read Only · Approver</span>
        </div>

        <div class="topbar-right">
          <!-- Added (non-removing): required-only progress + quality -->
          <div class="progress">
            <div class="bar" title="Required completion">
              <span style="width: 78%; background: linear-gradient(90deg, var(--green), #34d399);"></span>
            </div>
            <div class="metrics">
              <div class="pct" style="color: #047857;">78%</div>
              <div class="counts">req 44/56</div>
            </div>
          </div>

          <div class="progress">
            <div class="bar" title="Overall completion">
              <span style="width: 53%;"></span>
            </div>
            <div class="metrics">
              <div class="pct">53%</div>
              <div class="counts">192/364</div>
            </div>
          </div>

          <button class="btn primary">Save Draft</button>
        </div>
      </div>

      <div class="main">
        <!-- Left: stepper -->
        <aside class="left">
          <div class="stepper">
            <h2>Sections</h2>
            <div class="step active">
              <div class="dot">I</div>
              <div>
                <div class="step-title">Product Specifications</div>
                <div class="step-sub">Business · PC.I</div>
              </div>
              <div class="badge req">6 req</div>
            </div>
            <div class="step">
              <div class="dot">II</div>
              <div>
                <div class="step-title">Operational & Tech</div>
                <div class="step-sub">T&amp;O · PC.II</div>
              </div>
              <div class="badge req">4 req</div>
            </div>
            <div class="step">
              <div class="dot">III</div>
              <div>
                <div class="step-title">Pricing Model Details</div>
                <div class="step-sub">Finance · PC.III</div>
              </div>
              <div class="badge ok">OK</div>
            </div>
            <div class="step">
              <div class="dot">IV</div>
              <div>
                <div class="step-title">Risk Analysis</div>
                <div class="step-sub">RMG · PC.IV</div>
              </div>
              <div class="badge req">2 req</div>
            </div>
            <div class="step">
              <div class="dot">A</div>
              <div>
                <div class="step-title">Appendices</div>
                <div class="step-sub">Legal · Appx</div>
              </div>
              <div class="badge">—</div>
            </div>
          </div>
        </aside>

        <!-- Center: form -->
        <section class="center">
          <div class="section-header">
            <div class="lhs">
              <div class="icon">▦</div>
              <div style="min-width:0;">
                <h3>Product Specifications (Basic Information)</h3>
                <p>Focus on narrative fields first. Agents propose text, you decide + save. Checker can edit; Approver sees read-only.</p>
              </div>
            </div>
            <div class="quick-actions">
              <!-- Added (non-removing): Next missing required, Show issues -->
              <button class="btn">Next missing required</button>
              <button class="btn">Show Issues</button>
              <button class="btn danger edit-only">Mark N/A (requires rationale)</button>
            </div>
          </div>

          <div class="canvas">
            <div class="cluster">
              <div class="cluster-head">
                <div>
                  <h4>Key Narrative (do these first)</h4>
                  <div class="hint">These drive sign-off quality and reduce loop-backs.</div>
                </div>
                <div class="hint">Business agent mapped</div>
              </div>

              <div class="field top">
                <div class="field-row">
                  <div class="field-label">
                    <div class="name">Business Rationale <span class="req-star">*</span></div>
                    <!-- Keep existing chips, add clearer AI action -->
                    <span class="chip ai edit-only" title="Ask Business agent about this field">Ask AI</span>
                    <span class="chip manual edit-only">Manual</span>
                    <span class="chip lowconf edit-only" title="Low confidence / needs review">Needs review</span>
                  </div>
                  <div class="chips">
                    <span class="chip">Text</span>
                    <span class="chip edit-only">Attach</span>
                  </div>
                </div>

                <div class="field-body edit-only">
                  <textarea class="textarea" placeholder="Draft 3–6 bullets: target clients, value, revenue driver, competitive edge."></textarea>
                </div>
                <div class="field-body readonly-only">
                  <div class="readonly-text readonly-empty">No value provided.</div>
                </div>

                <div class="meta-row">
                  <span>Lineage: MANUAL · Last edited: 12:41</span>
                  <a class="link" href="#">Add supporting citation</a>
                </div>
              </div>

              <div class="field">
                <div class="field-row">
                  <div class="field-label">
                    <div class="name">Problem Statement <span class="req-star">*</span></div>
                    <span class="chip ai edit-only">Ask AI</span>
                    <span class="chip adapted edit-only">Adapted</span>
                  </div>
                  <div class="chips">
                    <span class="chip">Text</span>
                  </div>
                </div>
                <div class="field-body edit-only">
                  <textarea class="textarea">Institutional and HNW clients increasing allocation to ESG products; need regulated access to diversified green bond exposure.</textarea>
                </div>
                <div class="field-body readonly-only">
                  <div class="readonly-text">Institutional and HNW clients increasing allocation to ESG products; need regulated access to diversified green bond exposure.</div>
                </div>
                <div class="meta-row">
                  <span>Lineage: ADAPTED · Confidence: 85%</span>
                  <a class="link" href="#">View provenance</a>
                </div>
              </div>

              <div class="field">
                <div class="field-row">
                  <div class="field-label">
                    <div class="name">Value Proposition</div>
                    <span class="chip ai edit-only">Ask AI</span>
                    <span class="chip manual edit-only">Manual</span>
                  </div>
                  <div class="chips">
                    <span class="chip">Text</span>
                  </div>
                </div>
                <div class="field-body edit-only">
                  <textarea class="textarea">DBS co-branded ESG bond ETF tracking Bloomberg MSCI Global Green Bond Index; monthly income option; SGD/USD share classes.</textarea>
                </div>
                <div class="field-body readonly-only">
                  <div class="readonly-text">DBS co-branded ESG bond ETF tracking Bloomberg MSCI Global Green Bond Index; monthly income option; SGD/USD share classes.</div>
                </div>
              </div>
            </div>

            <div class="cluster">
              <div class="cluster-head">
                <div>
                  <h4>Supporting Details (fill as needed)</h4>
                  <div class="hint">Collapse long lists; keep the center column scannable.</div>
                </div>
                <div class="hint edit-only">Auto-save enabled</div>
              </div>

              <div class="field">
                <div class="field-row">
                  <div class="field-label">
                    <div class="name">Target Clients</div>
                    <span class="chip ai edit-only">Ask AI</span>
                  </div>
                  <div class="chips">
                    <span class="chip">Multi</span>
                  </div>
                </div>
                <div class="field-body edit-only">
                  <input class="input" value="Institutional, Accredited, Private Banking" />
                </div>
                <div class="field-body readonly-only">
                  <div class="readonly-text">Institutional, Accredited, Private Banking</div>
                </div>
              </div>

              <div class="field">
                <div class="field-row">
                  <div class="field-label">
                    <div class="name">Distribution Channels</div>
                    <span class="chip ai edit-only">Ask AI</span>
                  </div>
                  <div class="chips">
                    <span class="chip">Text</span>
                  </div>
                </div>
                <div class="field-body edit-only">
                  <textarea class="textarea">DBS Treasures advisory, iWealth institutional desk, and approved external distributors under existing onboarding controls.</textarea>
                </div>
                <div class="field-body readonly-only">
                  <div class="readonly-text">DBS Treasures advisory, iWealth institutional desk, and approved external distributors under existing onboarding controls.</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Right: panel -->
        <aside class="right">
          <div class="tabs">
            <button class="tab active">Chat</button>
            <button class="tab">Knowledge</button>
            <button class="tab">Issues</button>
          </div>

          <div class="agents">
            <button class="agent active">Business</button>
            <button class="agent">T&amp;O</button>
            <button class="agent">Finance</button>
            <button class="agent">RMG</button>
            <button class="agent">Legal</button>
          </div>

          <div class="panel">
            <div class="card">
              <h5>Proposing Unit (Business)</h5>
              <p>I can help draft Business Rationale, Value Proposition, and distribution wording aligned to product context.</p>
              <div class="kpi-row">
                <div class="kpi">
                  <div class="v">6</div>
                  <div class="k">Required missing</div>
                </div>
                <div class="kpi">
                  <div class="v">3</div>
                  <div class="k">Low-confidence fields</div>
                </div>
              </div>
            </div>

            <!-- Added (non-removing): "Field task" when user clicks Ask AI next to a field -->
            <div class="field-task">
              <div class="hd">
                <div class="l">Field Task: Business Rationale</div>
                <div class="r">Required · Textarea</div>
              </div>
              <div class="bd">
                Draft 3–6 bullets based on: ESG ETF, target clients, expected revenue, competitive differentiator.
                If unknown, ask exactly 1 clarification question first.
              </div>
              <div class="actions edit-only">
                <button class="mini primary">Apply to field</button>
                <button class="mini">Insert as bullets</button>
                <button class="mini ghost">Back to field</button>
              </div>
            </div>

            <!-- Added (non-removing): Issues block -->
            <div class="issue">
              <div>
                <div class="t">Missing required: Business Rationale</div>
                <div class="s">Needed for Business sign-off. Add 3–6 bullets + 1 citation.</div>
              </div>
              <div class="jump">
                <button class="mini primary">Jump</button>
              </div>
            </div>
          </div>

          <div class="compose edit-only">
            <div class="compose-row">
              <textarea placeholder="Ask the selected agent… (Shift+Enter for newline)"></textarea>
              <button class="send">➤</button>
            </div>
          </div>
          <div class="compose readonly-only">
            <div style="font-size: 11px; color: var(--muted); font-weight: 800;">
              Read-only mode: chat is visible for context, but only Maker/Checker can send messages.
            </div>
          </div>
        </aside>
      </div>
    </div>
  </body>
</html>

