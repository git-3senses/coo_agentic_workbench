import{a as ee}from"./chunk-JDP526EQ.js";import{a as te}from"./chunk-KP5T4CHQ.js";import{a as ie}from"./chunk-QZXUQFH2.js";import{a as Q}from"./chunk-EH6T6EZV.js";import{a as M}from"./chunk-J3WGSLJR.js";import"./chunk-FJNWIHH7.js";import{a as Y}from"./chunk-IUB5JG3Z.js";import{f as W}from"./chunk-WR7XAGZW.js";import{a as X}from"./chunk-H54N4KTJ.js";import{a as Z}from"./chunk-WPPKG7V6.js";import{Wb as q,Xb as J}from"./chunk-FLFKSUZI.js";import"./chunk-SL2VEL43.js";import{Bb as y,Dc as H,Jb as E,Jc as K,Kb as f,Mb as n,Na as a,Nb as m,Ob as x,Pb as C,T as V,Y as S,Yb as _,Zb as U,ab as $,ca as O,da as F,eb as g,o as k,pb as p,qb as t,rb as i,sb as s,u as D,vc as B,wc as G,xc as z,yb as R,zb as h}from"./chunk-IVDQKAZB.js";import{a as P,b as A}from"./chunk-7RJXRMKA.js";var N=class o{http=S(K);apiUrl="/api/monitoring";getBreaches(){return this.http.get(`${this.apiUrl}/breaches`).pipe(k(r=>r.map(e=>A(P({},e),{npa_title:e.project_title||e.npa_title||"Unknown Product"}))))}getProducts(){return this.http.get(`${this.apiUrl}/products`).pipe(k(r=>r.map(e=>A(P({},e),{npa_type:e.product_category||e.npa_type||"",volume_currency:(e.currency,"$"),total_volume:parseFloat(e.total_volume)||0,realized_pnl:parseFloat(e.realized_pnl)||0,counterparty_exposure:parseFloat(e.counterparty_exposure)||0,var_utilization:parseFloat(e.var_utilization)||0,collateral_posted:parseFloat(e.collateral_posted)||0}))))}getNpaBreaches(r){return this.http.get(`${this.apiUrl}/npas/${r}/breaches`)}getNpaMetrics(r){return this.http.get(`${this.apiUrl}/npas/${r}/metrics`)}getSummary(){return this.http.get(`${this.apiUrl}/summary`).pipe(k(r=>({total_launched:r.launchedProducts??r.total_launched??0,healthy_count:r.healthyCount??r.healthy_count??0,warning_count:r.warningCount??r.warning_count??0,critical_count:r.openEscalations??r.critical_count??0,open_breaches:r.activeBreaches??r.open_breaches??0,total_volume:r.totalVolume??r.total_volume??0})))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"})};var oe=(o,r,e,l)=>({"border-slate-200 text-slate-400 group-hover:border-slate-300":o,"border-amber-400 text-amber-600 shadow-amber-100 bg-amber-50":r,"border-rose-500 text-rose-600 shadow-rose-100 bg-rose-50":e,"border-emerald-500 text-emerald-600 shadow-emerald-100 bg-emerald-50":l}),ae=(o,r,e)=>({"bg-purple-50 text-purple-700 border-purple-100":o,"bg-blue-50 text-blue-700 border-blue-100":r,"bg-emerald-50 text-emerald-700 border-emerald-100":e}),L=(o,r,e)=>({"bg-emerald-50 text-emerald-700 border-emerald-100":o,"bg-amber-50 text-amber-700 border-amber-100":r,"bg-rose-50 text-rose-700 border-rose-100":e}),j=(o,r,e)=>({"bg-emerald-500":o,"bg-amber-500":r,"bg-rose-500":e});function le(o,r){if(o&1&&(t(0,"span",136),n(1),i()),o&2){let e=y().$implicit;a(),m(e.subValue)}}function se(o,r){if(o&1&&(t(0,"div",122)(1,"div",123)(2,"div",124),s(3,"lucide-icon",125),i(),t(4,"span",126),n(5,"YTD"),i()(),t(6,"div",127)(7,"div",128),n(8),i(),t(9,"div",129)(10,"span",130),n(11),i(),g(12,le,2,1,"span",131),i()(),t(13,"div",132)(14,"span",133),s(15,"lucide-icon",134),n(16),i(),t(17,"span",135),n(18,"vs last month"),i()()()),o&2){let e=r.$implicit;a(2),p("ngClass","bg-"+e.color+"-50 text-"+e.color+"-600"),a(),p("name",e.icon),a(5),m(e.label),a(3),m(e.value),a(),p("ngIf",e.subValue),a(2),p("ngClass",e.trendUp?"text-emerald-600 bg-emerald-50":"text-rose-600 bg-rose-50"),a(),p("name",e.trendUp?"trending-up":"trending-down"),a(),x(" ",e.trend," ")}}function de(o,r){if(o&1&&(t(0,"div",137)(1,"div",138),s(2,"div",139),t(3,"span",140),n(4),i()(),t(5,"span",141),n(6),i()()),o&2){let e=r.$implicit;a(2),E("background-color",e.color),a(2),m(e.type),a(2),x("",e.percentage,"%")}}function pe(o,r){if(o&1&&(t(0,"div",149),n(1),i()),o&2){let e=y().$implicit;a(),x(" ",e.risk," Delayed ")}}function me(o,r){if(o&1&&(t(0,"div",142)(1,"div",143)(2,"span",144),n(3),i()(),t(4,"div",145)(5,"div",146),n(6),i(),t(7,"div",147),n(8),i()(),g(9,pe,2,1,"div",148),i()),o&2){let e=r.$implicit;a(),p("ngClass",U(5,oe,e.status==="normal",e.status==="warning",e.status==="danger",e.status==="success")),a(2),m(e.count),a(3),m(e.name),a(2),m(e.avgTime),a(),p("ngIf",e.risk>0)}}function ce(o,r){if(o&1&&(t(0,"div",150)(1,"div",151),n(2),i(),s(3,"div",152),t(4,"div",153),n(5),i()()),o&2){let e=r.$implicit;a(2),m(e.count),a(),E("height",e.height,"px"),a(2),m(e.label)}}function ue(o,r){if(o&1&&(t(0,"div",154),s(1,"div",155),t(2,"div",156)(3,"div",157)(4,"span",158),n(5),i(),s(6,"lucide-icon",159),i(),t(7,"h4",160),n(8),i(),t(9,"p",161),n(10),i(),t(11,"div",162),s(12,"div",163),i()()()),o&2){let e=r.$implicit;a(),p("ngClass",e.color),a(4),x("",e.count," Products"),a(3),m(e.name),a(2),x("",e.growth," Growth"),a(2),E("width",e.intensity),p("ngClass",e.color.replace("bg-","bg-"))}}function xe(o,r){if(o&1&&(t(0,"div",164)(1,"div",165)(2,"div",166),n(3),i(),t(4,"div")(5,"h4",167),n(6),i(),t(7,"p",168),n(8),i()()(),t(9,"div",138)(10,"span",169),n(11,"Pre-Seed"),i(),t(12,"button",170),s(13,"lucide-icon",171),i()()()),o&2){let e=r.$implicit;a(3),x(" ",e.prob,"% "),a(3),m(e.name),a(2),C("",e.theme," \u2022 Est. ",e.estValue)}}function ge(o,r){if(o&1){let e=R();t(0,"tr",172),h("click",function(){let c=O(e).$implicit,w=y(2);return F(w.navigateToDetail(c))}),t(1,"td",173)(2,"div",174),n(3),i(),t(4,"div",175)(5,"span",176),n(6),i(),t(7,"span",177),n(8),i()()(),t(9,"td",173)(10,"div",178),n(11),i(),t(12,"div",179),s(13,"div",180),n(14),i()(),t(15,"td",181),n(16),i(),t(17,"td",182)(18,"span",183),s(19,"span",184),n(20),i()(),t(21,"td",185)(22,"button",186),s(23,"lucide-icon",187),i()()()}if(o&2){let e=r.$implicit;a(3),m(e.productName),a(2),p("ngClass",_(10,ae,e.classification==="Complex",e.classification==="Standard",e.classification==="Light")),a(),m(e.classification),a(2),m(e.location),a(3),m(e.productManager),a(3),x(" ",e.stage," "),a(2),x("",e.ageDays,"d"),a(2),p("ngClass",_(14,L,e.status==="On Track",e.status==="At Risk",e.status==="Delayed")),a(),p("ngClass",_(18,j,e.status==="On Track",e.status==="At Risk",e.status==="Delayed")),a(),x(" ",e.status," ")}}function be(o,r){if(o&1&&(t(0,"div",188)(1,"div",189)(2,"div",81)(3,"span",190),n(4),i(),t(5,"h4",191),n(6),i()(),t(7,"div",192),n(8),i()(),t(9,"div",193)(10,"span",177),n(11),i(),t(12,"div",138)(13,"div",194),s(14,"div",195),i(),t(15,"span",196),n(16),i()()()()),o&2){let e=r.$implicit,l=r.index;a(4),x("#",l+1),a(2),m(e.name),a(2),m(e.revenue),a(3),C("",e.owner," \u2022 ",e.stage),a(3),E("width",e.progress,"%"),a(2),x("",e.progress,"%")}}function ve(o,r){if(o&1&&(t(0,"div",38)(1,"div",39),g(2,se,19,8,"div",40),i(),t(3,"div",41)(4,"div",42)(5,"h3",43),s(6,"lucide-icon",44),n(7," Mix by Class "),i(),t(8,"div",45)(9,"div",46)(10,"div",47)(11,"span",48),n(12),i(),t(13,"span",49),n(14,"Total Active"),i()()()(),t(15,"div",50),g(16,de,7,4,"div",51),i()(),t(17,"div",52)(18,"div",53)(19,"h3",54),s(20,"lucide-icon",55),n(21," Pipeline Health "),i(),t(22,"div",56)(23,"span",57),n(24,"Avg Cycle: 32d"),i()()(),t(25,"div",58),s(26,"div",59),t(27,"div",60),g(28,me,10,10,"div",61),i()()(),t(29,"div",42)(30,"h3",43),s(31,"lucide-icon",62),n(32," Ageing Analysis "),i(),t(33,"div",63),g(34,ce,6,4,"div",64),i()()(),t(35,"div",65)(36,"div",66)(37,"div",67)(38,"h3",54),s(39,"lucide-icon",68),n(40," Market Clusters "),i(),t(41,"span",69),n(42,"Theme Concentration"),i()(),t(43,"div",70),g(44,ue,13,7,"div",71),i()(),t(45,"div",66)(46,"div",67)(47,"h3",54),s(48,"lucide-icon",72),n(49," Product Opportunities "),i(),t(50,"button",73),n(51," View Pipeline "),s(52,"lucide-icon",74),i()(),t(53,"div",75),g(54,xe,14,4,"div",76),t(55,"div",77),s(56,"lucide-icon",78),n(57," Add Prospect "),i()()()(),t(58,"div",41)(59,"div",79)(60,"div",80)(61,"div",81)(62,"div",82),s(63,"lucide-icon",83),i(),t(64,"h3",84),n(65,"Active Approvals Queue"),i(),t(66,"span",85),n(67,"14 Active"),i()(),t(68,"div",56),s(69,"input",86),t(70,"button",87),s(71,"lucide-icon",88),i()()(),t(72,"div",89)(73,"table",90)(74,"thead",91)(75,"tr")(76,"th",92),n(77,"Project"),i(),t(78,"th",93),n(79,"Manager & Stage"),i(),t(80,"th",94),n(81,"Age"),i(),t(82,"th",95),n(83,"Status"),i(),s(84,"th",93),i()(),t(85,"tbody",96),g(86,ge,24,22,"tr",97),i()()(),t(87,"div",98)(88,"span",99),n(89,"Showing 6 of 14 items"),i(),t(90,"div",56)(91,"button",100),n(92,"Previous"),i(),t(93,"button",101),n(94,"Next"),i()()()(),t(95,"div",102)(96,"div",103),s(97,"div",104),t(98,"div",105)(99,"h3",106),s(100,"lucide-icon",107),n(101," Top Revenue "),i(),t(102,"span",108),n(103,"PROJ. REVENUE"),i()(),t(104,"div",109),g(105,be,17,8,"div",110),i(),t(106,"div",111)(107,"span",112),n(108,"View All Opportunities"),i()()(),t(109,"div",113)(110,"div",114),s(111,"lucide-icon",115),t(112,"h4",116),n(113,"Recent Alerts"),i()(),t(114,"div",10)(115,"div",117),s(116,"div",118),t(117,"div")(118,"p",119),n(119,"Risk Assessment Overdue"),i(),t(120,"p",120),n(121,"Crypto Custody Prime \u2022 2h ago"),i()()(),t(122,"div",117),s(123,"div",121),t(124,"div")(125,"p",119),n(126,"DCE Review Required"),i(),t(127,"p",120),n(128,"Credit Link Note \u2022 5h ago"),i()()()()()()()()),o&2){let e=y();a(2),p("ngForOf",e.kpis),a(7),E("background",e.classificationGradient),a(3),m(e.classificationTotal),a(4),p("ngForOf",e.classificationMix),a(12),p("ngForOf",e.pipelineStages),a(6),p("ngForOf",e.ageing),a(10),p("ngForOf",e.clusters),a(10),p("ngForOf",e.prospects),a(32),p("ngForOf",e.npaPool.slice(0,6)),a(19),p("ngForOf",e.topRevenue)}}function he(o,r){if(o&1){let e=R();t(0,"tr",172),h("click",function(){let c=O(e).$implicit,w=y(2);return F(w.navigateToDetail(c))}),t(1,"td",216)(2,"div",174),n(3),i()(),t(4,"td",216)(5,"div",217),n(6),i()(),t(7,"td",216)(8,"div",217),n(9),i()(),t(10,"td",216)(11,"div",218),n(12),i()(),t(13,"td",216)(14,"div",178),n(15),i()(),t(16,"td",216)(17,"div",217),n(18),i()(),t(19,"td",216)(20,"div",217),n(21),i()(),t(22,"td",216)(23,"div",217),n(24),i()(),t(25,"td",216)(26,"div",217),n(27),i()(),t(28,"td",216)(29,"span",219),n(30),i()(),t(31,"td",216)(32,"div",220),n(33),i()(),t(34,"td",221)(35,"span",183),s(36,"span",184),n(37),i()(),t(38,"td",222),n(39),i(),t(40,"td",223)(41,"button",186),s(42,"lucide-icon",187),i()()()}if(o&2){let e=r.$implicit;a(3),m(e.productName),a(3),m(e.location),a(3),m(e.businessUnit),a(3),m(e.kickoffDate),a(3),m(e.productManager),a(3),m(e.pmTeam),a(3),m(e.pacApproval),a(3),m(e.proposalPreparer),a(3),m(e.template),a(2),p("ngClass",_(16,ae,e.classification==="Complex",e.classification==="Standard",e.classification==="Light")),a(),m(e.classification),a(3),m(e.stage),a(2),p("ngClass",_(20,L,e.status==="On Track",e.status==="At Risk",e.status==="Delayed")),a(),p("ngClass",_(24,j,e.status==="On Track",e.status==="At Risk",e.status==="Delayed")),a(),x(" ",e.status," "),a(2),x("",e.ageDays,"d")}}function fe(o,r){if(o&1&&(t(0,"div",197)(1,"div",198)(2,"div",80)(3,"div",81)(4,"div",82),s(5,"lucide-icon",83),i(),t(6,"h3",84),n(7,"Complete NPA Pool"),i(),t(8,"span",85),n(9),i()(),t(10,"div",56),s(11,"input",199),t(12,"button",87),s(13,"lucide-icon",88),i(),t(14,"button",200),s(15,"lucide-icon",27),n(16," Export "),i()()(),t(17,"div",201)(18,"table",202)(19,"thead",203)(20,"tr")(21,"th",204),n(22,"Product Name"),i(),t(23,"th",205),n(24,"Location"),i(),t(25,"th",206),n(26,"Business Unit"),i(),t(27,"th",207),n(28,"Kickoff Date"),i(),t(29,"th",208),n(30,"Product Manager"),i(),t(31,"th",206),n(32,"PM Team"),i(),t(33,"th",207),n(34,"PAC Approval"),i(),t(35,"th",208),n(36,"Proposal Preparer"),i(),t(37,"th",209),n(38,"Template"),i(),t(39,"th",207),n(40,"Classification"),i(),t(41,"th",207),n(42,"Stage"),i(),t(43,"th",210),n(44,"Status"),i(),t(45,"th",211),n(46,"Age"),i(),s(47,"th",212),i()(),t(48,"tbody",213),g(49,he,43,28,"tr",97),i()()(),t(50,"div",98)(51,"span",99),n(52),i(),t(53,"div",56)(54,"button",214),n(55,"Previous"),i(),t(56,"button",215),n(57,"Next"),i()()()()()),o&2){let e=y();a(9),x("",e.npaPool.length," Total"),a(40),p("ngForOf",e.npaPool),a(3),C("Showing ",e.npaPool.length," of ",e.npaPool.length," items")}}function _e(o,r){if(o&1&&(t(0,"div",253)(1,"div",254),s(2,"lucide-icon",255),i(),t(3,"span",256),n(4),i(),s(5,"span",257),i()),o&2){let e=r.$implicit;a(),p("ngClass",e.color),a(),p("name",e.icon),a(2),m(e.name)}}function we(o,r){if(o&1&&(t(0,"div")(1,"h4",250),n(2),i(),t(3,"div",251),g(4,_e,6,3,"div",252),i()()),o&2){let e=r.$implicit;a(2),C("Tier ",e.tier," \u2014 ",e.label),a(2),p("ngForOf",e.agents)}}function ye(o,r){if(o&1&&(t(0,"tr",258)(1,"td",173)(2,"div",259),n(3),i(),t(4,"div",260),n(5),i()(),t(6,"td",261),n(7),i(),t(8,"td",262),n(9),i(),t(10,"td",182)(11,"span",263),n(12),i()(),t(13,"td",182)(14,"span",183),s(15,"span",184),n(16),i()()()),o&2){let e=r.$implicit;a(3),m(e.name),a(2),m(e.desk),a(2),m(e.volume),a(),p("ngClass",e.pnl.startsWith("+")?"text-emerald-600":"text-rose-600"),a(),m(e.pnl),a(2),p("ngClass",e.breachCount>0?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700"),a(),x(" ",e.breachCount," "),a(2),p("ngClass",_(10,L,e.health==="Healthy",e.health==="Warning",e.health==="Critical")),a(),p("ngClass",_(14,j,e.health==="Healthy",e.health==="Warning",e.health==="Critical")),a(),x(" ",e.health," ")}}function Se(o,r){if(o&1&&(t(0,"div",264)(1,"div",265),s(2,"div",266),i(),t(3,"div",267)(4,"div",268)(5,"h4",259),n(6),i(),t(7,"span",269),n(8),i()(),t(9,"p",270),n(10),i(),t(11,"div",271)(12,"span"),n(13),i(),t(14,"span"),n(15),i()()()()),o&2){let e=r.$implicit;p("ngClass",e.severity==="critical"?"bg-rose-50/40 border-rose-100":"bg-amber-50/40 border-amber-100"),a(2),p("ngClass",e.severity==="critical"?"bg-rose-500":"bg-amber-500"),a(4),m(e.title),a(),p("ngClass",e.severity==="critical"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"),a(),m(e.severity),a(2),m(e.description),a(3),m(e.product),a(2),m(e.triggeredAt)}}function Ee(o,r){if(o&1&&(t(0,"div",38)(1,"div",39)(2,"div",224)(3,"div",225)(4,"div",226),s(5,"lucide-icon",227),i(),t(6,"span",228),n(7,"LIVE"),i()(),t(8,"div",48),n(9),i(),t(10,"div",229),n(11,"Active Breaches"),i()(),t(12,"div",224)(13,"div",225)(14,"div",230),s(15,"lucide-icon",231),i()(),t(16,"div",48),n(17),i(),t(18,"div",229),n(19,"Avg Resolution Time"),i()(),t(20,"div",224)(21,"div",225)(22,"div",232),s(23,"lucide-icon",233),i()(),t(24,"div",48),n(25),i(),t(26,"div",229),n(27,"Open Escalations"),i()(),t(28,"div",224)(29,"div",225)(30,"div",234),s(31,"lucide-icon",235),i()(),t(32,"div",48),n(33),i(),t(34,"div",229),n(35,"Launched Products"),i()()(),t(36,"div",236)(37,"div",80)(38,"div",81)(39,"div",237),s(40,"lucide-icon",238),i(),t(41,"h3",84),n(42,"Agent Fleet Status"),i(),t(43,"span",239),n(44),i()()(),t(45,"div",240),g(46,we,5,3,"div",241),i()(),t(47,"div",236)(48,"div",80)(49,"div",81)(50,"div",82),s(51,"lucide-icon",242),i(),t(52,"h3",84),n(53,"Post-Launch NPA Health"),i()()(),t(54,"table",90)(55,"thead",243)(56,"tr")(57,"th",93),n(58,"Product"),i(),t(59,"th",93),n(60,"Volume (MTD)"),i(),t(61,"th",93),n(62,"P&L"),i(),t(63,"th",95),n(64,"Breaches"),i(),t(65,"th",95),n(66,"Health"),i()()(),t(67,"tbody",96),g(68,ye,17,18,"tr",244),i()()(),t(69,"div",245)(70,"h3",246),s(71,"lucide-icon",247),n(72," Recent Breaches Across Portfolio "),i(),t(73,"div",248),g(74,Se,16,8,"div",249),i()()()),o&2){let e=y();a(9),m(e.monitoringSummary.open_breaches),a(8),x("",e.monitoringSummary.warning_count,"h"),a(8),m(e.monitoringSummary.critical_count),a(8),m(e.monitoringSummary.total_launched),a(11),C("",e.agentsByTier.length," Tiers / ",e.allAgents.length," Agents"),a(2),p("ngForOf",e.agentsByTier),a(22),p("ngForOf",e.launchedNpas),a(6),p("ngForOf",e.monitoringBreaches)}}function Ce(o,r){o&1&&(t(0,"div",272),s(1,"app-escalation-queue"),i())}function Te(o,r){o&1&&(t(0,"div",272),s(1,"app-pir-management"),i())}function Ie(o,r){o&1&&(t(0,"div",272),s(1,"app-bundling-assessment"),i())}function ke(o,r){o&1&&(t(0,"div",272),s(1,"app-document-manager"),i())}function Ne(o,r){o&1&&(t(0,"div",272),s(1,"app-evergreen-dashboard"),i())}var ne=class o{router=S(W);npaService=S(Y);dashboardService=S(Q);monitoringService=S(N);navigateToCreate(){this.router.navigate(["/agents/npa"],{queryParams:{mode:"create"}})}navigateToDetail(r){r.id?this.router.navigate(["/agents/npa"],{queryParams:{mode:"detail",projectId:r.id}}):this.router.navigate(["/agents/npa"],{queryParams:{mode:"detail",projectId:r.productName}})}activeTab="overview";headerActiveNpas=0;headerApprovalRate=0;headerAvgCycle=0;kpis=[];pipelineStages=[];ageing=[];topRevenue=[];npaPool=[];classificationMix=[];classificationTotal=0;classificationGradient="conic-gradient(#e2e8f0 0% 100%)";clusters=[];prospects=[];launchedNpas=[];monitoringBreaches=[];monitoringSummary={total_launched:0,healthy_count:0,warning_count:0,critical_count:0,open_breaches:0,total_volume:0};allAgents=M;agentsByTier=this.groupAgentsByTier();ngOnInit(){this.loadAllData()}loadAllData(){this.npaService.getAll().subscribe({next:r=>{this.npaPool=r.map(e=>({id:e.id,productName:e.title||"Untitled",location:e.jurisdictions?.[0]||"SG",businessUnit:e.pm_team||"Global Fin. Markets",kickoffDate:new Date(e.created_at).toLocaleDateString(),productManager:e.product_manager||e.submitted_by||"Unknown",pmTeam:e.pm_team||"N/A",pacApproval:e.current_stage==="APPROVED"?"Approved":"Pending",proposalPreparer:e.submitted_by||"Unknown",template:e.product_category||e.npa_type||"Standard NPA",classification:this.mapClassification(e.npa_type,e.approval_track),stage:this.mapStage(e.current_stage),status:this.mapStatus(e.status),ageDays:Math.floor((Date.now()-new Date(e.created_at).getTime())/(1e3*3600*24))}))},error:r=>console.error("[COO] Failed to load NPA pool",r)}),D({kpis:this.dashboardService.getKpis(),pipeline:this.dashboardService.getPipeline(),ageing:this.dashboardService.getAgeing(),clusters:this.dashboardService.getClusters(),prospects:this.dashboardService.getProspects(),revenue:this.dashboardService.getRevenue(),classification:this.dashboardService.getClassificationMix()}).subscribe({next:r=>{this.mapKpis(r.kpis);let e=new Map;for(let d of r.pipeline){let b=this.mapStage(d.stage),u=e.get(b),v=Number(d.count||0),T=Number(d.risk_count||0);u?(u.count+=v,u.risk+=T):e.set(b,{name:b,count:v,risk:T,avgTime:"--",status:"normal"})}let l=["Initiation","Discovery","Review","Sign-Off","Pre Launch","Launch","PIR / Monitoring"],c=Array.from(e.values());c.sort((d,b)=>{let u=l.indexOf(d.name),v=l.indexOf(b.name);return u===-1&&v===-1?d.name.localeCompare(b.name):u===-1?1:v===-1?-1:u-v});for(let d of c)d.status=d.risk>0?"danger":d.count>10?"warning":"normal";this.pipelineStages=c;let w=Math.max(...r.ageing.map(d=>d.count),1);this.ageing=r.ageing.map(d=>({label:d.bucket,count:d.count,height:Math.max(10,Math.round(d.count/w*120))}));let I=["bg-emerald-500","bg-indigo-500","bg-purple-500","bg-blue-500","bg-amber-500","bg-rose-500"];if(this.clusters=r.clusters.map((d,b)=>({name:d.cluster_name,growth:(d.growth_percent>=0?"+":"")+d.growth_percent+"%",count:d.npa_count,color:I[b%I.length],intensity:d.intensity_percent+"%"})),this.prospects=r.prospects.map(d=>({name:d.name,theme:d.theme,prob:Math.round(d.probability),estValue:"$"+this.formatValue(d.estimated_value)})),this.topRevenue=r.revenue.map(d=>({name:d.title,owner:d.product_manager||"--",stage:this.mapStage(d.current_stage),revenue:"$"+this.formatValue(d.estimated_revenue),progress:Math.min(100,Math.round(d.estimated_revenue/5e7*100))})),this.classificationTotal=r.classification.reduce((d,b)=>d+b.count,0),this.classificationMix=r.classification.map(d=>({type:d.type||d.label,count:d.count,percentage:this.classificationTotal>0?Math.round(d.count/this.classificationTotal*100):0,color:d.color})),this.classificationTotal>0){let d="conic-gradient(",b=0;this.classificationMix.forEach((u,v)=>{let T=b+u.percentage;d+=`${u.color} ${b}% ${T}%${v<this.classificationMix.length-1?", ":""}`,b=T}),d+=")",this.classificationGradient=d}else this.classificationGradient="conic-gradient(#e2e8f0 0% 100%)"},error:r=>console.error("[COO] Failed to load dashboard data",r)}),D({summary:this.monitoringService.getSummary(),products:this.monitoringService.getProducts(),breaches:this.monitoringService.getBreaches()}).subscribe({next:r=>{this.monitoringSummary=r.summary,this.launchedNpas=r.products.map(e=>({name:e.title,desk:e.npa_type+(e.launched_at?" \xB7 Launched "+new Date(e.launched_at).toLocaleDateString():" \xB7 Pre-Launch"),volume:"$"+this.formatValue(e.total_volume),pnl:(e.realized_pnl>=0?"+$":"-$")+this.formatValue(Math.abs(e.realized_pnl)),breachCount:e.active_breaches,health:e.health_status==="healthy"?"Healthy":e.health_status==="warning"?"Warning":"Critical"})),this.monitoringBreaches=r.breaches.map(e=>({title:e.title,severity:e.severity.toLowerCase(),description:e.description,product:e.npa_title||"Unknown Product",triggeredAt:this.timeAgo(e.triggered_at)}))},error:r=>console.error("[COO] Failed to load monitoring data",r)})}mapKpis(r){let e=u=>r.find(v=>v.label.includes(u)),l=e("Pipeline"),c=e("Cycle"),w=e("Approval"),I=e("Critical")||e("Risk");if(this.headerActiveNpas=Math.round(l?.value||0),this.headerApprovalRate=Math.round(w?.value||0),this.headerAvgCycle=Math.round(c?.value||0),l?.subValue){let u=l.subValue.match(/(\d+)/);u&&(this.headerActiveNpas=parseInt(u[1],10))}let d=["indigo","blue","emerald","rose"],b=["layers","clock","check-circle","shield-alert"];this.kpis=[l,c,w,I].filter(u=>!!u).map((u,v)=>({label:u.label,value:u.displayValue||String(u.value),subValue:u.subValue||"",trend:u.trend||"",trendUp:u.trendUp!==!1,color:d[v]||"slate",icon:b[v]||"activity"}))}mapStage(r){return{INITIATION:"Initiation",DISCOVERY:"Discovery",REVIEW:"Review",DCE_REVIEW:"Review",RETURNED_TO_MAKER:"Review",RISK_ASSESSMENT:"Sign-Off",SIGN_OFF:"Sign-Off",PENDING_SIGN_OFFS:"Sign-Off",GOVERNANCE:"Pre Launch",PENDING_FINAL_APPROVAL:"Pre Launch",APPROVED:"Pre Launch",LAUNCH_PREP:"Pre Launch",UAT:"Pre Launch",LAUNCH:"Launch",LAUNCHED:"Launch",PIR:"PIR / Monitoring",MONITORING:"PIR / Monitoring"}[r]||r||"Discovery"}mapStatus(r){let e=(r||"").toLowerCase();return e==="on track"||e==="completed"?"On Track":e==="at risk"||e==="warning"?"At Risk":e==="blocked"||e==="delayed"?"Delayed":"On Track"}mapClassification(r,e){return e==="FULL_NPA"||e==="PROHIBITED"?"Complex":e==="NPA_LITE"||e==="EVERGREEN"?"Light":e==="BUNDLING"?"Standard":r==="New-to-Group"?"Complex":r==="NPA Lite"||r==="Existing"?"Light":"Standard"}formatValue(r){return r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(0)+"K":""+r}timeAgo(r){if(!r)return"";let e=Date.now()-new Date(r).getTime(),l=Math.floor(e/36e5);if(l<1)return"Just now";if(l<24)return l+" hours ago";let c=Math.floor(l/24);return c+(c===1?" day ago":" days ago")}groupAgentsByTier(){let r={1:"Strategic Command",2:"Domain Orchestration",3:"Specialist Workers",4:"Shared Utilities"};return[1,2,3,4].map(l=>({tier:l,label:r[l],agents:M.filter(c=>c.tier===l)}))}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=$({type:o,selectors:[["app-coo-npa-dashboard"]],decls:70,vars:76,consts:[[1,"h-full","w-full","bg-slate-50/50","flex","flex-col","font-sans","text-slate-900","group/dashboard","relative","overflow-hidden"],[1,"bg-white","border-b","border-slate-200","pt-8","pb-10","px-6","sm:px-10","shadow-sm","relative","overflow-hidden","flex-none"],[1,"absolute","top-0","right-0","w-96","h-96","bg-blue-50","rounded-full","blur-3xl","opacity-50","-translate-y-1/2","translate-x-1/3","pointer-events-none"],[1,"max-w-7xl","mx-auto","flex","flex-col","md:flex-row","items-center","justify-between","gap-8","relative","z-10"],[1,"flex","items-start","gap-6"],[1,"relative","group","cursor-pointer"],[1,"w-20","h-20","rounded-2xl","bg-gradient-to-br","from-slate-900","to-slate-700","flex","items-center","justify-center","shadow-lg","shadow-slate-200","ring-4","ring-white"],["name","layout-dashboard",1,"w-10","h-10","text-white"],[1,"absolute","-bottom-1","-right-1","w-6","h-6","bg-white","rounded-full","flex","items-center","justify-center"],[1,"w-4","h-4","bg-green-500","rounded-full","ring-2","ring-white","animate-pulse"],[1,"space-y-3"],[1,"text-3xl","font-bold","text-slate-900","tracking-tight","flex","items-center","gap-3"],[1,"px-2.5","py-0.5","rounded-full","bg-emerald-50","text-emerald-700","text-xs","font-bold","border","border-emerald-100","uppercase","tracking-wide"],[1,"text-lg","text-slate-500","max-w-2xl","leading-relaxed","mt-1"],[1,"flex","items-center","gap-6","text-sm","font-medium","text-slate-600","bg-slate-50","inline-flex","px-4","py-2","rounded-lg","border","border-slate-200/60"],[1,"flex","items-center","gap-1.5","hover:text-indigo-600","transition-colors","cursor-help"],["name","layers",1,"w-4","h-4","text-indigo-500"],[1,"w-px","h-4","bg-slate-300"],[1,"flex","items-center","gap-1.5","hover:text-emerald-600","transition-colors","cursor-help"],["name","check-circle",1,"w-4","h-4","text-emerald-500"],[1,"flex","items-center","gap-1.5","hover:text-blue-600","transition-colors","cursor-help"],["name","clock",1,"w-4","h-4","text-blue-500"],[1,"flex","flex-col","gap-3","w-full","md:w-auto"],[1,"group","relative","inline-flex","items-center","justify-center","gap-3","px-8","py-4","bg-dbs-primary","hover:bg-dbs-primary-hover","text-white","rounded-xl","font-bold","text-lg","shadow-xl","transition-all","transform","hover:-translate-y-0.5","active:translate-y-0","focus:ring-4","focus:ring-blue-100",3,"click"],["name","plus",1,"w-6","h-6"],[1,"grid","grid-cols-2","gap-2"],[1,"px-4","py-2","bg-white","border","border-dbs-border","text-slate-700","rounded-lg","text-sm","font-semibold","hover:bg-slate-50","hover:text-slate-900","transition-colors","flex","items-center","justify-center","gap-2"],["name","download",1,"w-3.5","h-3.5"],["name","filter",1,"w-3.5","h-3.5"],[1,"border-b","border-slate-200","bg-white","px-6","sm:px-10"],[1,"flex","gap-6"],[1,"px-1","py-3","text-sm","font-semibold","border-b-2","hover:text-slate-900","transition-colors",3,"click"],[1,"px-1","py-3","text-sm","font-semibold","border-b-2","hover:text-slate-900","transition-colors","flex","items-center","gap-2",3,"click"],[1,"px-1.5","py-0.5","rounded-full","text-[10px]","font-bold","bg-rose-100","text-rose-600","border","border-rose-200"],[1,"flex-1","overflow-y-auto","px-6","sm:px-10","py-8","space-y-8","relative","z-10","scrollbar-thin","max-w-7xl","mx-auto","w-full"],["class","space-y-8",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","h-full -mx-6 sm:-mx-10 -my-8",4,"ngIf"],[1,"space-y-8"],[1,"grid","grid-cols-4","gap-6"],["class","bg-white p-5 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all group cursor-default",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-3","bg-white","rounded-xl","border","border-slate-200","shadow-sm","p-6","flex","flex-col"],[1,"text-sm","font-bold","text-slate-700","uppercase","tracking-widest","mb-6","flex","items-center","gap-2"],["name","pie-chart",1,"w-4","h-4","text-slate-400"],[1,"flex-1","flex","flex-col","items-center","justify-center","relative"],[1,"w-40","h-40","rounded-full","relative"],[1,"absolute","inset-4","bg-white","rounded-full","flex","flex-col","items-center","justify-center"],[1,"text-3xl","font-bold","text-slate-900"],[1,"text-[10px]","font-bold","text-slate-400","uppercase"],[1,"mt-6","space-y-3"],["class","flex items-center justify-between text-xs",4,"ngFor","ngForOf"],[1,"col-span-6","bg-white","rounded-xl","border","border-slate-200","shadow-sm","p-6","flex","flex-col"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-sm","font-bold","text-slate-700","uppercase","tracking-widest","flex","items-center","gap-2"],["name","git-merge",1,"w-4","h-4","text-slate-400"],[1,"flex","gap-2"],[1,"text-xs","font-medium","text-slate-500","bg-slate-100","px-2","py-1","rounded"],[1,"flex-1","flex","items-center","relative","px-2"],[1,"absolute","top-1/2","left-0","right-0","h-0.5","bg-slate-100","-translate-y-1/2","z-0"],[1,"w-full","flex","justify-between","relative","z-10"],["class","flex flex-col items-center gap-3 group cursor-pointer",4,"ngFor","ngForOf"],["name","clock",1,"w-4","h-4","text-slate-400"],[1,"flex-1","flex","items-end","justify-between","gap-3","min-h-[160px]"],["class","flex-1 flex flex-col items-center gap-2 group",4,"ngFor","ngForOf"],[1,"grid","grid-cols-2","gap-6"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","p-6","flex","flex-col"],[1,"flex","items-center","justify-between","mb-6"],["name","layout-grid",1,"w-4","h-4","text-slate-400"],[1,"text-xs","font-semibold","text-slate-500"],[1,"flex-1","grid","grid-cols-2","gap-4"],["class","p-4 rounded-xl border border-slate-100 bg-slate-50 hover:bg-white hover:shadow-md hover:border-slate-200 transition-all cursor-pointer group relative overflow-hidden",4,"ngFor","ngForOf"],["name","telescope",1,"w-4","h-4","text-slate-400"],[1,"text-xs","font-bold","text-indigo-600","hover:text-indigo-800","flex","items-center","gap-1"],["name","arrow-right",1,"w-3","h-3"],[1,"flex-1","overflow-y-auto","pr-2","space-y-3","scrollbar-thin"],["class","flex items-center justify-between p-3 rounded-lg border border-slate-100 hover:bg-slate-50 hover:border-slate-200 transition-all group cursor-pointer",4,"ngFor","ngForOf"],[1,"p-3","rounded-lg","border","border-dashed","border-slate-200","flex","items-center","justify-center","text-xs","font-semibold","text-slate-400","hover:text-slate-600","hover:border-slate-300","hover:bg-slate-50","cursor-pointer","transition-all","gap-2"],["name","plus-circle",1,"w-3.5","h-3.5"],[1,"col-span-8","bg-white","rounded-xl","border","border-slate-200","shadow-sm","overflow-hidden","flex","flex-col"],[1,"px-6","py-5","border-b","border-slate-200","flex","items-center","justify-between"],[1,"flex","items-center","gap-3"],[1,"p-1.5","bg-slate-100","rounded","text-slate-500"],["name","list",1,"w-4","h-4"],[1,"text-sm","font-bold","text-slate-900"],[1,"px-2","py-0.5","rounded-full","bg-slate-100","text-slate-600","text-xs","font-bold","border","border-slate-200"],["type","text","placeholder","Search projects...",1,"px-3","py-1.5","bg-slate-50","border","border-slate-200","rounded-lg","text-xs","focus:outline-none","focus:ring-2","focus:ring-slate-200","w-48","transition-all"],[1,"p-1.5","hover:bg-slate-100","rounded-lg","text-slate-400","hover:text-slate-900","transition-colors"],["name","filter",1,"w-4","h-4"],[1,"flex-1","overflow-x-auto"],[1,"w-full","text-left","text-xs"],[1,"bg-slate-50/80","border-b","border-slate-200","text-slate-500","uppercase","tracking-wider","font-semibold","backdrop-blur-sm"],[1,"px-6","py-3","w-1/3"],[1,"px-6","py-3"],[1,"px-6","py-3","text-right"],[1,"px-6","py-3","text-center"],[1,"divide-y","divide-slate-100"],["class","hover:bg-slate-50 transition-colors group cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"px-6","py-4","border-t","border-slate-200","bg-slate-50","flex","items-center","justify-between"],[1,"text-xs","text-slate-500","font-medium"],[1,"px-3","py-1","bg-white","border","border-dbs-border","rounded-lg","hover:bg-slate-50","text-xs","font-semibold","text-slate-700","disabled:opacity-50"],[1,"px-3","py-1","bg-white","border","border-dbs-border","rounded-lg","hover:bg-slate-50","text-xs","font-semibold","text-slate-700"],[1,"col-span-4","space-y-6"],[1,"bg-slate-900","rounded-xl","shadow-lg","overflow-hidden","border","border-slate-800","relative"],[1,"absolute","top-0","right-0","p-24","bg-indigo-600/20","rounded-full","blur-3xl","-mr-12","-mt-12"],[1,"px-6","py-5","border-b","border-white/10","relative","z-10","flex","justify-between","items-center"],[1,"text-sm","font-bold","text-white","uppercase","tracking-widest","flex","items-center","gap-2"],["name","gem",1,"w-4","h-4","text-emerald-400"],[1,"text-[10px]","font-bold","text-slate-400","bg-white/10","px-2","py-1","rounded"],[1,"divide-y","divide-white/5","relative","z-10"],["class","p-5 hover:bg-white/5 transition-colors cursor-pointer group",4,"ngFor","ngForOf"],[1,"p-3","bg-white/5","text-center","cursor-pointer","hover:bg-white/10","transition-colors"],[1,"text-xs","font-bold","text-slate-400"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","p-5"],[1,"flex","items-center","gap-2","mb-4"],["name","bell",1,"w-4","h-4","text-slate-400"],[1,"text-xs","font-bold","text-slate-500","uppercase","tracking-widest"],[1,"flex","gap-3","items-start"],[1,"w-1.5","h-1.5","rounded-full","bg-rose-500","mt-1.5","flex-none"],[1,"text-xs","font-semibold","text-slate-800"],[1,"text-[10px]","text-slate-500"],[1,"w-1.5","h-1.5","rounded-full","bg-amber-500","mt-1.5","flex-none"],[1,"bg-white","p-5","rounded-xl","border","border-slate-200","shadow-sm","hover:shadow-md","transition-all","group","cursor-default"],[1,"flex","justify-between","items-start","mb-4"],[1,"p-2","rounded-lg",3,"ngClass"],[1,"w-5","h-5",3,"name"],[1,"px-2","py-0.5","rounded-full","text-[10px]","font-bold","bg-slate-50","text-slate-500","border","border-slate-100","group-hover:border-slate-200","transition-colors"],[1,"space-y-1"],[1,"text-[11px]","font-bold","text-slate-400","uppercase","tracking-widest"],[1,"flex","items-baseline","gap-2"],[1,"text-3xl","font-bold","text-slate-900","tracking-tight"],["class","text-sm font-medium text-slate-400",4,"ngIf"],[1,"mt-4","flex","items-center","gap-2","text-xs","font-medium","pt-3","border-t","border-slate-50"],[1,"px-1.5","py-0.5","rounded","flex","items-center","gap-1",3,"ngClass"],[1,"w-3","h-3",3,"name"],[1,"text-slate-400"],[1,"text-sm","font-medium","text-slate-400"],[1,"flex","items-center","justify-between","text-xs"],[1,"flex","items-center","gap-2"],[1,"w-2.5","h-2.5","rounded-full"],[1,"font-medium","text-slate-600"],[1,"font-bold","text-slate-900"],[1,"flex","flex-col","items-center","gap-3","group","cursor-pointer"],[1,"w-12","h-12","rounded-xl","border-2","bg-white","flex","items-center","justify-center","shadow-sm","transition-all","duration-300",3,"ngClass"],[1,"text-lg","font-bold"],[1,"text-center","space-y-0.5"],[1,"text-xs","font-bold","text-slate-900"],[1,"text-[10px]","font-mono","text-slate-400"],["class","absolute -top-10 bg-rose-600 text-white text-[10px] font-bold px-2 py-1 rounded shadow-lg animate-bounce",4,"ngIf"],[1,"absolute","-top-10","bg-rose-600","text-white","text-[10px]","font-bold","px-2","py-1","rounded","shadow-lg","animate-bounce"],[1,"flex-1","flex","flex-col","items-center","gap-2","group"],[1,"text-[10px]","font-bold","text-slate-900","mb-1"],[1,"w-full","rounded-t-lg","bg-indigo-600","group-hover:bg-indigo-700","transition-all","duration-300"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","text-center","leading-tight"],[1,"p-4","rounded-xl","border","border-slate-100","bg-slate-50","hover:bg-white","hover:shadow-md","hover:border-slate-200","transition-all","cursor-pointer","group","relative","overflow-hidden"],[1,"absolute","top-0","right-0","w-16","h-16","rounded-bl-full","opacity-10","transition-transform","group-hover:scale-150",3,"ngClass"],[1,"relative","z-10"],[1,"flex","justify-between","items-start","mb-2"],[1,"px-2","py-0.5","rounded","text-[10px]","font-bold","bg-white","text-slate-600","border","border-slate-100","shadow-sm"],["name","arrow-up-right",1,"w-4","h-4","text-slate-300","group-hover:text-slate-600","transition-colors"],[1,"text-sm","font-bold","text-slate-900","mb-0.5"],[1,"text-[10px]","text-slate-500","mb-3"],[1,"w-full","h-1","bg-slate-200","rounded-full","overflow-hidden"],[1,"h-full","rounded-full",3,"ngClass"],[1,"flex","items-center","justify-between","p-3","rounded-lg","border","border-slate-100","hover:bg-slate-50","hover:border-slate-200","transition-all","group","cursor-pointer"],[1,"flex","items-center","gap-4"],[1,"w-8","h-8","rounded-lg","bg-slate-100","text-slate-500","flex","items-center","justify-center","font-bold","text-xs","group-hover:bg-indigo-50","group-hover:text-indigo-600","transition-colors"],[1,"text-sm","font-bold","text-slate-900","group-hover:text-indigo-600","transition-colors"],[1,"text-[10px]","text-slate-500","font-medium"],[1,"px-2","py-1","rounded","text-[10px]","font-bold","bg-slate-100","text-slate-500"],[1,"p-1.5","rounded-md","hover:bg-white","hover:shadow-sm","text-slate-400","hover:text-indigo-600","transition-all"],["name","plus",1,"w-3.5","h-3.5"],[1,"hover:bg-slate-50","transition-colors","group","cursor-pointer",3,"click"],[1,"px-6","py-4"],[1,"font-bold","text-slate-900","text-sm","group-hover:text-indigo-600","transition-colors"],[1,"flex","items-center","gap-2","mt-1"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-bold","uppercase","tracking-wide","border",3,"ngClass"],[1,"text-[10px]","text-slate-400"],[1,"text-slate-700","font-medium"],[1,"text-slate-400","text-[11px]","mt-0.5","flex","items-center","gap-1.5"],[1,"w-1.5","h-1.5","rounded-full","bg-slate-300"],[1,"px-6","py-4","text-right","font-mono","text-slate-500","font-medium"],[1,"px-6","py-4","text-center"],[1,"inline-flex","items-center","gap-1.5","px-2.5","py-1","rounded-full","text-[10px]","font-bold","border",3,"ngClass"],[1,"w-1.5","h-1.5","rounded-full",3,"ngClass"],[1,"px-6","py-4","text-right","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"p-2","hover:bg-slate-200","rounded-lg","text-slate-500","transition-colors"],["name","chevron-right",1,"w-4","h-4"],[1,"p-5","hover:bg-white/5","transition-colors","cursor-pointer","group"],[1,"flex","justify-between","items-start","mb-1"],[1,"text-xs","font-mono","text-slate-500"],[1,"font-bold","text-white","text-sm","group-hover:text-indigo-400","transition-colors","truncate","max-w-[140px]"],[1,"font-bold","text-emerald-400","text-sm","shadow-emerald-500/20","drop-shadow-sm"],[1,"flex","justify-between","items-center","mt-2","pl-7"],[1,"w-16","h-1","bg-slate-700","rounded-full","overflow-hidden"],[1,"h-full","bg-emerald-500"],[1,"text-[10px]","font-mono","text-slate-500"],[1,"space-y-6"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","overflow-hidden","flex","flex-col"],["type","text","placeholder","Search projects...",1,"px-3","py-1.5","bg-slate-50","border","border-slate-200","rounded-lg","text-xs","focus:outline-none","focus:ring-2","focus:ring-slate-200","w-64","transition-all"],[1,"px-3","py-1.5","bg-white","border","border-dbs-border","text-slate-700","rounded-lg","text-xs","font-semibold","hover:bg-slate-50","hover:text-slate-900","transition-colors","flex","items-center","justify-center","gap-2"],[1,"flex-1","overflow-x-auto","scrollbar-thin"],[1,"text-left","text-xs",2,"min-width","1800px"],[1,"bg-slate-50/80","border-b","border-slate-200","text-slate-500","uppercase","tracking-wider","font-semibold","backdrop-blur-sm","sticky","top-0"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","200px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","120px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","150px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","110px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","140px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","160px"],[1,"px-4","py-3","whitespace-nowrap","text-center",2,"min-width","100px"],[1,"px-4","py-3","whitespace-nowrap","text-right",2,"min-width","70px"],[1,"px-4","py-3","whitespace-nowrap",2,"min-width","50px"],[1,"divide-y","divide-slate-100","bg-white"],["disabled","",1,"px-3","py-1","bg-white","border","border-dbs-border","rounded-lg","hover:bg-slate-50","text-xs","font-semibold","text-slate-700","disabled:opacity-50"],["disabled","",1,"px-3","py-1","bg-white","border","border-dbs-border","rounded-lg","hover:bg-slate-50","text-xs","font-semibold","text-slate-700"],[1,"px-4","py-4","whitespace-nowrap"],[1,"text-slate-700"],[1,"text-slate-700","font-mono","text-[11px]"],[1,"inline-block","px-1.5","py-0.5","rounded","text-[10px]","font-bold","uppercase","tracking-wide","border",3,"ngClass"],[1,"text-slate-700","text-[11px]"],[1,"px-4","py-4","whitespace-nowrap","text-center"],[1,"px-4","py-4","whitespace-nowrap","text-right","font-mono","text-slate-500","font-medium"],[1,"px-4","py-4","whitespace-nowrap","text-right","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"bg-white","p-5","rounded-xl","border","border-slate-200","shadow-sm"],[1,"flex","items-center","justify-between","mb-3"],[1,"p-2","rounded-lg","bg-rose-50","text-rose-600"],["name","alert-triangle",1,"w-5","h-5"],[1,"text-[10px]","font-bold","text-rose-600","bg-rose-50","px-2","py-0.5","rounded","border","border-rose-100"],[1,"text-[11px]","font-bold","text-slate-400","uppercase","tracking-widest","mt-1"],[1,"p-2","rounded-lg","bg-amber-50","text-amber-600"],["name","clock",1,"w-5","h-5"],[1,"p-2","rounded-lg","bg-purple-50","text-purple-600"],["name","arrow-up-circle",1,"w-5","h-5"],[1,"p-2","rounded-lg","bg-emerald-50","text-emerald-600"],["name","check-circle",1,"w-5","h-5"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","overflow-hidden"],[1,"p-1.5","bg-indigo-100","rounded","text-indigo-600"],["name","brain-circuit",1,"w-4","h-4"],[1,"px-2","py-0.5","rounded-full","bg-indigo-50","text-indigo-600","text-xs","font-bold","border","border-indigo-100"],[1,"p-6","space-y-4"],[4,"ngFor","ngForOf"],["name","activity",1,"w-4","h-4"],[1,"bg-slate-50/80","border-b","border-slate-200","text-slate-500","uppercase","tracking-wider","font-semibold"],["class","hover:bg-slate-50 transition-colors",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","border","border-slate-200","shadow-sm","p-6"],[1,"text-sm","font-bold","text-slate-900","mb-4","flex","items-center","gap-2"],["name","shield-alert",1,"w-4","h-4","text-rose-500"],[1,"space-y-4"],["class","flex gap-4 p-4 rounded-lg border transition-all",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-widest","mb-2"],[1,"flex","flex-wrap","gap-2"],["class","flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-slate-50 hover:bg-white transition-colors",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","border","border-slate-200","bg-slate-50","hover:bg-white","transition-colors"],[1,"w-7","h-7","rounded-full","flex","items-center","justify-center",3,"ngClass"],[1,"w-3.5","h-3.5",3,"name"],[1,"text-xs","font-medium","text-slate-700"],[1,"w-2","h-2","rounded-full","bg-green-500"],[1,"hover:bg-slate-50","transition-colors"],[1,"font-bold","text-slate-900","text-sm"],[1,"text-[10px]","text-slate-400","mt-0.5"],[1,"px-6","py-4","font-mono","text-slate-700"],[1,"px-6","py-4","font-mono",3,"ngClass"],[1,"px-2","py-0.5","rounded-full","text-[10px]","font-bold",3,"ngClass"],[1,"flex","gap-4","p-4","rounded-lg","border","transition-all",3,"ngClass"],[1,"flex-none","pt-0.5"],[1,"w-2","h-2","rounded-full","mt-1.5",3,"ngClass"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-[10px]","font-bold","uppercase","tracking-wide","px-2","py-0.5","rounded",3,"ngClass"],[1,"text-xs","text-slate-600","mb-1"],[1,"flex","items-center","gap-4","text-[10px]","text-slate-400"],[1,"h-full","-mx-6","sm:-mx-10","-my-8"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1),s(2,"div",2),t(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),s(7,"lucide-icon",7),i(),t(8,"div",8),s(9,"div",9),i()(),t(10,"div",10)(11,"div")(12,"h1",11),n(13," NPA Control Tower "),t(14,"span",12),n(15,"Live Dashboard"),i()(),t(16,"p",13),n(17," Executive overview for New Product Approvals. Monitor pipeline, track governance stages, and oversee approval workflows across all business units. "),i()(),t(18,"div",14)(19,"span",15),s(20,"lucide-icon",16),n(21),i(),s(22,"div",17),t(23,"span",18),s(24,"lucide-icon",19),n(25),i(),s(26,"div",17),t(27,"span",20),s(28,"lucide-icon",21),n(29),i()()()(),t(30,"div",22)(31,"button",23),h("click",function(){return l.navigateToCreate()}),s(32,"lucide-icon",24),n(33," Create NPA "),i(),t(34,"div",25)(35,"button",26),s(36,"lucide-icon",27),n(37," Export "),i(),t(38,"button",26),s(39,"lucide-icon",28),n(40," Filter "),i()()()()(),t(41,"div",29)(42,"div",30)(43,"button",31),h("click",function(){return l.activeTab="overview"}),n(44," Overview "),i(),t(45,"button",31),h("click",function(){return l.activeTab="npa-pool"}),n(46," NPA Pool "),i(),t(47,"button",32),h("click",function(){return l.activeTab="monitoring"}),n(48," Monitoring "),t(49,"span",33),n(50),i()(),t(51,"button",31),h("click",function(){return l.activeTab="escalations"}),n(52," Escalations "),i(),t(53,"button",31),h("click",function(){return l.activeTab="pir"}),n(54," PIR "),i(),t(55,"button",31),h("click",function(){return l.activeTab="bundling"}),n(56," Bundling "),i(),t(57,"button",31),h("click",function(){return l.activeTab="documents"}),n(58," Documents "),i(),t(59,"button",31),h("click",function(){return l.activeTab="evergreen"}),n(60," Evergreen "),i()()(),t(61,"div",34),g(62,ve,129,11,"div",35)(63,fe,58,4,"div",36)(64,Ee,75,9,"div",35)(65,Ce,2,0,"div",37)(66,Te,2,0,"div",37)(67,Ie,2,0,"div",37)(68,ke,2,0,"div",37)(69,Ne,2,0,"div",37),i()()),e&2&&(a(21),x(" ",l.headerActiveNpas," Active NPAs "),a(4),x(" ",l.headerApprovalRate,"% Approval Rate "),a(4),x(" ",l.headerAvgCycle," Days Avg Cycle "),a(14),f("border-slate-900",l.activeTab==="overview")("text-slate-900",l.activeTab==="overview")("border-transparent",l.activeTab!=="overview")("text-slate-500",l.activeTab!=="overview"),a(2),f("border-slate-900",l.activeTab==="npa-pool")("text-slate-900",l.activeTab==="npa-pool")("border-transparent",l.activeTab!=="npa-pool")("text-slate-500",l.activeTab!=="npa-pool"),a(2),f("border-slate-900",l.activeTab==="monitoring")("text-slate-900",l.activeTab==="monitoring")("border-transparent",l.activeTab!=="monitoring")("text-slate-500",l.activeTab!=="monitoring"),a(3),m(l.monitoringSummary.open_breaches),a(),f("border-slate-900",l.activeTab==="escalations")("text-slate-900",l.activeTab==="escalations")("border-transparent",l.activeTab!=="escalations")("text-slate-500",l.activeTab!=="escalations"),a(2),f("border-slate-900",l.activeTab==="pir")("text-slate-900",l.activeTab==="pir")("border-transparent",l.activeTab!=="pir")("text-slate-500",l.activeTab!=="pir"),a(2),f("border-slate-900",l.activeTab==="bundling")("text-slate-900",l.activeTab==="bundling")("border-transparent",l.activeTab!=="bundling")("text-slate-500",l.activeTab!=="bundling"),a(2),f("border-slate-900",l.activeTab==="documents")("text-slate-900",l.activeTab==="documents")("border-transparent",l.activeTab!=="documents")("text-slate-500",l.activeTab!=="documents"),a(2),f("border-slate-900",l.activeTab==="evergreen")("text-slate-900",l.activeTab==="evergreen")("border-transparent",l.activeTab!=="evergreen")("text-slate-500",l.activeTab!=="evergreen"),a(3),p("ngIf",l.activeTab==="overview"),a(),p("ngIf",l.activeTab==="npa-pool"),a(),p("ngIf",l.activeTab==="monitoring"),a(),p("ngIf",l.activeTab==="escalations"),a(),p("ngIf",l.activeTab==="pir"),a(),p("ngIf",l.activeTab==="bundling"),a(),p("ngIf",l.activeTab==="documents"),a(),p("ngIf",l.activeTab==="evergreen"))},dependencies:[H,B,G,z,J,q,X,Z,te,ie,ee],styles:["[_nghost-%COMP%]{display:block;height:100%}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#cbd5e1;border-radius:3px}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#94a3b8}"]})};export{ne as CooNpaDashboardComponent};
