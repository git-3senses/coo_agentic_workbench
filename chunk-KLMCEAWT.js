import{a as we}from"./chunk-WGNVYDFO.js";import{K as C,h as P,k as K,n as F,r as q}from"./chunk-O4ZFC2O5.js";import{A as St,B,a as ht,c as gt,d as p,e as vt,g as yt,h as y,k as A,l as xt,m as bt,n as N,o as wt,p as I,q as L,r as R,s as D,u as x,v as Ot,y as Pt,z as Mt}from"./chunk-IRTGCE2E.js";import{$ as dt,I as Y,L as J,M as Z,N as Q,O as k,P as tt,Q as et,R as rt,S as nt,T as it,U as ot,V as at,W as st,X as lt,Y as ft,Z as ut,_ as ct,aa as mt,b as f,ba as pt,d as v,j as X}from"./chunk-3XTWLQCQ.js";import{g as be}from"./chunk-7RJXRMKA.js";var se=be(we(),1);var Oe=(function(){try{var t=yt(Object,"defineProperty");return t({},"",{}),t}catch{}})(),b=Oe;function Pe(t,e,r){e=="__proto__"&&b?b(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var w=Pe;function Me(t,e,r){(r!==void 0&&!y(t[e],r)||r===void 0&&!(e in t))&&w(t,e,r)}var M=Me;var At=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tt=At&&typeof module=="object"&&module&&!module.nodeType&&module,Se=Tt&&Tt.exports===At,$t=Se?ht.Buffer:void 0,Ct=$t?$t.allocUnsafe:void 0;function Te(t,e){if(e)return t.slice();var r=t.length,n=Ct?Ct(r):new t.constructor(r);return t.copy(n),n}var It=Te;function $e(t){var e=new t.constructor(t.byteLength);return new N(e).set(new N(t)),e}var Lt=$e;function Ce(t,e){var r=e?Lt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Bt=Ce;function Ae(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var _t=Ae;var Wt=Object.create,Ie=(function(){function t(){}return function(e){if(!p(e))return{};if(Wt)return Wt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),Et=Ie;var Le=wt(Object.getPrototypeOf,Object),_=Le;function Be(t){return typeof t.constructor=="function"&&!I(t)?Et(_(t)):{}}var Ft=Be;function _e(t){return L(t)&&x(t)}var Nt=_e;var We="[object Object]",Ee=Function.prototype,Fe=Object.prototype,Rt=Ee.toString,Ne=Fe.hasOwnProperty,Re=Rt.call(Object);function De(t){if(!L(t)||gt(t)!=We)return!1;var e=_(t);if(e===null)return!0;var r=Ne.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Rt.call(r)==Re}var Dt=De;function He(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var S=He;var je=Object.prototype,Ue=je.hasOwnProperty;function ze(t,e,r){var n=t[e];(!(Ue.call(t,e)&&y(n,r))||r===void 0&&!(e in t))&&w(t,e,r)}var Ht=ze;function Ge(t,e,r,n){var i=!r;r||(r={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(r[s],t[s],s,r,t):void 0;l===void 0&&(l=t[s]),i?w(r,s,l):Ht(r,s,l)}return r}var jt=Ge;function Ve(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Ut=Ve;var Ke=Object.prototype,qe=Ke.hasOwnProperty;function Xe(t){if(!p(t))return Ut(t);var e=I(t),r=[];for(var n in t)n=="constructor"&&(e||!qe.call(t,n))||r.push(n);return r}var zt=Xe;function Ye(t){return x(t)?St(t,!0):zt(t)}var W=Ye;function Je(t){return jt(t,W(t))}var Gt=Je;function Ze(t,e,r,n,i,o,a){var s=S(t,r),l=S(e,r),c=a.get(l);if(c){M(t,r,c);return}var u=o?o(s,l,r+"",t,e,a):void 0,m=u===void 0;if(m){var h=D(l),d=!h&&Ot(l),g=!h&&!d&&Pt(l);u=l,h||d||g?D(s)?u=s:Nt(s)?u=_t(s):d?(m=!1,u=It(l,!0)):g?(m=!1,u=Bt(l,!0)):u=[]:Dt(l)||R(l)?(u=s,R(s)?u=Gt(s):(!p(s)||vt(s))&&(u=Ft(l))):m=!1}m&&(a.set(l,u),i(u,l,n,o,a),a.delete(l)),M(t,r,u)}var Vt=Ze;function Kt(t,e,r,n,i){t!==e&&bt(e,function(o,a){if(i||(i=new xt),p(o))Vt(t,e,a,r,Kt,n,i);else{var s=n?n(S(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),M(t,a,s)}},W)}var qt=Kt;function Qe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Xt=Qe;var Yt=Math.max;function ke(t,e,r){return e=Yt(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Yt(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(a),Xt(t,this,s)}}var Jt=ke;function tr(t){return function(){return t}}var Zt=tr;var er=b?function(t,e){return b(t,"toString",{configurable:!0,enumerable:!1,value:Zt(e),writable:!0})}:B,Qt=er;var rr=800,nr=16,ir=Date.now;function or(t){var e=0,r=0;return function(){var n=ir(),i=nr-(n-r);if(r=n,i>0){if(++e>=rr)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var kt=or;var ar=kt(Qt),te=ar;function sr(t,e){return te(Jt(t,e,B),t+"")}var ee=sr;function lr(t,e,r){if(!p(r))return!1;var n=typeof e;return(n=="number"?x(r)&&Mt(e,r.length):n=="string"&&e in r)?y(r[e],t):!1}var re=lr;function fr(t){return ee(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&re(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,o)}return e})}var ne=fr;var ur=ne(function(t,e,r){qt(t,e,r)}),ie=ur;var cr="\u200B",dr={curveBasis:Q,curveBasisClosed:k,curveBasisOpen:tt,curveBumpX:J,curveBumpY:Z,curveBundle:et,curveCardinalClosed:nt,curveCardinalOpen:it,curveCardinal:rt,curveCatmullRomClosed:at,curveCatmullRomOpen:st,curveCatmullRom:ot,curveLinear:Y,curveLinearClosed:lt,curveMonotoneX:ft,curveMonotoneY:ut,curveNatural:ct,curveStep:dt,curveStepAfter:pt,curveStepBefore:mt},mr=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,pr=f(function(t,e){let r=le(t,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(r)){let a=r.map(s=>s.args);q(a),n=F(n,[...a])}else n=r.args;if(!n)return;let i=K(t,e),o="config";return n[o]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[o],delete n[o]),n},"detectInit"),le=f(function(t,e=null){try{let r=new RegExp(`[%]{2}(?![{]${mr.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(r,"").replace(/'/gm,'"'),v.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let n,i=[];for(;(n=P.exec(t))!==null;)if(n.index===P.lastIndex&&P.lastIndex++,n&&!e||e&&n[1]?.match(e)||e&&n[2]?.match(e)){let o=n[1]?n[1]:n[2],a=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;i.push({type:o,args:a})}return i.length===0?{type:t,args:null}:i.length===1?i[0]:i}catch(r){return v.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),Ti=f(function(t){return t.replace(P,"")},"removeDirectives"),hr=f(function(t,e){for(let[r,n]of e.entries())if(n.match(t))return r;return-1},"isSubstringInArray");function fe(t,e){if(!t)return e;let r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return dr[r]??e}f(fe,"interpolateToCurve");function ue(t,e){let r=t.trim();if(r)return e.securityLevel!=="loose"?(0,se.sanitizeUrl)(r):r}f(ue,"formatUrl");var gr=f((t,...e)=>{let r=t.split("."),n=r.length-1,i=r[n],o=window;for(let a=0;a<n;a++)if(o=o[r[a]],!o){v.error(`Function name: ${t} not found in window`);return}o[i](...e)},"runFunc");function H(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}f(H,"distance");function ce(t){let e,r=0;t.forEach(i=>{r+=H(i,e),e=i});let n=r/2;return j(t,n)}f(ce,"traverseEdge");function de(t){return t.length===1?t[0]:ce(t)}f(de,"calcLabelPosition");var oe=f((t,e=2)=>{let r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),j=f((t,e)=>{let r,n=e;for(let i of t){if(r){let o=H(i,r);if(o===0)return r;if(o<n)n-=o;else{let a=n/o;if(a<=0)return r;if(a>=1)return{x:i.x,y:i.y};if(a>0&&a<1)return{x:oe((1-a)*r.x+a*i.x,5),y:oe((1-a)*r.y+a*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),vr=f((t,e,r)=>{v.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());let i=j(e,25),o=t?10:5,a=Math.atan2(e[0].y-i.y,e[0].x-i.x),s={x:0,y:0};return s.x=Math.sin(a)*o+(e[0].x+i.x)/2,s.y=-Math.cos(a)*o+(e[0].y+i.y)/2,s},"calcCardinalityPosition");function me(t,e,r){let n=structuredClone(r);v.info("our points",n),e!=="start_left"&&e!=="start_right"&&n.reverse();let i=25+t,o=j(n,i),a=10+t*.5,s=Math.atan2(n[0].y-o.y,n[0].x-o.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(s+Math.PI)*a+(n[0].x+o.x)/2,l.y=-Math.cos(s+Math.PI)*a+(n[0].y+o.y)/2):e==="end_right"?(l.x=Math.sin(s-Math.PI)*a+(n[0].x+o.x)/2-5,l.y=-Math.cos(s-Math.PI)*a+(n[0].y+o.y)/2-5):e==="end_left"?(l.x=Math.sin(s)*a+(n[0].x+o.x)/2-5,l.y=-Math.cos(s)*a+(n[0].y+o.y)/2-5):(l.x=Math.sin(s)*a+(n[0].x+o.x)/2,l.y=-Math.cos(s)*a+(n[0].y+o.y)/2),l}f(me,"calcTerminalLabelPosition");function pe(t){let e="",r="";for(let n of t)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":e=e+n+";");return{style:e,labelStyle:r}}f(pe,"getStylesFromArray");var ae=0,yr=f(()=>(ae++,"id-"+Math.random().toString(36).substr(2,12)+"-"+ae),"generateId");function he(t){let e="",r="0123456789abcdef",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}f(he,"makeRandomHex");var xr=f(t=>he(t.length),"random"),br=f(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),wr=f(function(t,e){let r=e.text.replace(C.lineBreakRegex," "),[,n]=z(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",n),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);let o=i.append("tspan");return o.attr("x",e.x+e.textMargin*2),o.attr("fill",e.fill),o.text(r),i},"drawSimpleText"),Or=A((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),C.lineBreakRegex.test(t)))return t;let n=t.split(" ").filter(Boolean),i=[],o="";return n.forEach((a,s)=>{let l=T(`${a} `,r),c=T(o,r);if(l>e){let{hyphenatedStrings:h,remainingWord:d}=Pr(a,e,"-",r);i.push(o,...h),o=d}else c+l>=e?(i.push(o),o=a):o=[o,a].filter(Boolean).join(" ");s+1===n.length&&i.push(o)}),i.filter(a=>a!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Pr=A((t,e,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);let i=[...t],o=[],a="";return i.forEach((s,l)=>{let c=`${a}${s}`;if(T(c,n)>=e){let m=l+1,h=i.length===m,d=`${c}${r}`;o.push(h?c:d),a=""}else a=c}),{hyphenatedStrings:o,remainingWord:a}},(t,e,r="-",n)=>`${t}${e}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function ge(t,e){return U(t,e).height}f(ge,"calculateTextHeight");function T(t,e){return U(t,e).width}f(T,"calculateTextWidth");var U=A((t,e)=>{let{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};let[,o]=z(r),a=["sans-serif",n],s=t.split(C.lineBreakRegex),l=[],c=X("body");if(!c.remove)return{width:0,height:0,lineHeight:0};let u=c.append("svg");for(let h of a){let d=0,g={width:0,height:0,lineHeight:0};for(let xe of s){let G=br();G.text=xe||cr;let V=wr(u,G).style("font-size",o).style("font-weight",i).style("font-family",h),$=(V._groups||V)[0][0].getBBox();if($.width===0&&$.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,$.width)),d=Math.round($.height),g.height+=d,g.lineHeight=Math.round(Math.max(g.lineHeight,d))}l.push(g)}u.remove();let m=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[m]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),O,Mr=(O=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},f(O,"InitIDGenerator"),O),E,Sr=f(function(t){return E=E||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),E.innerHTML=t,unescape(E.textContent)},"entityDecode");function Tr(t){return"str"in t}f(Tr,"isDetailedError");var $r=f((t,e,r,n)=>{if(!n)return;let i=t.node()?.getBBox();i&&t.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",e)},"insertTitle"),z=f(t=>{if(typeof t=="number")return[t,t+"px"];let e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function ve(t,e){return ie({},t,e)}f(ve,"cleanAndMerge");var $i={assignWithDepth:F,wrapLabel:Or,calculateTextHeight:ge,calculateTextWidth:T,calculateTextDimensions:U,cleanAndMerge:ve,detectInit:pr,detectDirective:le,isSubstringInArray:hr,interpolateToCurve:fe,calcLabelPosition:de,calcCardinalityPosition:vr,calcTerminalLabelPosition:me,formatUrl:ue,getStylesFromArray:pe,generateId:yr,random:xr,runFunc:gr,entityDecode:Sr,insertTitle:$r,isLabelCoordinateInPath:ye,parseFontSize:z,InitIDGenerator:Mr},Ci=f(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){let n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"\uFB02\xB0\xB0"+n+"\xB6\xDF":"\uFB02\xB0"+n+"\xB6\xDF"}),e},"encodeEntities"),Ai=f(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Ii=f((t,e,{counter:r=0,prefix:n,suffix:i},o)=>o||`${n?`${n}_`:""}${t}_${e}_${r}${i?`_${i}`:""}`,"getEdgeId");function Cr(t){return t??null}f(Cr,"handleUndefinedAttr");function ye(t,e){let r=Math.round(t.x),n=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,o=>Math.round(parseFloat(o)).toString());return i.includes(r.toString())||i.includes(n.toString())}f(ye,"isLabelCoordinateInPath");export{w as a,It as b,Lt as c,Bt as d,_t as e,_ as f,Ft as g,Nt as h,Ht as i,jt as j,W as k,Jt as l,Zt as m,te as n,ee as o,re as p,ie as q,cr as r,Ti as s,fe as t,pe as u,yr as v,xr as w,Or as x,ge as y,T as z,Tr as A,z as B,ve as C,$i as D,Ci as E,Ai as F,Ii as G,Cr as H};
