import{a as Se,b as Te,d as ke}from"./chunk-4YC74TVH.js";import{a as Y,b as X,c as J,d as Ce,e as Ee,f as Ae,g as j}from"./chunk-4PXULBJK.js";import{b as we,k as _e}from"./chunk-N6ELGHO2.js";import{Bb as D,Cb as K,Db as i,De as S,E as k,Eb as b,Ee as _,Fb as h,Hb as N,Ib as P,Jb as R,Ka as d,Lb as ge,Mb as xe,Pa as C,Qb as B,Rb as z,Sb as fe,T as H,Ua as ue,X as me,Y as V,Za as y,bb as p,ca as x,da as f,ea as ce,fa as pe,ib as s,ic as I,jb as e,jc as A,kb as t,kc as E,l as T,lb as a,lc as be,mc as ve,nc as he,ob as le,oc as ye,p as se,pb as de,pc as w,qb as v,rb as u,tb as c,xb as W,yb as q,zb as $}from"./chunk-7IGFF7WI.js";var U=class r{constructor(l){this.http=l}useMockDify=!0;conversationId=null;conversationStep=0;sendMessage(l,n={}){return this.useMockDify?this.mockDifyLogic(l):this.http.post("/api/dify/chat-messages",{query:l,inputs:n,conversation_id:this.conversationId,user:"user-123"}).pipe(se(o=>({answer:o.answer,metadata:o.metadata})))}mockDifyLogic(l){let n=l.toLowerCase(),o={answer:"I didn't understand that."};if(this.conversationStep===0)return this.conversationStep++,T({answer:`Hello! I'm the Product Ideation Agent. 

I can help you classify and route your product proposal. Briefly describe the product structure, underlying asset, and payout logic.`}).pipe(k(1e3));if(this.conversationStep===1)return this.conversationStep++,n.includes("crypto")?T({answer:`\u26A0\uFE0F **Stop**. My analysis detects this as a **New-to-Group (NTG)** product (Crypto Asset Class). 

You cannot proceed with an NPA yet. You must obtain **PAC (Product Approval Committee)** approval first.`,metadata:{agent_action:"STOP_PROCESS"}}).pipe(k(2e3)):T({answer:`I've analyzed your description. 

*   **Classification**: Variation / Existing
*   **Similar NPA**: Found 'TSG1917' (Active)

One critical check before we proceed: **Will this product involve booking across multiple locations (Cross-Border)?**`}).pipe(k(2e3));if(this.conversationStep===2){let m=n.includes("yes")||n.includes("hk")||n.includes("london"),g=`Thanks. I've finalized the configuration.

`;return g+=`### Summary
`,g+=`*   **Track**: NPA Lite (Variation)
`,g+=`*   **Cross-Border**: ${m?"\u2705 YES":"NO"}
`,m&&(g+=`*   **Mandatory Sign-Offs Added**: Finance, Credit, MLR, Tech, Ops
`),g+=`
I have prepared the Work Item shell. Access the draft via the notification or the button below.`,T({answer:g,metadata:{agent_action:"FINALIZE_DRAFT",payload:{track:"NPA_LITE",isCrossBorder:m,mandatorySignOffs:m?["FINANCE","CREDIT","MLR","TECH","OPS"]:[]}}}).pipe(k(2500))}return T({answer:"I've already completed this analysis. Please reset if you want to start over."}).pipe(k(500))}reset(){this.conversationStep=0}static \u0275fac=function(n){return new(n||r)(me(we))};static \u0275prov=H({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ne=["scrollContainer"],Pe=r=>({"flex-row-reverse":r});function Re(r,l){if(r&1){let n=v();e(0,"div",13)(1,"div",14),a(2,"lucide-icon",15),t(),e(3,"div")(4,"h4",16),i(5,"Proposal Ready"),t(),e(6,"p",17),i(7,"Draft generated successfully."),t()(),e(8,"button",18),u("click",function(){x(n);let m=c();return f(m.onComplete.emit())}),i(9," View "),t()()}}function Fe(r,l){r&1&&(e(0,"span"),i(1,"V"),t())}function Le(r,l){r&1&&a(0,"lucide-icon",26)}function Ve(r,l){if(r&1&&(e(0,"div",19)(1,"div",20),p(2,Fe,2,0,"span",21)(3,Le,1,0,"lucide-icon",22),t(),e(4,"div",23),a(5,"markdown",24),e(6,"span",25),i(7),B(8,"date"),t()()()),r&2){let n=l.$implicit;s("ngClass",xe(10,Pe,n.role==="user")),d(),s("ngClass",n.role==="user"?"bg-indigo-600 text-white":"bg-white border border-gray-200 text-indigo-600"),d(),s("ngIf",n.role==="user"),d(),s("ngIf",n.role!=="user"),d(),s("ngClass",n.role==="user"?"bg-indigo-50 border border-indigo-100 text-gray-900 rounded-tr-sm":"bg-white border border-gray-200 text-gray-800 rounded-tl-sm"),d(),s("data",n.content),d(2),b(fe(8,7,n.timestamp,"shortTime"))}}function Be(r,l){r&1&&(e(0,"div",27)(1,"div",28),a(2,"lucide-icon",29),t(),e(3,"div",30)(4,"span"),i(5,"Processing request..."),t()()())}function je(r,l){if(r&1){let n=v();e(0,"div",31)(1,"div",32)(2,"div",33),a(3,"lucide-icon",34),t(),e(4,"span",35),i(5,"Draft Proposal Ready"),t()(),e(6,"button",36),u("click",function(){x(n);let m=c();return f(m.onComplete.emit())}),i(7," Review Now "),a(8,"lucide-icon",37),t()()}}function Ue(r,l){r&1&&(e(0,"div",38)(1,"div",32),a(2,"span",39),e(3,"span",40),i(4,"AI Agent Active"),t()()())}var G=class r{constructor(l){this.difyService=l}onComplete=new C;scrollContainer;userInput="";isThinking=!1;isDraftReady=!1;showToast=!1;messages=[];nextAgent=null;AGENTS={ORCHESTRATOR:{id:"ORCHESTRATOR",name:"NPA Orchestrator",role:"Main Coordinator",color:"bg-slate-800",icon:"brain-circuit"},STRATEGY:{id:"STRATEGY",name:"Strategy Agent",role:"Product & Market Analysis",color:"bg-amber-500",icon:"lightbulb"},RISK:{id:"RISK",name:"Risk Agent",role:"Risk & Compliance Check",color:"bg-red-500",icon:"shield-alert"},LEGAL:{id:"LEGAL",name:"Legal Agent",role:"Regulatory & Contract Review",color:"bg-blue-600",icon:"scale"},OPS:{id:"OPS",name:"Ops Agent",role:"Operational Workflow",color:"bg-emerald-600",icon:"settings"}};currentAgent=this.AGENTS.ORCHESTRATOR;ngOnInit(){this.startConversation()}ngAfterViewChecked(){this.scrollToBottom()}startConversation(){this.difyService.reset(),this.messages.push({role:"agent",content:'Hello! I am your **NPA Agent**. I can assist you with all your product approval tasks. When you are ready to generate a draft, simply say **"Confirm"**.',timestamp:new Date})}sendMessage(){this.userInput.trim()&&this.processUserMessage(this.userInput)}triggerInput(l){this.processUserMessage(l)}processUserMessage(l){this.messages.push({role:"user",content:l,timestamp:new Date}),this.userInput="",this.isThinking=!0,this.callAgentResponse(l,this.currentAgent)}finishDraft(){this.isDraftReady=!0,this.showToast=!0,setTimeout(()=>{this.showToast=!1},5e3)}determineTargetAgent(l){return this.AGENTS.ORCHESTRATOR}callAgentResponse(l,n){this.difyService.sendMessage(l).subscribe({next:o=>{this.messages.push({role:"agent",content:o.answer,timestamp:new Date}),this.isThinking=!1,o.metadata?.agent_action==="FINALIZE_DRAFT"&&this.finishDraft()},error:()=>{this.messages.push({role:"agent",content:"I'm encountering a connection issue. Please try again.",timestamp:new Date}),this.isThinking=!1}})}resetChat(){this.messages=[],this.currentAgent=this.AGENTS.ORCHESTRATOR,this.startConversation()}scrollToBottom(){try{this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(n){return new(n||r)(ue(U))};static \u0275cmp=y({type:r,selectors:[["app-orchestrator-chat"]],viewQuery:function(n,o){if(n&1&&W(Ne,5),n&2){let m;q(m=$())&&(o.scrollContainer=m.first)}},outputs:{onComplete:"onComplete"},decls:13,vars:8,consts:[["scrollContainer",""],[1,"flex","flex-col","h-full","bg-white","relative"],["class","absolute top-4 right-4 z-50 bg-white border-l-4 border-l-green-500 border-gray-200 shadow-xl p-4 rounded-lg animate-fade-in flex items-center gap-3 transition-all",4,"ngIf"],[1,"flex-1","overflow-y-auto","p-4","space-y-6","scrollbar-thin","scroll-smooth"],["class","flex gap-4 group",3,"ngClass",4,"ngFor","ngForOf"],["class","flex gap-4 animate-pulse",4,"ngIf"],[1,"p-4","bg-gray-50","border-t","border-gray-200"],["class","mb-3 px-1 flex items-center justify-between bg-green-50 p-3 rounded-xl border border-green-100 animate-fade-in",4,"ngIf"],["class","flex items-center justify-between mb-3 px-1",4,"ngIf"],[1,"relative","flex","items-center"],["type","text","placeholder","Ask me anything about your NPA...",1,"w-full","bg-white","text-gray-900","text-sm","rounded-lg","pl-4","pr-12","py-3","border","border-gray-300","focus:border-indigo-500","focus:ring-1","focus:ring-indigo-500","focus:outline-none","transition-all","placeholder:text-gray-400","shadow-sm",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"absolute","right-2","p-1.5","rounded-md","bg-indigo-600","hover:bg-indigo-500","text-white","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","shadow-sm",3,"click","disabled"],["name","send",1,"w-4","h-4"],[1,"absolute","top-4","right-4","z-50","bg-white","border-l-4","border-l-green-500","border-gray-200","shadow-xl","p-4","rounded-lg","animate-fade-in","flex","items-center","gap-3","transition-all"],[1,"h-8","w-8","rounded-full","bg-green-100","text-green-600","flex","items-center","justify-center"],["name","check",1,"w-5","h-5"],[1,"font-bold","text-gray-900","text-sm"],[1,"text-xs","text-gray-500"],[1,"ml-4","px-3","py-1.5","bg-green-600","text-white","text-xs","font-bold","rounded-md","hover:bg-green-700","shadow-sm",3,"click"],[1,"flex","gap-4","group",3,"ngClass"],[1,"flex-none","w-8","h-8","rounded-full","flex","items-center","justify-center","text-xs","font-bold","shadow-sm","transition-all","relative",3,"ngClass"],[4,"ngIf"],["name","bot","class","w-4 h-4",4,"ngIf"],[1,"max-w-[85%]","rounded-2xl","px-4","py-3","text-sm","leading-relaxed","shadow-sm","transition-all",3,"ngClass"],[3,"data"],[1,"text-[9px]","opacity-40","mt-1","block","font-mono"],["name","bot",1,"w-4","h-4"],[1,"flex","gap-4","animate-pulse"],[1,"w-8","h-8","rounded-full","bg-white","border","border-gray-200","flex","items-center","justify-center"],["name","loader-2",1,"w-3","h-3","text-indigo-600","animate-spin"],[1,"text-xs","text-gray-400","flex","items-center","gap-2","py-2"],[1,"mb-3","px-1","flex","items-center","justify-between","bg-green-50","p-3","rounded-xl","border","border-green-100","animate-fade-in"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-green-100","text-green-600","flex","items-center","justify-center"],["name","file-check",1,"w-3.5","h-3.5"],[1,"text-sm","font-bold","text-green-900"],[1,"px-4","py-1.5","bg-green-600","text-white","text-xs","font-bold","rounded-lg","shadow-sm","hover:bg-green-700","flex","items-center","gap-2","transition-colors",3,"click"],["name","arrow-right",1,"w-3.5","h-3.5"],[1,"flex","items-center","justify-between","mb-3","px-1"],[1,"w-2","h-2","rounded-full","bg-green-500","animate-pulse"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wide"]],template:function(n,o){if(n&1){let m=v();e(0,"div",1),p(1,Re,10,0,"div",2),e(2,"div",3,0),p(4,Ve,9,12,"div",4)(5,Be,6,0,"div",5),t(),e(6,"div",6),p(7,je,9,0,"div",7)(8,Ue,5,0,"div",8),e(9,"div",9)(10,"input",10),R("ngModelChange",function(oe){return x(m),P(o.userInput,oe)||(o.userInput=oe),f(oe)}),u("keydown.enter",function(){return x(m),f(o.sendMessage())}),t(),e(11,"button",11),u("click",function(){return x(m),f(o.sendMessage())}),a(12,"lucide-icon",12),t()()()()}n&2&&(d(),s("ngIf",o.showToast),d(3),s("ngForOf",o.messages),d(),s("ngIf",o.isThinking),d(2),s("ngIf",o.isDraftReady),d(),s("ngIf",!o.isDraftReady),d(2),N("ngModel",o.userInput),s("disabled",o.isThinking),d(),s("disabled",!o.userInput.trim()||o.isThinking))},dependencies:[w,I,A,E,j,Y,X,J,_,S,ke,Te,ye],styles:["[_nghost-%COMP%]{display:block;height:100%}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e5e7eb;border-radius:3px}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .4s cubic-bezier(.16,1,.3,1)}"]})};function Ge(r,l){if(r&1){let n=v();e(0,"button",21),u("click",function(){x(n);let m=c();return f(m.resetChat())}),a(1,"lucide-icon",22),t()}}function He(r,l){if(r&1){let n=v();e(0,"button",39),u("click",function(){let m=x(n).$implicit,g=c(2);return f(g.selectedCategory=m.id)}),i(1),t()}if(r&2){let n=l.$implicit,o=c(2);s("ngClass",o.selectedCategory===n.id?"bg-indigo-50 text-indigo-700 border-indigo-200 shadow-sm":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 hover:bg-gray-50"),d(),h(" ",n.name," ")}}function We(r,l){if(r&1){let n=v();e(0,"div",40),u("click",function(){let m=x(n).$implicit,g=c(2);return f(g.selectTemplate(m))}),e(1,"div",41)(2,"div",42),a(3,"lucide-icon",43),t(),a(4,"lucide-icon",44),t(),e(5,"h4",45),i(6),t(),e(7,"p",46),i(8),t(),e(9,"div",47)(10,"span",48),a(11,"lucide-icon",49),i(12),t(),e(13,"span",48),a(14,"lucide-icon",50),i(15),t()()()}if(r&2){let n=l.$implicit;d(2),s("ngClass",n.iconBg||"bg-gray-100 text-gray-600"),d(),s("name",n.icon||"file-text"),d(3),b(n.title),d(2),b(n.description),d(4),h(" ",n.avgTime," "),d(3),h(" ",n.successRate,"% success ")}}function qe(r,l){r&1&&(e(0,"span",72),i(1,"*"),t())}function $e(r,l){if(r&1&&a(0,"input",73),r&2){let n=c().$implicit;s("type",n.type||"text")("placeholder",n.placeholder)}}function Ke(r,l){if(r&1&&a(0,"textarea",74),r&2){let n=c().$implicit;s("placeholder",n.placeholder)}}function ze(r,l){if(r&1&&(e(0,"div")(1,"label",68),i(2),p(3,qe,2,0,"span",69),t(),p(4,$e,1,2,"input",70)(5,Ke,1,1,"textarea",71),t()),r&2){let n=l.$implicit;d(2),h("",n.label," "),d(),s("ngIf",n.required),d(),s("ngIf",n.type!=="textarea"),d(),s("ngIf",n.type==="textarea")}}function Ye(r,l){if(r&1){let n=v();e(0,"div",51)(1,"div",52)(2,"h3",53),i(3,"Configure Template"),t(),e(4,"button",54),u("click",function(){x(n);let m=c(2);return f(m.activeTemplate=null)}),a(5,"lucide-icon",55),t()(),e(6,"div",56)(7,"div",57)(8,"div",58)(9,"div",59),a(10,"lucide-icon",43),t(),e(11,"div")(12,"label",60),i(13,"Selected"),t(),e(14,"p",61),i(15),t()()(),e(16,"div",62),i(17),t(),e(18,"div",63),p(19,ze,6,4,"div",64),t()()(),e(20,"div",65)(21,"button",66),u("click",function(){x(n);let m=c(2);return f(m.submitTemplate())}),a(22,"lucide-icon",67),i(23," Generate with AI "),t()()()}if(r&2){let n=c(2);d(9),s("ngClass",n.activeTemplate.iconBg),d(),s("name",n.activeTemplate.icon||"file-text"),d(5),b(n.activeTemplate.title),d(2),h(" ",n.activeTemplate.description," "),d(2),s("ngForOf",n.activeTemplate.inputs)}}function Xe(r,l){if(r&1&&(e(0,"div",23)(1,"div",24)(2,"div",25),a(3,"lucide-icon",26),i(4," Categories: "),t(),p(5,He,2,2,"button",27),t(),e(6,"div",28)(7,"div",29)(8,"div",30)(9,"h3",31),i(10),e(11,"span",32),i(12),t()(),e(13,"div",33),a(14,"lucide-icon",34)(15,"input",35),t()(),e(16,"div",36),p(17,We,16,6,"div",37),t()()(),p(18,Ye,24,5,"div",38),t()),r&2){let n=c();d(5),s("ngForOf",n.categories),d(5),h(" ",n.getCategoryName(n.selectedCategory)," "),d(2),h("(",n.getTemplatesByCategory(n.selectedCategory).length," templates)"),d(5),s("ngForOf",n.getTemplatesByCategory(n.selectedCategory)),d(),s("ngIf",n.activeTemplate)}}function Je(r,l){if(r&1){let n=v();e(0,"div",75)(1,"app-orchestrator-chat",76),u("onComplete",function(){x(n);let m=c();return f(m.handleAgentComplete())}),t()()}}var Q=class r{onBack=new C;onComplete=new C;chatComponent;mode="TEMPLATE";selectedCategory="STRATEGY";activeTemplate=null;categories=[{id:"STRATEGY",name:"Product Strategy"},{id:"RISK",name:"Risk & Compliance"},{id:"LEGAL",name:"Legal & Regulatory"},{id:"OPS",name:"Operations"},{id:"MARKETING",name:"Marketing & Sales"}];templates=[{id:"S1",title:"Draft New Product Concept",description:"Generate a structured concept paper for a new financial product, including target market and revenue model.",category:"Product Strategy",successRate:88,avgTime:"2m 15s",icon:"lightbulb",iconBg:"bg-amber-100 text-amber-600",inputs:[{label:"Product Name",placeholder:"e.g. Green Bond ETF",key:"name",required:!0},{label:"Target Segment",placeholder:"e.g. Institutional Investors",key:"segment"},{label:"Key Features",placeholder:"Describe main features...",key:"features",type:"textarea"}]},{id:"S2",title:"Competitor Analysis",description:"Analyze key competitors for a proposed product and identify differentiators.",category:"Product Strategy",successRate:92,avgTime:"45s",icon:"users",iconBg:"bg-blue-100 text-blue-600",inputs:[{label:"Product Type",placeholder:"e.g. Robo-advisory",key:"type",required:!0},{label:"Main Competitor",placeholder:"e.g. StashAway",key:"competitor"}]},{id:"R1",title:"Initial Risk Assessment",description:"Evaluate potential operational, credit, and market risks for a new initiative.",category:"Risk & Compliance",successRate:95,avgTime:"1m 30s",icon:"shield-alert",iconBg:"bg-red-100 text-red-600",inputs:[{label:"Product/Process",placeholder:"e.g. Crypto Custody",key:"product",required:!0},{label:"Jurisdiction",placeholder:"e.g. Singapore, HK",key:"jurisdiction"}]},{id:"R2",title:"Check Prohibited Lists",description:"Scan entities or product types against internal prohibited/restricted lists.",category:"Risk & Compliance",successRate:99,avgTime:"10s",icon:"search",iconBg:"bg-orange-100 text-orange-600",inputs:[{label:"Keywords",placeholder:"Enter names or sectors...",key:"keywords",required:!0}]},{id:"L1",title:"Regulatory Compliance Check",description:"Verify if a product structure adheres to MAS Guidelines (e.g., SFA, FAA).",category:"Legal & Regulatory",successRate:91,avgTime:"3m",icon:"scale",iconBg:"bg-slate-100 text-slate-700",inputs:[{label:"Product Structure",placeholder:"Describe structure...",key:"structure",type:"textarea"},{label:"Relevant Regulation",placeholder:"e.g. MAS 656",key:"reg"}]},{id:"O1",title:"Draft Process Flow",description:"Outline the end-to-end operational workflow for booking and settlement.",category:"Operations",successRate:85,avgTime:"2m",icon:"workflow",iconBg:"bg-indigo-100 text-indigo-600",inputs:[{label:"Asset Class",placeholder:"e.g. Equities",key:"asset"},{label:"Booking System",placeholder:"e.g. Murex",key:"system"}]}];constructor(){console.log("ChatInterface Init. Categories:",this.categories),console.log("Templates:",this.templates)}goBack(){this.onBack.emit()}handleAgentComplete(){this.onComplete.emit()}getCategoryName(l){return this.categories.find(n=>n.id===l)?.name||"Templates"}getTemplatesByCategory(l){let n=this.categories.find(o=>o.id===l)?.name;return n?this.templates.filter(o=>o.category===n):[]}selectTemplate(l){this.activeTemplate=l}submitTemplate(){if(!this.activeTemplate)return;let l=this.activeTemplate.title,n=this.activeTemplate.inputs.map(m=>`${m.label}: [User Input]`).join(", "),o=`Manage Task: ${l}
Details: ${n}`;this.mode="AGENT",this.activeTemplate=null,setTimeout(()=>{this.chatComponent&&this.chatComponent.triggerInput(o)},100)}resetChat(){this.chatComponent&&this.chatComponent.resetChat()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-chat-interface"]],viewQuery:function(n,o){if(n&1&&W(G,5),n&2){let m;q(m=$())&&(o.chatComponent=m.first)}},outputs:{onBack:"onBack",onComplete:"onComplete"},decls:28,vars:5,consts:[[1,"h-full","flex","flex-col","bg-white"],[1,"h-16","flex","items-center","justify-between","px-6","border-b","border-gray-200","bg-white","shadow-sm","z-20"],[1,"flex","items-center","gap-4"],[1,"p-2","rounded-lg","hover:bg-gray-100","text-gray-500","hover:text-gray-900","transition-colors",3,"click"],["name","arrow-left",1,"w-5","h-5"],[1,"flex","items-center","gap-3"],[1,"h-8","w-px","bg-gray-200"],[1,"text-sm","font-bold","text-gray-900"],[1,"text-[10px]","text-gray-500","font-mono"],[1,"flex","items-center","gap-1","bg-gray-100","p-1","rounded-lg"],[1,"px-4","py-1.5","rounded-md","text-xs","font-bold","transition-all","flex","items-center","gap-2",3,"click","ngClass"],["name","layout-template",1,"w-3.5","h-3.5"],["name","message-square",1,"w-3.5","h-3.5"],[1,"flex","items-center","gap-2"],["title","Reset Conversation","class","p-2 rounded-lg hover:bg-gray-100 text-gray-500 hover:text-red-600 transition-colors",3,"click",4,"ngIf"],[1,"h-6","w-px","bg-gray-200","mx-1"],[1,"text-xs","text-green-600","font-medium","flex","items-center","gap-1.5","bg-green-50","px-2","py-1","rounded","border","border-green-100"],[1,"w-1.5","h-1.5","rounded-full","bg-green-500","animate-pulse"],[1,"flex-1","overflow-hidden","relative","flex","flex-col"],["class","flex-1 flex flex-col h-full bg-slate-50 relative",4,"ngIf"],["class","h-full flex flex-col",4,"ngIf"],["title","Reset Conversation",1,"p-2","rounded-lg","hover:bg-gray-100","text-gray-500","hover:text-red-600","transition-colors",3,"click"],["name","rotate-ccw",1,"w-5","h-5"],[1,"flex-1","flex","flex-col","h-full","bg-slate-50","relative"],[1,"w-full","bg-white","border-b","border-gray-200","px-6","py-3","flex","items-center","gap-4","overflow-x-auto","scrollbar-hide","flex-none"],[1,"flex","items-center","gap-2","text-gray-400","text-xs","font-bold","uppercase","tracking-wider","mr-2"],["name","filter",1,"w-3.5","h-3.5"],["class","px-3 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all border",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex-1","overflow-y-auto","p-6","md:p-8"],[1,"max-w-5xl","mx-auto","space-y-6"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-lg","font-bold","text-gray-900","flex","items-center","gap-2"],[1,"text-gray-400","font-normal","text-sm"],[1,"relative","w-64"],["name","search",1,"absolute","left-3","top-1/2","-translate-y-1/2","w-4","h-4","text-gray-400"],["type","text","placeholder","Filter templates...",1,"w-full","text-sm","pl-9","pr-3","py-2","rounded-lg","border","border-gray-200","bg-white","focus:border-indigo-500","focus:ring-1","focus:ring-indigo-500","outline-none","shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","bg-white border border-gray-200 rounded-xl p-5 hover:shadow-md hover:border-indigo-300 transition-all cursor-pointer relative group flex flex-col h-full",3,"click",4,"ngFor","ngForOf"],["class","w-96 border-l border-gray-200 bg-white flex-none flex flex-col shadow-2xl absolute right-0 top-0 bottom-0 z-30 animate-slide-in",4,"ngIf"],[1,"px-3","py-1.5","rounded-full","text-xs","font-bold","whitespace-nowrap","transition-all","border",3,"click","ngClass"],[1,"bg-white","border","border-gray-200","rounded-xl","p-5","hover:shadow-md","hover:border-indigo-300","transition-all","cursor-pointer","relative","group","flex","flex-col","h-full",3,"click"],[1,"flex","items-start","justify-between","mb-3"],[1,"p-2","rounded-lg",3,"ngClass"],[1,"w-5","h-5",3,"name"],["name","arrow-right",1,"w-4","h-4","text-gray-300","group-hover:text-indigo-500","transition-colors"],[1,"text-sm","font-bold","text-gray-900","mb-1","group-hover:text-indigo-700","transition-colors"],[1,"text-xs","text-gray-500","mb-4","line-clamp-2","flex-1"],[1,"flex","items-center","gap-3","text-[10px]","font-medium","pt-3","border-t","border-gray-100"],[1,"text-slate-600","flex","items-center","gap-1"],["name","clock",1,"w-3","h-3","text-slate-400"],["name","check-circle",1,"w-3","h-3","text-green-500"],[1,"w-96","border-l","border-gray-200","bg-white","flex-none","flex","flex-col","shadow-2xl","absolute","right-0","top-0","bottom-0","z-30","animate-slide-in"],[1,"p-4","border-b","border-gray-200","flex","items-center","justify-between","bg-gray-50"],[1,"text-sm","font-bold","text-gray-900","truncate","pr-4"],[1,"text-gray-400","hover:text-gray-600","hover:bg-gray-200","rounded-full","p-1","transition-colors",3,"click"],["name","x",1,"w-5","h-5"],[1,"p-6","flex-1","overflow-y-auto"],[1,"space-y-6"],[1,"flex","items-start","gap-3"],[1,"p-2","rounded-lg","flex-none",3,"ngClass"],[1,"text-[10px]","font-bold","text-gray-500","uppercase","tracking-widest","block","mb-1"],[1,"text-sm","font-bold","text-gray-900","leading-tight"],[1,"p-3","bg-indigo-50","border","border-indigo-100","rounded-lg","text-xs","text-indigo-800"],[1,"space-y-4","pt-2"],[4,"ngFor","ngForOf"],[1,"p-4","border-t","border-gray-200","bg-gray-50"],[1,"w-full","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","text-sm","font-bold","rounded-xl","shadow-lg","shadow-indigo-200","transition-all","flex","items-center","justify-center","gap-2","transform","active:scale-95",3,"click"],["name","sparkles",1,"w-4","h-4"],[1,"block","text-xs","font-semibold","text-gray-700","mb-1.5"],["class","text-red-500",4,"ngIf"],["class","w-full text-sm px-3 py-2 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-shadow bg-white hover:bg-gray-50 focus:bg-white",3,"type","placeholder",4,"ngIf"],["rows","3","class","w-full text-sm px-3 py-2 rounded-lg border border-gray-300 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-shadow bg-white hover:bg-gray-50 focus:bg-white",3,"placeholder",4,"ngIf"],[1,"text-red-500"],[1,"w-full","text-sm","px-3","py-2","rounded-lg","border","border-gray-300","focus:border-indigo-500","focus:ring-1","focus:ring-indigo-500","outline-none","transition-shadow","bg-white","hover:bg-gray-50","focus:bg-white",3,"type","placeholder"],["rows","3",1,"w-full","text-sm","px-3","py-2","rounded-lg","border","border-gray-300","focus:border-indigo-500","focus:ring-1","focus:ring-indigo-500","outline-none","transition-shadow","bg-white","hover:bg-gray-50","focus:bg-white",3,"placeholder"],[1,"h-full","flex","flex-col"],[3,"onComplete"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return o.goBack()}),a(4,"lucide-icon",4),t(),e(5,"div",5),a(6,"div",6),e(7,"div")(8,"h2",7),i(9,"NPA Agent"),t(),e(10,"p",8),i(11,"Product Approval Assistant"),t()()()(),e(12,"div",9)(13,"button",10),u("click",function(){return o.mode="TEMPLATE"}),a(14,"lucide-icon",11),i(15," Templates "),t(),e(16,"button",10),u("click",function(){return o.mode="AGENT"}),a(17,"lucide-icon",12),i(18," Chat "),t()(),e(19,"div",13),p(20,Ge,2,0,"button",14),a(21,"div",15),e(22,"span",16),a(23,"span",17),i(24," Online "),t()()(),e(25,"div",18),p(26,Xe,19,5,"div",19)(27,Je,2,0,"div",20),t()()),n&2&&(d(13),s("ngClass",o.mode==="TEMPLATE"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"),d(3),s("ngClass",o.mode==="AGENT"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"),d(4),s("ngIf",o.mode==="AGENT"),d(6),s("ngIf",o.mode==="TEMPLATE"),d(),s("ngIf",o.mode==="AGENT"))},dependencies:[w,I,A,E,_,S,j,G],styles:["[_nghost-%COMP%]{display:block;height:100%}.animate-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}"]})};var Z=class r{difyBase=V(U);getCapabilities(){return T([{id:"create_npa",name:"Create New NPA",description:"Guides you through 10 questions to build a complete NPA with 78% auto-fill.",icon:"file-edit",stats:{label:"Creates",value:"1,248"},actionLabel:"Start",color:"blue",status:"active"},{id:"find_similar",name:"Find Similar NPAs",description:"Search 1,784 historical records by semantic similarity using vector embeddings.",icon:"sparkles",stats:{label:"Match Rate",value:"94%"},actionLabel:"Search",color:"purple",status:"active"},{id:"predict_outcome",name:"Predict Outcome",description:"ML precision forecasts on approval likelihood, timeline, and potential bottlenecks.",icon:"trending-up",stats:{label:"Accuracy",value:"92%"},actionLabel:"Predict",color:"amber",status:"active"},{id:"policy_qa",name:"Policy Q&A",description:"Ask anything about MAS regulations and internal DBS policies. Citations included.",icon:"book-open",stats:{label:"Docs",value:"200+"},actionLabel:"Ask",color:"green",status:"active"},{id:"auto_fill",name:"Template Auto-Fill",description:"Upload term sheets or RFPs to automatically populate the 47-field NPA template.",icon:"zap",stats:{label:"Coverage",value:"78%"},actionLabel:"Upload",color:"indigo",status:"active"},{id:"classify_route",name:"Classify & Route",description:"Determine if product is NTG, Variation, or Existing and assign approval track.",icon:"git-branch",stats:{label:"Confidence",value:"88%"},actionLabel:"Classify",color:"red",status:"active"},{id:"validate_docs",name:"Validate Documents",description:"Check completeness and compliance of uploaded documents before submission.",icon:"shield-check",stats:{label:"Catch Rate",value:"89%"},actionLabel:"Validate",color:"blue",status:"beta"},{id:"historical_analysis",name:"Historical Analysis",description:"Understand past decisions and approval reasoning for 1,784+ NPAs.",icon:"history",stats:{label:"Records",value:"1.7k"},actionLabel:"Analyze",color:"purple",status:"active"}]).pipe(k(500))}getActiveWorkItems(){return T([{id:"JOB-992",agentName:"TemplateAutoFill",operation:'Parsing "Term_Sheet_FX.pdf"',status:"running",duration:"1.2s",color:"blue"},{id:"JOB-991",agentName:"Classification",operation:"Classifying TSG2025-041",status:"completed",duration:"450ms",color:"purple"},{id:"JOB-990",agentName:"Orchestration",operation:"Handing off to Human (Ops)",status:"waiting",duration:"12m",color:"amber"},{id:"JOB-989",agentName:"KB Search",operation:'Indexing "MAS_Guidelines.pdf"',status:"completed",duration:"890ms",color:"fuchsia"},{id:"JOB-988",agentName:"Prohibited List",operation:'Scanning "Sanctions.csv"',status:"running",duration:"2.1s",color:"red"}]).pipe(k(300))}getAgentHealth(){return T({status:"healthy",latency:42,uptime:99.9,activeAgents:8,totalDecisions:14529}).pipe(k(200))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=H({token:r,factory:r.\u0275fac,providedIn:"root"})};function Qe(r,l){r&1&&(e(0,"div",14)(1,"div",15)(2,"p")(3,"span",16),i(4,"How it works:"),t(),i(5," This agent uses Dify workflows to orchestrate the process."),t(),e(6,"div",17)(7,"span",18),i(8,"Model: GPT-4o"),t(),e(9,"span",18),i(10,"Tools: 3"),t()(),e(11,"button",19),i(12," Launch Full Mode "),t()()())}var ee=class r{capability;isExpanded=!1;action=new C;expand=new C;onActionClick(l){l.stopPropagation(),this.action.emit()}toggleExpand(){this.expand.emit()}getHoverClass(l){return{blue:"hover:border-blue-200",purple:"hover:border-purple-200",amber:"hover:border-amber-200",green:"hover:border-green-200",indigo:"hover:border-indigo-200",red:"hover:border-red-200"}[l]||"hover:border-slate-200"}getIconBgClass(l){return{blue:"bg-blue-50 text-blue-600",purple:"bg-purple-50 text-purple-600",amber:"bg-amber-50 text-amber-600",green:"bg-green-50 text-green-600",indigo:"bg-indigo-50 text-indigo-600",red:"bg-red-50 text-red-600"}[l]||"bg-slate-50 text-slate-600"}getTextClass(l){return{blue:"text-blue-600",purple:"text-purple-600",amber:"text-amber-600",green:"text-green-600",indigo:"text-indigo-600",red:"text-red-600"}[l]||"text-slate-600"}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-capability-card"]],inputs:{capability:"capability",isExpanded:"isExpanded"},outputs:{action:"action",expand:"expand"},decls:19,vars:13,consts:[[1,"group","bg-white","rounded-xl","p-5","border","border-slate-200","shadow-sm","hover:shadow-md","transition-all","cursor-pointer","relative","overflow-hidden",3,"click","ngClass"],[1,"flex","justify-between","items-start","mb-4"],[1,"w-10","h-10","rounded-lg","flex","items-center","justify-center","transition-transform","group-hover:scale-110",3,"ngClass"],[1,"w-5","h-5",3,"name"],[1,"text-slate-300","group-hover:text-slate-500","transition-colors"],[1,"w-4","h-4",3,"name"],[1,"font-bold","text-slate-900","mb-1"],[1,"text-sm","text-slate-500","mb-4","transition-all","duration-300"],[1,"flex","items-center","justify-between","text-xs","mt-auto"],[1,"font-mono","text-slate-400"],[1,"font-semibold","text-slate-600"],[1,"font-semibold","transition-transform","group-hover:translate-x-1","flex","items-center","gap-1",3,"click","ngClass"],["name","arrow-right",1,"w-3","h-3"],["class","mt-4 pt-4 border-t border-slate-100 animate-in fade-in slide-in-from-top-2 duration-200",4,"ngIf"],[1,"mt-4","pt-4","border-t","border-slate-100","animate-in","fade-in","slide-in-from-top-2","duration-200"],[1,"text-xs","text-slate-500","space-y-2"],[1,"font-semibold","text-slate-700"],[1,"flex","items-center","gap-2"],[1,"px-1.5","py-0.5","rounded","bg-slate-100","border","border-slate-200","text-[10px]","font-mono"],[1,"w-full","mt-3","py-1.5","rounded-lg","bg-slate-900","text-white","font-medium","hover:bg-slate-800","transition-colors"]],template:function(n,o){n&1&&(e(0,"div",0),u("click",function(){return o.toggleExpand()}),e(1,"div",1)(2,"div",2),a(3,"lucide-icon",3),t(),e(4,"div",4),a(5,"lucide-icon",5),t()(),e(6,"h3",6),i(7),t(),e(8,"p",7),i(9),t(),e(10,"div",8)(11,"span",9)(12,"span",10),i(13),t(),i(14),t(),e(15,"button",11),u("click",function(g){return o.onActionClick(g)}),i(16),a(17,"lucide-icon",12),t()(),p(18,Qe,13,0,"div",13),t()),n&2&&(s("ngClass",o.getHoverClass(o.capability.color)),d(2),s("ngClass",o.getIconBgClass(o.capability.color)),d(),s("name",o.capability.icon),d(2),s("name",o.isExpanded?"chevron-up":"chevron-down"),d(2),b(o.capability.name),d(),D("line-clamp-2",!o.isExpanded),d(),h(" ",o.capability.description," "),d(4),b(o.capability.stats.value),d(),h(" ",o.capability.stats.label," "),d(),s("ngClass",o.getTextClass(o.capability.color)),d(),h(" ",o.capability.actionLabel," "),d(2),s("ngIf",o.isExpanded))},dependencies:[w,I,E,_,S],encapsulation:2})};function Ze(r,l){r&1&&(e(0,"span",22),a(1,"span",23),i(2," Running "),t())}function et(r,l){r&1&&(e(0,"span",24),a(1,"lucide-icon",25),i(2," Done "),t())}function tt(r,l){r&1&&(e(0,"span",26),a(1,"lucide-icon",27),i(2," Wait "),t())}function it(r,l){if(r&1&&(e(0,"div",11)(1,"div",12)(2,"span",13),i(3),t(),e(4,"span",14),i(5),t(),e(6,"span",15),i(7),t()(),e(8,"div",16)(9,"div",17),p(10,Ze,3,0,"span",18)(11,et,3,0,"span",19)(12,tt,3,0,"span",20),t(),e(13,"span",21),i(14),t()()()),r&2){let n=l.$implicit,o=c();d(3),b(n.id),d(),s("ngClass",o.getColorClass(n.color)),d(),b(n.agentName),d(2),b(n.operation),d(3),s("ngIf",n.status==="running"),d(),s("ngIf",n.status==="completed"),d(),s("ngIf",n.status==="waiting"),d(2),b(n.duration)}}function nt(r,l){r&1&&(e(0,"div",28),i(1," No active agent jobs running. "),t())}var te=class r{items=[];getColorClass(l){return{blue:"text-blue-400",purple:"text-purple-400",amber:"text-amber-400",green:"text-green-400",red:"text-red-400",fuchsia:"text-fuchsia-400"}[l]||"text-slate-400"}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-work-item-list"]],inputs:{items:"items"},decls:17,vars:2,consts:[[1,"bg-slate-900","rounded-xl","overflow-hidden","shadow-lg","border","border-slate-800","font-mono","text-sm"],[1,"bg-slate-950","px-4","py-2","border-b","border-slate-800","flex","items-center","justify-between","text-xs","text-slate-400"],[1,"flex","gap-4"],[1,"w-20"],[1,"w-32"],[1,"flex","gap-4","mr-8"],[1,"w-24","text-right"],[1,"w-16","text-right"],[1,"divide-y","divide-slate-800/50"],["class","px-4 py-3 flex items-center justify-between hover:bg-white/5 transition-colors group cursor-default",4,"ngFor","ngForOf"],["class","px-4 py-8 text-center text-slate-600 italic",4,"ngIf"],[1,"px-4","py-3","flex","items-center","justify-between","hover:bg-white/5","transition-colors","group","cursor-default"],[1,"flex","gap-4","items-center"],[1,"text-slate-500","w-20"],[1,"font-medium","w-32","truncate",3,"ngClass"],[1,"text-slate-300","truncate","max-w-[200px]","md:max-w-md"],[1,"flex","gap-4","justify-end","items-center"],[1,"w-24","flex","justify-end"],["class","text-green-400 flex items-center gap-1.5",4,"ngIf"],["class","text-slate-500 flex items-center gap-1.5",4,"ngIf"],["class","text-amber-400 flex items-center gap-1.5",4,"ngIf"],[1,"text-slate-600","w-16","text-right","font-mono","text-xs"],[1,"text-green-400","flex","items-center","gap-1.5"],[1,"w-1.5","h-1.5","bg-green-400","rounded-full","animate-pulse"],[1,"text-slate-500","flex","items-center","gap-1.5"],["name","check",1,"w-3","h-3"],[1,"text-amber-400","flex","items-center","gap-1.5"],["name","clock",1,"w-3","h-3"],[1,"px-4","py-8","text-center","text-slate-600","italic"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),i(4,"JOB ID"),t(),e(5,"span",4),i(6,"AGENT"),t(),e(7,"span"),i(8,"OPERATION"),t()(),e(9,"div",5)(10,"span",6),i(11,"STATUS"),t(),e(12,"span",7),i(13,"TIME"),t()()(),e(14,"div",8),p(15,it,15,8,"div",9)(16,nt,2,0,"div",10),t()()),n&2&&(d(15),s("ngForOf",o.items),d(),s("ngIf",o.items.length===0))},dependencies:[w,I,A,E,_,S],encapsulation:2})};var ie=class r{metrics={status:"down",latency:0,uptime:0,activeAgents:0,totalDecisions:0};formatNumber(l){return l>=1e3?(l/1e3).toFixed(1)+"k":l.toString()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-agent-health-panel"]],inputs:{metrics:"metrics"},decls:51,vars:4,consts:[[1,"bg-white","rounded-xl","border","border-slate-200","overflow-hidden","shadow-sm","mt-8"],[1,"bg-slate-50","px-6","py-3","border-b","border-slate-200","flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],["name","activity",1,"w-4","h-4","text-slate-500"],[1,"text-xs","font-bold","uppercase","tracking-wider","text-slate-600"],[1,"flex","items-center","gap-2","text-xs"],[1,"flex","items-center","gap-1.5","px-2","py-0.5","rounded-full","bg-green-100","text-green-700","font-medium"],[1,"w-1.5","h-1.5","bg-green-500","rounded-full","animate-pulse"],[1,"text-slate-400"],[1,"grid","grid-cols-2","md:grid-cols-4","divide-x","divide-slate-100"],[1,"p-4","flex","items-center","gap-4"],[1,"w-10","h-10","rounded-full","bg-blue-50","text-blue-600","flex","items-center","justify-center"],["name","zap",1,"w-5","h-5"],[1,"text-2xl","font-mono","font-bold","text-slate-900"],[1,"text-sm","font-sans","text-slate-500","font-normal","ml-1"],[1,"text-xs","text-slate-500","font-medium","uppercase"],[1,"w-10","h-10","rounded-full","bg-green-50","text-green-600","flex","items-center","justify-center"],["name","server",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-purple-50","text-purple-600","flex","items-center","justify-center"],["name","bot",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-amber-50","text-amber-600","flex","items-center","justify-center"],["name","cpu",1,"w-5","h-5"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),a(3,"lucide-icon",3),e(4,"h3",4),i(5,"System Health & Performance"),t()(),e(6,"div",5)(7,"span",6),a(8,"span",7),i(9," Systems Operational "),t(),e(10,"span",8),i(11,"Last updated: Just now"),t()()(),e(12,"div",9)(13,"div",10)(14,"div",11),a(15,"lucide-icon",12),t(),e(16,"div")(17,"p",13),i(18),e(19,"span",14),i(20,"ms"),t()(),e(21,"p",15),i(22,"API Latency"),t()()(),e(23,"div",10)(24,"div",16),a(25,"lucide-icon",17),t(),e(26,"div")(27,"p",13),i(28),e(29,"span",14),i(30,"%"),t()(),e(31,"p",15),i(32,"Uptime (24h)"),t()()(),e(33,"div",10)(34,"div",18),a(35,"lucide-icon",19),t(),e(36,"div")(37,"p",13),i(38),e(39,"span",14),i(40,"/ 9"),t()(),e(41,"p",15),i(42,"Active Agents"),t()()(),e(43,"div",10)(44,"div",20),a(45,"lucide-icon",21),t(),e(46,"div")(47,"p",13),i(48),t(),e(49,"p",15),i(50,"Daily Decisions"),t()()()()()),n&2&&(d(18),b(o.metrics.latency),d(10),b(o.metrics.uptime),d(10),b(o.metrics.activeAgents),d(10),b(o.formatNumber(o.metrics.totalDecisions)))},dependencies:[w,_,S],encapsulation:2})};var rt=()=>[];function at(r,l){if(r&1){let n=v();e(0,"app-capability-card",145),u("expand",function(){let m=x(n).$implicit,g=c();return f(g.onCardExpand(m.id))})("action",function(){let m=x(n).$implicit,g=c();return f(g.onCapabilityAction(m.id))}),t()}if(r&2){let n=l.$implicit,o=c();s("capability",n)("isExpanded",o.expandedCardId===n.id)}}var ne=class r{navigateToCreate=new C;navigateToDraft=new C;difyService=V(Z);capabilities$=this.difyService.getCapabilities();workItems$=this.difyService.getActiveWorkItems();healthMetrics$=this.difyService.getAgentHealth();expandedCardId=null;emptyMetrics={status:"down",latency:0,uptime:0,activeAgents:0,totalDecisions:0};constructor(){}ngOnInit(){}onCreateNew(){this.navigateToCreate.emit()}onContinueDraft(){this.navigateToDraft.emit()}onCardExpand(l){this.expandedCardId===l?this.expandedCardId=null:this.expandedCardId=l}onCapabilityAction(l){console.log("[DifyAgentService] Triggering capability:",l),l==="create_npa"&&this.onCreateNew()}onViewAll(l){console.log("Viewing all for section:",l)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-npa-dashboard"]],outputs:{navigateToCreate:"navigateToCreate",navigateToDraft:"navigateToDraft"},decls:434,vars:10,consts:[[1,"min-h-screen","bg-slate-50/50","pb-20","font-sans"],[1,"bg-white","border-b","border-gray-200","pt-8","pb-10","px-6","sm:px-10","shadow-sm","relative","overflow-hidden"],[1,"absolute","top-0","right-0","w-96","h-96","bg-blue-50","rounded-full","blur-3xl","opacity-50","-translate-y-1/2","translate-x-1/3","pointer-events-none"],[1,"max-w-7xl","mx-auto","flex","flex-col","md:flex-row","items-center","justify-between","gap-8","relative","z-10"],[1,"flex","items-start","gap-6"],[1,"relative","group","cursor-pointer"],[1,"w-20","h-20","rounded-2xl","bg-gradient-to-br","from-indigo-600","to-blue-600","flex","items-center","justify-center","shadow-lg","shadow-blue-200","ring-4","ring-white"],["name","bot",1,"w-10","h-10","text-white"],[1,"absolute","-bottom-1","-right-1","w-6","h-6","bg-white","rounded-full","flex","items-center","justify-center"],[1,"w-4","h-4","bg-green-500","rounded-full","ring-2","ring-white","animate-pulse"],[1,"space-y-3"],[1,"text-3xl","font-bold","text-slate-900","tracking-tight","flex","items-center","gap-3"],[1,"px-2.5","py-0.5","rounded-full","bg-blue-50","text-blue-700","text-xs","font-bold","border","border-blue-100","uppercase","tracking-wide"],[1,"text-lg","text-slate-500","max-w-2xl","leading-relaxed","mt-1"],[1,"flex","items-center","gap-6","text-sm","font-medium","text-slate-600","bg-slate-50","inline-flex","px-4","py-2","rounded-lg","border","border-slate-200/60"],[1,"flex","items-center","gap-1.5","hover:text-indigo-600","transition-colors","cursor-help"],["name","database",1,"w-4","h-4","text-indigo-500"],[1,"w-px","h-4","bg-slate-300"],[1,"flex","items-center","gap-1.5","hover:text-green-600","transition-colors","cursor-help"],["name","zap",1,"w-4","h-4","text-amber-500"],[1,"flex","items-center","gap-1.5","hover:text-purple-600","transition-colors","cursor-help"],["name","brain-circuit",1,"w-4","h-4","text-purple-500"],[1,"flex","flex-col","gap-3","w-full","md:w-auto"],[1,"group","relative","inline-flex","items-center","justify-center","gap-3","px-8","py-4","bg-slate-900","hover:bg-slate-800","text-white","rounded-xl","font-bold","text-lg","shadow-xl","shadow-slate-200","transition-all","transform","hover:-translate-y-0.5","active:translate-y-0","focus:ring-4","focus:ring-slate-100",3,"click"],["name","message-square",1,"w-6","h-6"],[1,"absolute","right-0","top-0","-mt-1","-mr-1","flex","h-3","w-3"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-sky-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-3","w-3","bg-sky-500"],[1,"grid","grid-cols-2","gap-2"],[1,"px-4","py-2","bg-white","border","border-slate-200","text-slate-600","rounded-lg","text-sm","font-semibold","hover:bg-slate-50","hover:text-slate-900","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["name","file-edit",1,"w-3.5","h-3.5"],[1,"px-4","py-2","bg-white","border","border-slate-200","text-slate-600","rounded-lg","text-sm","font-semibold","hover:bg-slate-50","hover:text-slate-900","transition-colors","flex","items-center","justify-center","gap-2"],["name","search",1,"w-3.5","h-3.5"],[1,"max-w-7xl","mx-auto","px-6","sm:px-10","space-y-12","mt-12"],[3,"metrics"],[1,"flex","items-center","gap-3","mb-6"],[1,"p-2","bg-blue-100","text-blue-700","rounded-lg"],["name","target",1,"w-5","h-5"],[1,"text-sm","font-bold","text-slate-700","uppercase","tracking-widest"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-5"],[3,"capability","isExpanded","expand","action",4,"ngFor","ngForOf"],[1,"p-2","bg-indigo-100","text-indigo-700","rounded-lg"],["name","bot",1,"w-5","h-5"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","p-4","border","border-slate-200","shadow-sm","flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-indigo-50","text-indigo-600","flex","items-center","justify-center","border","border-indigo-100"],["name","lightbulb",1,"w-5","h-5"],[1,"font-bold","text-sm","text-slate-700"],[1,"text-[10px]","text-slate-500","uppercase","tracking-wide","font-semibold","text-green-600"],[1,"w-10","h-10","rounded-full","bg-purple-50","text-purple-600","flex","items-center","justify-center","border","border-purple-100"],["name","git-branch",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-blue-50","text-blue-600","flex","items-center","justify-center","border","border-blue-100"],["name","file-edit",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-amber-50","text-amber-600","flex","items-center","justify-center","border","border-amber-100"],["name","trending-up",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-fuchsia-50","text-fuchsia-600","flex","items-center","justify-center","border","border-fuchsia-100"],["name","search",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-cyan-50","text-cyan-600","flex","items-center","justify-center","border","border-cyan-100"],["name","message-square",1,"w-5","h-5"],[1,"w-10","h-10","rounded-full","bg-slate-50","text-slate-600","flex","items-center","justify-center","border","border-slate-100"],["name","workflow",1,"w-5","h-5"],[1,"text-[10px]","text-slate-500","uppercase","tracking-wide","font-semibold","text-green-600","animate-pulse"],[1,"w-10","h-10","rounded-full","bg-red-50","text-red-600","flex","items-center","justify-center","border","border-red-100"],["name","shield-alert",1,"w-5","h-5"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","gap-3"],[1,"p-2","bg-slate-200","text-slate-700","rounded-lg"],["name","layers",1,"w-5","h-5"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-3"],[1,"bg-slate-50","border","border-slate-200","rounded-lg","p-3","hover:bg-white","hover:border-slate-300","transition-colors","group"],[1,"flex","items-center","justify-between","mb-2"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-indigo-600"],["name","brain-circuit",1,"w-3.5","h-3.5"],[1,"w-2","h-2","rounded-full","bg-green-500","shadow-sm","shadow-green-200"],[1,"font-bold","text-xs","text-slate-700"],[1,"mt-2","space-y-1"],[1,"flex","justify-between","text-[10px]","text-slate-500"],[1,"font-mono","text-slate-900"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-blue-600"],["name","scan-search",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-slate-600"],["name","workflow",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-amber-600"],["name","link-2",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-red-600"],["name","shield-check",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-pink-600"],["name","bell",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-sky-600"],["name","bar-chart-2",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-lime-600"],["name","refresh-cw",1,"w-3.5","h-3.5"],[1,"p-1","rounded","bg-white","border","border-slate-200","shadow-sm","text-violet-600"],["name","server",1,"w-3.5","h-3.5"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","items-stretch"],[1,"h-full","flex","flex-col"],[1,"p-2","bg-purple-100","text-purple-700","rounded-lg"],["name","book-open",1,"w-5","h-5"],[1,"text-xs","font-bold","text-purple-600","bg-purple-50","border","border-purple-100","px-3","py-1.5","rounded-lg","hover:bg-purple-100","transition-colors","flex","items-center","gap-1.5",3,"click"],["name","plus",1,"w-3","h-3"],[1,"bg-white","border","border-slate-200","rounded-xl","overflow-hidden","shadow-sm","flex-1","flex","flex-col"],[1,"divide-y","divide-slate-100"],[1,"p-4","flex","items-center","justify-between","hover:bg-slate-50","transition-colors","cursor-pointer","group"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10","rounded-lg","bg-indigo-50","text-indigo-600","flex","items-center","justify-center","border","border-indigo-100"],["name","database",1,"w-5","h-5"],[1,"text-sm","font-bold","text-slate-900","group-hover:text-indigo-600"],[1,"text-xs","text-slate-500"],[1,"px-2","py-0.5","rounded","text-[10px]","font-bold","bg-green-100","text-green-700"],["name","chevron-right",1,"w-4","h-4","text-slate-300","group-hover:text-indigo-400"],[1,"w-10","h-10","rounded-lg","bg-orange-50","text-orange-600","flex","items-center","justify-center","border","border-orange-100"],["name","file-text",1,"w-5","h-5"],[1,"text-sm","font-bold","text-slate-900","group-hover:text-orange-600"],["name","chevron-right",1,"w-4","h-4","text-slate-300","group-hover:text-orange-400"],[1,"w-10","h-10","rounded-lg","bg-cyan-50","text-cyan-600","flex","items-center","justify-center","border","border-cyan-100"],["name","layout",1,"w-5","h-5"],[1,"text-sm","font-bold","text-slate-900","group-hover:text-cyan-600"],["name","chevron-right",1,"w-4","h-4","text-slate-300","group-hover:text-cyan-400"],[1,"w-10","h-10","rounded-lg","bg-emerald-50","text-emerald-600","flex","items-center","justify-center","border","border-emerald-100"],["name","tag",1,"w-5","h-5"],[1,"text-sm","font-bold","text-slate-900","group-hover:text-emerald-600"],["name","chevron-right",1,"w-4","h-4","text-slate-300","group-hover:text-emerald-400"],[1,"bg-slate-50","px-4","py-2","border-t","border-slate-200","text-center","mt-auto"],[1,"text-xs","font-semibold","text-slate-500","hover:text-slate-800","flex","items-center","justify-center","gap-1","w-full",3,"click"],["name","arrow-right",1,"w-3","h-3"],[1,"p-2","bg-amber-100","text-amber-700","rounded-lg"],[1,"text-xs","font-bold","text-amber-600","bg-amber-50","border","border-amber-100","px-3","py-1.5","rounded-lg","hover:bg-amber-100","transition-colors","flex","items-center","gap-1.5",3,"click"],[1,"p-4","space-y-4","flex-1"],[1,"flex","items-center","justify-between"],[1,"w-8","h-8","rounded","bg-slate-100","flex","items-center","justify-center","text-slate-600"],["name","activity",1,"w-4","h-4"],[1,"text-sm","font-bold","text-slate-900"],[1,"text-[10px]","text-slate-500"],[1,"w-2.5","h-2.5","rounded-full","bg-green-500","animate-pulse"],[1,"w-full","h-px","bg-slate-100"],["name","shield",1,"w-4","h-4"],[1,"w-2.5","h-2.5","rounded-full","bg-green-500"],["name","share-2",1,"w-4","h-4"],[1,"w-2.5","h-2.5","rounded-full","bg-yellow-400","animate-pulse"],[1,"flex","items-center","justify-between","opacity-60"],["name","send",1,"w-4","h-4"],[1,"w-2.5","h-2.5","rounded-full","bg-slate-300"],[1,"p-2","bg-sky-100","text-sky-700","rounded-lg"],["name","cpu",1,"w-5","h-5"],[3,"items"],[3,"expand","action","capability","isExpanded"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1),a(2,"div",2),e(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),a(7,"lucide-icon",7),t(),e(8,"div",8),a(9,"div",9),t()(),e(10,"div",10)(11,"div")(12,"h1",11),i(13," NPA Agent "),e(14,"span",12),i(15,"v2.1 Online"),t()(),e(16,"p",13),i(17," Your AI assistant for New Product Approvals. I can create NPAs, predict outcomes, validate docs, and orchestrate approvals associated with Dify Agents. "),t()(),e(18,"div",14)(19,"span",15),a(20,"lucide-icon",16),i(21," 1,784 NPAs Learned "),t(),a(22,"div",17),e(23,"span",18),a(24,"lucide-icon",19),i(25," 95% Success Rate "),t(),a(26,"div",17),e(27,"span",20),a(28,"lucide-icon",21),i(29," 92% Prediction Accuracy "),t()()()(),e(30,"div",22)(31,"button",23),u("click",function(){return o.onCreateNew()}),a(32,"lucide-icon",24),i(33," Chat with Agent "),e(34,"span",25),a(35,"span",26)(36,"span",27),t()(),e(37,"div",28)(38,"button",29),u("click",function(){return o.onContinueDraft()}),a(39,"lucide-icon",30),i(40," Continue Draft "),t(),e(41,"button",31),a(42,"lucide-icon",32),i(43," Search KB "),t()()()()(),e(44,"div",33)(45,"section"),a(46,"app-agent-health-panel",34),B(47,"async"),t(),e(48,"section")(49,"div",35)(50,"div",36),a(51,"lucide-icon",37),t(),e(52,"h2",38),i(53," Agent Capabilities "),t()(),e(54,"div",39),p(55,at,1,2,"app-capability-card",40),B(56,"async"),t()(),e(57,"section")(58,"div",35)(59,"div",41),a(60,"lucide-icon",42),t(),e(61,"h2",38),i(62," NPA Task Agents (Domain Workers) "),t()(),e(63,"div",43)(64,"div",44)(65,"div",45),a(66,"lucide-icon",46),t(),e(67,"div")(68,"h4",47),i(69,"Product Ideation"),t(),e(70,"p",48),i(71,"Idle"),t()()(),e(72,"div",44)(73,"div",49),a(74,"lucide-icon",50),t(),e(75,"div")(76,"h4",47),i(77,"Class. Router"),t(),e(78,"p",48),i(79,"Active"),t()()(),e(80,"div",44)(81,"div",51),a(82,"lucide-icon",52),t(),e(83,"div")(84,"h4",47),i(85,"Template Auto-Fill"),t(),e(86,"p",48),i(87,"Idle"),t()()(),e(88,"div",44)(89,"div",53),a(90,"lucide-icon",54),t(),e(91,"div")(92,"h4",47),i(93,"ML Prediction"),t(),e(94,"p",48),i(95,"Idle"),t()()(),e(96,"div",44)(97,"div",55),a(98,"lucide-icon",56),t(),e(99,"div")(100,"h4",47),i(101,"KB Search"),t(),e(102,"p",48),i(103,"Idle"),t()()(),e(104,"div",44)(105,"div",57),a(106,"lucide-icon",58),t(),e(107,"div")(108,"h4",47),i(109,"Conv. Diligence"),t(),e(110,"p",48),i(111,"Idle"),t()()(),e(112,"div",44)(113,"div",59),a(114,"lucide-icon",60),t(),e(115,"div")(116,"h4",47),i(117,"Appr. Orchestrator"),t(),e(118,"p",61),i(119,"Orchestrating"),t()()(),e(120,"div",44)(121,"div",62),a(122,"lucide-icon",63),t(),e(123,"div")(124,"h4",47),i(125,"Prohibited List"),t(),e(126,"p",48),i(127,"Idle"),t()()()()(),e(128,"section")(129,"div",64)(130,"div",65)(131,"div",66),a(132,"lucide-icon",67),t(),e(133,"h2",38),i(134," Shared Utility Agents "),t()()(),e(135,"div",68)(136,"div",69)(137,"div",70)(138,"span",71),a(139,"lucide-icon",72),t(),a(140,"div",73),t(),e(141,"h4",74),i(142,"RAG Engine"),t(),e(143,"div",75)(144,"div",76)(145,"span"),i(146,"Queries"),t(),e(147,"span",77),i(148,"234"),t()(),e(149,"div",76)(150,"span"),i(151,"Hit Rate"),t(),e(152,"span",77),i(153,"94%"),t()()()(),e(154,"div",69)(155,"div",70)(156,"span",78),a(157,"lucide-icon",79),t(),a(158,"div",73),t(),e(159,"h4",74),i(160,"Doc Processing"),t(),e(161,"div",75)(162,"div",76)(163,"span"),i(164,"Parsed"),t(),e(165,"span",77),i(166,"89"),t()(),e(167,"div",76)(168,"span"),i(169,"Speed"),t(),e(170,"span",77),i(171,"8s"),t()()()(),e(172,"div",69)(173,"div",70)(174,"span",80),a(175,"lucide-icon",81),t(),a(176,"div",73),t(),e(177,"h4",74),i(178,"State Manager"),t(),e(179,"div",75)(180,"div",76)(181,"span"),i(182,"Active"),t(),e(183,"span",77),i(184,"23"),t()(),e(185,"div",76)(186,"span"),i(187,"Loops"),t(),e(188,"span",77),i(189,"2"),t()()()(),e(190,"div",69)(191,"div",70)(192,"span",82),a(193,"lucide-icon",83),t(),a(194,"div",73),t(),e(195,"h4",74),i(196,"Integration"),t(),e(197,"div",75)(198,"div",76)(199,"span"),i(200,"Calls"),t(),e(201,"span",77),i(202,"456"),t()(),e(203,"div",76)(204,"span"),i(205,"Latency"),t(),e(206,"span",77),i(207,"320ms"),t()()()(),e(208,"div",69)(209,"div",70)(210,"span",84),a(211,"lucide-icon",85),t(),a(212,"div",73),t(),e(213,"h4",74),i(214,"Audit Logger"),t(),e(215,"div",75)(216,"div",76)(217,"span"),i(218,"Logs"),t(),e(219,"span",77),i(220,"3.4k"),t()(),e(221,"div",76)(222,"span"),i(223,"Coverage"),t(),e(224,"span",77),i(225,"100%"),t()()()(),e(226,"div",69)(227,"div",70)(228,"span",86),a(229,"lucide-icon",87),t(),a(230,"div",73),t(),e(231,"h4",74),i(232,"Notification"),t(),e(233,"div",75)(234,"div",76)(235,"span"),i(236,"Sent"),t(),e(237,"span",77),i(238,"892"),t()(),e(239,"div",76)(240,"span"),i(241,"Open Rate"),t(),e(242,"span",77),i(243,"68%"),t()()()(),e(244,"div",69)(245,"div",70)(246,"span",88),a(247,"lucide-icon",89),t(),a(248,"div",73),t(),e(249,"h4",74),i(250,"Analytics"),t(),e(251,"div",75)(252,"div",76)(253,"span"),i(254,"Metrics"),t(),e(255,"span",77),i(256,"45"),t()(),e(257,"div",76)(258,"span"),i(259,"Real-time"),t(),e(260,"span",77),i(261,"Yes"),t()()()(),e(262,"div",69)(263,"div",70)(264,"span",90),a(265,"lucide-icon",91),t(),a(266,"div",73),t(),e(267,"h4",74),i(268,"Loop-Back"),t(),e(269,"div",75)(270,"div",76)(271,"span"),i(272,"Retries"),t(),e(273,"span",77),i(274,"12"),t()(),e(275,"div",76)(276,"span"),i(277,"Resolved"),t(),e(278,"span",77),i(279,"100%"),t()()()(),e(280,"div",69)(281,"div",70)(282,"span",92),a(283,"lucide-icon",93),t(),a(284,"div",73),t(),e(285,"h4",74),i(286,"Data Retrieval"),t(),e(287,"div",75)(288,"div",76)(289,"span"),i(290,"Sources"),t(),e(291,"span",77),i(292,"8"),t()(),e(293,"div",76)(294,"span"),i(295,"Cache"),t(),e(296,"span",77),i(297,"HIT"),t()()()()()(),e(298,"div",94)(299,"section",95)(300,"div",64)(301,"div",65)(302,"div",96),a(303,"lucide-icon",97),t(),e(304,"h2",38),i(305," Linked Knowledge Bases "),t()(),e(306,"button",98),u("click",function(){return o.onCreateNew()}),a(307,"lucide-icon",99),i(308," Add KB "),t()(),e(309,"div",100)(310,"div",101)(311,"div",102)(312,"div",103)(313,"div",104),a(314,"lucide-icon",105),t(),e(315,"div")(316,"h4",106),i(317,"Historical NPAs"),t(),e(318,"p",107),i(319,"1,784 records \u2022 Vector Embeddings \u2022 Updated 2h ago"),t()()(),e(320,"div",65)(321,"span",108),i(322,"SYNCED"),t(),a(323,"lucide-icon",109),t()(),e(324,"div",102)(325,"div",103)(326,"div",110),a(327,"lucide-icon",111),t(),e(328,"div")(329,"h4",112),i(330,"Policy Documents"),t(),e(331,"p",107),i(332,"MAS 656, DBS Risk Framework \u2022 200+ Docs"),t()()(),e(333,"div",65)(334,"span",108),i(335,"SYNCED"),t(),a(336,"lucide-icon",113),t()(),e(337,"div",102)(338,"div",103)(339,"div",114),a(340,"lucide-icon",115),t(),e(341,"div")(342,"h4",116),i(343,"Templates Library"),t(),e(344,"p",107),i(345,"15 Forms \u2022 Auto-fill ready (47 fields)"),t()()(),e(346,"div",65)(347,"span",108),i(348,"SYNCED"),t(),a(349,"lucide-icon",117),t()(),e(350,"div",102)(351,"div",103)(352,"div",118),a(353,"lucide-icon",119),t(),e(354,"div")(355,"h4",120),i(356,"Product Classifications"),t(),e(357,"p",107),i(358,"Taxonomy, Asset Classes \u2022 Updated Today"),t()()(),e(359,"div",65)(360,"span",108),i(361,"SYNCED"),t(),a(362,"lucide-icon",121),t()()(),e(363,"div",122)(364,"button",123),u("click",function(){return o.onViewAll("kb")}),i(365," View All Knowledge Sources "),a(366,"lucide-icon",124),t()()()(),e(367,"section",95)(368,"div",64)(369,"div",65)(370,"div",125),a(371,"lucide-icon",105),t(),e(372,"h2",38),i(373," Connected Services "),t()(),e(374,"button",126),u("click",function(){return o.onCreateNew()}),a(375,"lucide-icon",99),i(376," Add Service "),t()(),e(377,"div",100)(378,"div",127)(379,"div",128)(380,"div",65)(381,"div",129),a(382,"lucide-icon",130),t(),e(383,"div")(384,"p",131),i(385,"Bloomberg API"),t(),e(386,"p",132),i(387,"Market Data \u2022 14ms"),t()()(),a(388,"div",133),t(),a(389,"div",134),e(390,"div",128)(391,"div",65)(392,"div",129),a(393,"lucide-icon",135),t(),e(394,"div")(395,"p",131),i(396,"Policy Engine"),t(),e(397,"p",132),i(398,"Regulatory \u2022 Online"),t()()(),a(399,"div",136),t(),a(400,"div",134),e(401,"div",128)(402,"div",65)(403,"div",129),a(404,"lucide-icon",137),t(),e(405,"div")(406,"p",131),i(407,"SharePoint"),t(),e(408,"p",132),i(409,"Docs \u2022 Syncing..."),t()()(),a(410,"div",138),t(),a(411,"div",134),e(412,"div",139)(413,"div",65)(414,"div",129),a(415,"lucide-icon",140),t(),e(416,"div")(417,"p",131),i(418,"SendGrid"),t(),e(419,"p",132),i(420,"Email \u2022 Idle"),t()()(),a(421,"div",141),t()(),e(422,"div",122)(423,"button",123),u("click",function(){return o.onViewAll("services")}),i(424," View All Connected Services "),a(425,"lucide-icon",124),t()()()()(),e(426,"section")(427,"div",35)(428,"div",142),a(429,"lucide-icon",143),t(),e(430,"h2",38),i(431," Active Agent Work Items "),t()(),a(432,"app-work-item-list",144),B(433,"async"),t()()()),n&2&&(d(46),s("metrics",z(47,3,o.healthMetrics$)||o.emptyMetrics),d(9),s("ngForOf",z(56,5,o.capabilities$)),d(377),s("items",z(433,7,o.workItems$)||ge(9,rt)))},dependencies:[w,A,_,S,_e,ee,te,ie,he],styles:["[_nghost-%COMP%]{display:block}"]})};var Ie=[{id:"spec",title:"1. Product & Business Case",description:"Core details defining the product structure and economics.",fields:[{key:"name",label:"Product Name",value:"FX Put Option GBP/USD",lineage:"AUTO",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Product Name: FX Put Option EUR/USD",confidenceScore:98}},{key:"type",label:"Product Type",value:"FX Option",lineage:"AUTO",type:"select",options:["FX Forward","FX Option","FX Swap","IRS","CDS"],lineageMetadata:{sourceDocId:"Classification Agent",sourceSnippet:'Classified as FX Option based on "Put Option" keyword.',confidenceScore:99}},{key:"desk",label:"Booking Desk",value:"Singapore FX",lineage:"AUTO"},{key:"bu",label:"Business Unit",value:"Treasury & Markets",lineage:"AUTO",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Business Unit: Treasury & Markets",confidenceScore:100}},{key:"notional",label:"Notional Amount",value:"$75,000,000",lineage:"AUTO",lineageMetadata:{sourceDocId:"Term Sheet",sourceSnippet:"Notional: USD 75M",confidenceScore:100}},{key:"tenor",label:"Tenor",value:"6 Months",lineage:"AUTO"},{key:"counterparty",label:"Counterparty Name",value:"",lineage:"MANUAL",placeholder:"Enter Legal Entity Name",required:!0,lineageMetadata:{agentTip:"I can search Salesforce for recent counterparties in Hong Kong."}},{key:"tradeDate",label:"Trade Date",value:"",lineage:"MANUAL",type:"date",required:!0},{key:"rationale",label:"Business Rationale",value:"ABC Corporation requests GBP/USD put option to hedge GBP receivables. Estimated revenue: $150K.",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Client requests EUR/USD put option to hedge EUR receivables.",adaptationLogic:"Adapted currency pair and client context based on chat input.",confidenceScore:85}},{key:"pac_approval",label:"PAC Approval Ref",value:"N/A (Variation)",lineage:"AUTO",lineageMetadata:{sourceDocId:"Classification Rules",sourceSnippet:"Product Type: Variation -> No PAC Approval Required",confidenceScore:100}}]},{id:"ops",title:"2. Operational & Technology",description:"Systems and processes for booking, valuation, and settlement.",fields:[{key:"system",label:"Booking System",value:"Murex",lineage:"AUTO",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Booking System: Murex (Version 3.1)",confidenceScore:95}},{key:"valuation",label:"Valuation Model",value:"Black-Scholes",lineage:"AUTO",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Valuation: Black-Scholes Standard Model",confidenceScore:95}},{key:"settlement",label:"Settlement Method",value:"Cash (USD) via CLS",lineage:"AUTO"},{key:"conf",label:"Confirmation Process",value:"SWIFT MT300",lineage:"AUTO"},{key:"reconciliation",label:"Reconciliation Process",value:"Daily reconciliation between Murex (front office) and SAP (back office). Ops team validates trade details.",lineage:"AUTO",type:"textarea"},{key:"tech_reqs",label:"Technology Requirements",value:"None identified. Standard product code exists in Murex.",lineage:"AUTO",type:"textarea"}]},{id:"pricing",title:"3. Pricing Model",description:"Methodology for fair value and risk sensitivity.",fields:[{key:"method",label:"Pricing Methodology",value:"Mid-market + bid-offer spread",lineage:"AUTO"},{key:"roae",label:"ROAE Sensitivity Analysis",value:"Sensitivity: 10bps move = $85k impact...",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"Finance Policy 2024",sourceSnippet:"Deals > $50M Notional require ROAE sensitivity.",adaptationLogic:"Triggered by Rule: Notional > $50M. Template inserted for user completion.",confidenceScore:90}},{key:"pricing_assumptions",label:"Pricing Assumptions",value:"Vol: 9.2%, IR: SOFR, Spread: 15bps",lineage:"AUTO",type:"textarea",lineageMetadata:{sourceDocId:"Market Data Agent",sourceSnippet:"Current 6M GBPUSD implied vol is 9.2%.",confidenceScore:95}},{key:"bespoke",label:"Bespoke Adjustments",value:"",lineage:"MANUAL",type:"textarea",placeholder:"Describe any non-standard pricing logic..."}]},{id:"risk",title:"4. Risk Assessments",description:"Evaluation of market, credit, listing, and operational risks.",fields:[{key:"market",label:"Market Risk (VaR)",value:"Moderate-to-High. Daily VaR estimated at $360k (99% confidence).",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"TSG1917",sourceSnippet:"Daily VaR: $180k (based on $25M Notional).",adaptationLogic:"Scaled VaR linearly from $25M -> $75M.",confidenceScore:85}},{key:"credit",label:"Credit Risk",value:"Counterparty rated A- (S&P). Weekly collateral exchange required per CSA.",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"Credit Matrix",sourceSnippet:"Rating: BBB+ requires Daily collateral.",adaptationLogic:"Adjusted collateral frequency to Weekly based on improved Rating (A-).",confidenceScore:92}},{key:"ops_risk",label:"Operational Risk",value:"Moderate. Cross-border booking (SG-HK) requires manual month-end reconciliation.",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"Ops Policy: Branch",sourceSnippet:"Single entity booking: Low Risk.",adaptationLogic:"Inserted Cross-Border Clause due to SG Desk + HK Counterparty.",confidenceScore:95}},{key:"liquidity",label:"Liquidity Risk",value:"Liquid. GBP/USD is a major pair with deep liquidity.",lineage:"AUTO",type:"textarea"},{key:"reputational",label:"Reputational Risk",value:"Low. Standard corporate hedging activity.",lineage:"AUTO",type:"textarea"}]},{id:"data",title:"5. Data Management",description:"Data fields, quality standards, and reporting.",fields:[{key:"data_fields",label:"Required Data Fields",value:"Trade ID, Notional, Currency Pair, Strike, Expiry, Counterparty LEI",lineage:"AUTO",type:"textarea"},{key:"data_quality",label:"Data Quality Standards",value:"Adheres to PURE principles. Automated validation in Murex.",lineage:"AUTO",type:"textarea"},{key:"reporting_reqs",label:"Reporting Requirements",value:"MAS 610 (Daily), Internal Risk Reports (Daily)",lineage:"AUTO",type:"textarea"}]},{id:"reg",title:"6. Regulatory Requirements",description:"Compliance with local and international regulations.",fields:[{key:"mas656",label:"Applicable Regulations",value:"MAS 656, CFTC Part 20, EMIR",lineage:"AUTO"},{key:"reporting",label:"Reporting Obligations",value:"DTCC SDR Reporting required within T+1",lineage:"AUTO"},{key:"kyc",label:"KYC Status",value:"Completed (2024-03-15). Risk Rating: Low.",lineage:"AUTO",lineageMetadata:{sourceDocId:"C720 CRM",sourceSnippet:"KYC Valid until 2027-03-15",confidenceScore:100}},{key:"sanctions",label:"Sanctions Screening",value:"PASS. No matches found.",lineage:"AUTO",lineageMetadata:{sourceDocId:"Prohibited List Checker",sourceSnippet:"Screened against OFAC, UN, MAS Lists.",confidenceScore:100}}]},{id:"appendix",title:"7. Appendices (Entity & IP)",description:"Booking entity, cross-border details, and IP check.",fields:[{key:"booking_entity",label:"Booking Entity",value:"DBS Bank Ltd (Singapore)",lineage:"AUTO",type:"select",options:["DBS Bank Ltd (Singapore)","DBS Bank (Hong Kong) Limited"]},{key:"cross_border",label:"Cross-Border Transaction?",value:"YES",lineage:"AUTO"},{key:"jurisdictions",label:"Jurisdictions Involved",value:"Singapore (MAS), Hong Kong (HKMA)",lineage:"AUTO"},{key:"ip_check",label:"Proprietary Models?",value:"NO (Standard Black-Scholes)",lineage:"AUTO"},{key:"third_party_ip",label:"Third-Party IP",value:"Bloomberg Terminal (Market Data)",lineage:"AUTO"}]},{id:"signoff",title:"8. Sign-Off Matrix",description:"Required approvers based on product classification.",fields:[{key:"parties",label:"Required Sign-Offs",value:"RMG-Credit, Finance (Product Control), Finance VP, Market Risk, Ops, Technology",lineage:"ADAPTED",type:"textarea",lineageMetadata:{sourceDocId:"Classification Agent",sourceSnippet:"Standard Sign-offs: Credit, Finance, MLR.",adaptationLogic:'Added "Finance VP" (Notional > $50M) and "Ops/Tech" (Cross-Border Rule).',confidenceScore:100}},{key:"timeline",label:"Est. Approval Timeline",value:"4-5 Days",lineage:"AUTO",tooltip:"Predicted by ML Agent"}]},{id:"legal",title:"9. Legal Considerations",fields:[{key:"law",label:"Governing Law",value:"Singapore Law",lineage:"AUTO"},{key:"docs",label:"Documentation",value:"ISDA Master Agreement (2002)",lineage:"AUTO"},{key:"special",label:"Special Provisions",value:"",lineage:"MANUAL",type:"textarea"}]},{id:"attachments",title:"10. Supporting Documents",description:"Attach any relevant files, term sheets, or email approvals.",fields:[{key:"termSheet",label:"Final Term Sheet",value:"",lineage:"MANUAL",type:"file",required:!0,tooltip:"Required for approval."},{key:"riskMemo",label:"Risk Memo",value:"",lineage:"MANUAL",type:"file"}]}];function ot(r,l){if(r&1){let n=v();e(0,"a",28),u("click",function(){let m=x(n).$implicit,g=c();return f(g.scrollToSection(m.id))}),a(1,"span",29),i(2),t()}if(r&2){let n=l.$implicit,o=c();D("bg-blue-50",o.activeSection===n.id)("text-blue-700",o.activeSection===n.id),d(),D("bg-blue-600",o.activeSection===n.id),d(),h(" ",n.title," ")}}function lt(r,l){if(r&1&&(e(0,"p",45),i(1),t()),r&2){let n=c().$implicit;d(),b(n.description)}}function dt(r,l){r&1&&(e(0,"span",60),i(1,"*"),t())}function st(r,l){if(r&1&&(e(0,"div",61)(1,"div",62),a(2,"lucide-icon",63),t(),e(3,"div")(4,"p",64),i(5),t(),e(6,"p",65),i(7,"Drag or click to browse"),t()()()),r&2){let n=c().$implicit,o=c(2);D("ring-2",(o.focusedField==null?null:o.focusedField.key)===n.key)("ring-blue-500",(o.focusedField==null?null:o.focusedField.key)===n.key),d(5),h("Upload ",n.label)}}function mt(r,l){if(r&1&&(e(0,"option",69),i(1),t()),r&2){let n=l.$implicit;s("value",n),d(),b(n)}}function ct(r,l){if(r&1){let n=v();e(0,"select",66),R("ngModelChange",function(m){x(n);let g=c().$implicit;return P(g.value,m)||(g.value=m),f(m)}),e(1,"option",67),i(2),t(),p(3,mt,2,2,"option",68),t()}if(r&2){let n=c().$implicit,o=c(2);N("ngModel",n.value),s("ngClass",o.getInputStyles(n.lineage,(o.focusedField==null?null:o.focusedField.key)===n.key)),d(2),b(n.placeholder||"Select an option"),d(),s("ngForOf",n.options)}}function pt(r,l){if(r&1){let n=v();e(0,"input",70),R("ngModelChange",function(m){x(n);let g=c().$implicit;return P(g.value,m)||(g.value=m),f(m)}),t()}if(r&2){let n=c().$implicit,o=c(2);N("ngModel",n.value),s("type",n.type||"text")("placeholder",n.placeholder||"")("ngClass",o.getInputStyles(n.lineage,(o.focusedField==null?null:o.focusedField.key)===n.key))}}function ut(r,l){if(r&1){let n=v();e(0,"textarea",71),R("ngModelChange",function(m){x(n);let g=c().$implicit;return P(g.value,m)||(g.value=m),f(m)}),t()}if(r&2){let n=c().$implicit,o=c(2);N("ngModel",n.value),s("placeholder",n.placeholder||"")("ngClass",o.getInputStyles(n.lineage,(o.focusedField==null?null:o.focusedField.key)===n.key))}}function gt(r,l){r&1&&a(0,"lucide-icon",72)}function xt(r,l){r&1&&a(0,"lucide-icon",73)}function ft(r,l){r&1&&a(0,"lucide-icon",74)}function bt(r,l){if(r&1){let n=v();e(0,"div",46)(1,"div",47)(2,"label",48),i(3),p(4,dt,2,0,"span",49),t()(),e(5,"div",50),u("click",function(){let m=x(n).$implicit,g=c(2);return f(g.onFieldFocus(m))}),p(6,st,8,5,"div",51)(7,ct,4,4,"select",52)(8,pt,1,4,"input",53)(9,ut,1,3,"textarea",54),e(10,"div",55),le(11,56),p(12,gt,1,0,"lucide-icon",57)(13,xt,1,0,"lucide-icon",58)(14,ft,1,0,"lucide-icon",59),de(),t()()()}if(r&2){let n=l.$implicit;D("md:col-span-2",n.type==="textarea"),d(3),h(" ",n.label," "),d(),s("ngIf",n.required),d(2),s("ngIf",n.type==="file"),d(),s("ngIf",n.type==="select"),d(),s("ngIf",n.type!=="textarea"&&n.type!=="file"&&n.type!=="select"),d(),s("ngIf",n.type==="textarea"),d(2),s("ngSwitch",n.lineage),d(),s("ngSwitchCase","AUTO"),d(),s("ngSwitchCase","ADAPTED"),d(),s("ngSwitchCase","MANUAL")}}function vt(r,l){r&1&&(e(0,"button",75),i(1,"Post"),t())}function ht(r,l){if(r&1){let n=v();e(0,"div",30)(1,"div",31)(2,"div")(3,"h3",32),i(4),t(),p(5,lt,2,1,"p",33),t()(),e(6,"div",34),p(7,bt,15,12,"div",35),t(),e(8,"div",36)(9,"button",37),a(10,"lucide-icon",38),e(11,"span",39),i(12,"Attach"),t()(),a(13,"div",40),e(14,"div",41)(15,"div",42),i(16,"JD"),t(),e(17,"input",43),R("ngModelChange",function(m){let g=x(n).$implicit;return P(g.comments,m)||(g.comments=m),f(m)}),t(),p(18,vt,2,0,"button",44),t()()()}if(r&2){let n=l.$implicit;s("id","sec-"+n.id),d(4),b(n.title),d(),s("ngIf",n.description),d(2),s("ngForOf",n.fields),d(10),N("ngModel",n.comments),d(),s("ngIf",n.comments)}}function yt(r,l){if(r&1&&(e(0,"span",89),i(1),t()),r&2){let n=c(2);d(),h(" ",n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.confidenceScore,"% Confidence ")}}function wt(r,l){if(r&1&&(e(0,"div",95)(1,"div",96),a(2,"lucide-icon",97),e(3,"div")(4,"p",98),i(5,"Adaptation Logic"),t(),e(6,"p",99),i(7),t()()()()),r&2){let n=c(3);d(7),b(n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.adaptationLogic)}}function _t(r,l){if(r&1&&(e(0,"div")(1,"p",100),i(2),t(),e(3,"div",101),i(4),e(5,"div",102),a(6,"lucide-icon",103),t()()()),r&2){let n=c(3);d(2),h("Original Source (",n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.sourceDocId,")"),d(2),h(' "',n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.sourceSnippet,'" ')}}function St(r,l){if(r&1&&(e(0,"div",90),p(1,wt,8,1,"div",91)(2,_t,7,2,"div",27),e(3,"div",92)(4,"button",93),a(5,"lucide-icon",94),i(6," View Full Source Doc "),t()()()),r&2){let n=c(2);d(),s("ngIf",n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.adaptationLogic),d(),s("ngIf",n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.sourceSnippet)}}function Ct(r,l){if(r&1&&(e(0,"div",104)(1,"div",105)(2,"div",106),a(3,"lucide-icon",107),t(),e(4,"h4",108),i(5,"Need help writing this?"),t(),e(6,"p",109),i(7),t(),e(8,"button",110),i(9," Ask Agent to Draft "),t()()()),r&2){let n=c(2);d(7),b((n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.agentTip)||"I can search KB for similar clauses.")}}function Et(r,l){if(r&1){let n=v();le(0),e(1,"div",76)(2,"h3",77),a(3,"lucide-icon",78),i(4," Source Inspector "),t(),e(5,"button",79),u("click",function(){x(n);let m=c();return f(m.focusedField=null)}),a(6,"lucide-icon",80),t()(),e(7,"div",81)(8,"div",82)(9,"p",83),i(10,"Field Name"),t(),e(11,"h2",32),i(12),t(),e(13,"div",84)(14,"span",85),i(15),t(),p(16,yt,2,1,"span",86),t()(),p(17,St,7,2,"div",87)(18,Ct,10,1,"div",88),t(),de()}if(r&2){let n=c();d(12),b(n.focusedField.label),d(2),D("bg-green-100",n.focusedField.lineage==="AUTO")("text-green-700",n.focusedField.lineage==="AUTO")("bg-amber-100",n.focusedField.lineage==="ADAPTED")("text-amber-700",n.focusedField.lineage==="ADAPTED")("bg-red-100",n.focusedField.lineage==="MANUAL")("text-red-700",n.focusedField.lineage==="MANUAL"),d(),h(" ",n.focusedField.lineage," "),d(),s("ngIf",n.focusedField.lineageMetadata==null?null:n.focusedField.lineageMetadata.confidenceScore),d(),s("ngIf",n.focusedField.lineage!=="MANUAL"),d(),s("ngIf",n.focusedField.lineage==="MANUAL")}}var re=class r{close=new C;activeSection="spec";focusedField=null;sections=Ie;closeEditor(){this.close.emit()}scrollToSection(l){this.activeSection=l;let n=document.getElementById("sec-"+l);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}onFieldFocus(l){this.focusedField=l}onScroll(l){}autoSize(l){let n=l.target;n.style.height="auto",n.style.height=n.scrollHeight+"px"}getInputStyles(l,n){let o="bg-gray-50 border transition-all text-gray-900 ";return l==="AUTO"?o+="border-green-500 ":l==="ADAPTED"?o+="border-amber-500 ":l==="MANUAL"?o+="border-red-500 ":o+="border-gray-300 ",n?l==="AUTO"?o+="ring-2 ring-green-100 border-green-600 bg-white":l==="ADAPTED"?o+="ring-2 ring-amber-100 border-amber-600 bg-white":l==="MANUAL"?o+="ring-2 ring-red-100 border-red-600 bg-white":o+="ring-2 ring-blue-100 border-blue-500 bg-white":o+="focus:bg-white focus:ring-2 focus:ring-blue-100 focus:border-blue-500",o}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-npa-template-editor"]],outputs:{close:"close"},decls:39,vars:7,consts:[[1,"fixed","inset-0","z-[200]","bg-slate-50","flex","flex-col","font-sans","animate-in","fade-in","duration-200"],[1,"h-16","bg-white","border-b","border-gray-200","flex","items-center","justify-between","px-6","shadow-sm","z-20"],[1,"flex","items-center","gap-4"],[1,"group","flex","items-center","justify-center","p-2","rounded-full","hover:bg-gray-100","text-gray-500","hover:text-gray-900","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["name","x",1,"w-6","h-6","stroke-[1.5]","group-hover:rotate-90","transition-transform"],[1,"text-lg","font-bold","text-gray-900","flex","items-center","gap-2","tracking-tight"],[1,"px-2","py-0.5","rounded","text-xs","font-semibold","bg-blue-100","text-blue-700","border","border-blue-200"],[1,"text-xs","text-gray-500","mt-2"],[1,"font-medium","text-blue-600"],[1,"hidden","md:flex","items-center","gap-4","text-xs","font-medium","border-r","border-gray-200","pr-4","mr-2"],[1,"flex","items-center","gap-1.5","text-green-700"],["name","sparkles",1,"w-3.5","h-3.5"],[1,"flex","items-center","gap-1.5","text-amber-700"],["name","alert-triangle",1,"w-3.5","h-3.5"],[1,"flex","items-center","gap-1.5","text-red-600"],["name","edit-3",1,"w-3.5","h-3.5"],[1,"px-3","py-2","text-sm","font-medium","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors","border","border-gray-200","hover:border-gray-300","mr-2"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","rounded-lg","shadow-sm","transition-colors","focus:ring-2","focus:ring-offset-2","focus:ring-blue-600","shadow-blue-200","flex","items-center","gap-2"],["name","save",1,"w-4","h-4"],[1,"flex-1","overflow-hidden","flex","relative","min-h-0"],[1,"w-64","bg-white","border-r","border-gray-200","overflow-y-auto","hidden","lg:block","py-6","flex-none"],[1,"space-y-1","px-3"],["href","javascript:void(0)","class","group flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors",3,"bg-blue-50","text-blue-700","click",4,"ngFor","ngForOf"],["id","form-container",1,"flex-1","overflow-y-auto","scroll-smooth","p-6","md:p-10","bg-slate-50","relative","min-h-0",3,"scroll"],[1,"max-w-3xl","mx-auto","space-y-12","pb-24"],["class","bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",3,"id",4,"ngFor","ngForOf"],[1,"w-80","bg-white","border-l","border-gray-200","flex-none","flex","flex-col","shadow-xl","z-30","transition-all","duration-300"],[4,"ngIf"],["href","javascript:void(0)",1,"group","flex","items-center","px-3","py-2","text-sm","font-medium","text-gray-600","rounded-md","hover:bg-gray-50","hover:text-gray-900","transition-colors",3,"click"],[1,"w-1.5","h-1.5","mr-3","rounded-full","bg-gray-300","group-hover:bg-gray-400","transition-colors"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden",3,"id"],[1,"px-6","py-4","border-b","border-gray-100","bg-gray-50/50","flex","items-center","justify-between"],[1,"text-lg","font-bold","text-gray-900"],["class","text-sm text-gray-500 mt-2",4,"ngIf"],[1,"p-6","grid","grid-cols-1","md:grid-cols-2","gap-x-6","gap-y-5","bg-white"],["class","relative",3,"md:col-span-2",4,"ngFor","ngForOf"],[1,"px-6","py-3","bg-gray-50/80","border-t","border-gray-100","flex","items-center","gap-4"],["title","Attach Document to Section",1,"flex","items-center","gap-1.5","text-xs","font-medium","text-gray-500","hover:text-blue-600","transition-colors"],["name","paperclip",1,"w-4","h-4"],[1,"hidden","sm:inline"],[1,"h-4","w-px","bg-gray-300"],[1,"flex-1","flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-blue-100","flex","items-center","justify-center","text-blue-700","text-[10px]","font-bold","ring-2","ring-white","flex-none"],["placeholder","Add a comment...",1,"flex-1","bg-transparent","border-none","text-sm","placeholder:text-gray-400","focus:ring-0","p-0","text-gray-700",3,"ngModelChange","ngModel"],["class","text-xs font-semibold text-blue-600 hover:text-blue-800 transition-colors",4,"ngIf"],[1,"text-sm","text-gray-500","mt-2"],[1,"relative"],[1,"flex","items-center","justify-between","mb-1.5"],[1,"block","text-xs","font-semibold","text-gray-700","uppercase","tracking-wide"],["class","text-red-500",4,"ngIf"],[1,"relative","group",3,"click"],["class","flex items-center gap-3 p-3 rounded-md border border-dashed border-gray-300 bg-gray-50 hover:bg-blue-50 hover:border-blue-300 transition-colors cursor-pointer",3,"ring-2","ring-blue-500",4,"ngIf"],["class","w-full text-sm rounded-md px-3 py-2 outline-none transition-all shadow-sm appearance-none bg-white",3,"ngModel","ngClass","ngModelChange",4,"ngIf"],["class","w-full text-sm rounded-md px-3 py-2 outline-none transition-all shadow-sm",3,"ngModel","type","placeholder","ngClass","ngModelChange",4,"ngIf"],["rows","3","class","w-full text-sm rounded-md px-3 py-2 outline-none transition-all shadow-sm",3,"ngModel","placeholder","ngClass","ngModelChange",4,"ngIf"],[1,"absolute","right-2","top-2.5","pointer-events-none"],[3,"ngSwitch"],["name","check","class","w-4 h-4 text-green-600 opacity-50",4,"ngSwitchCase"],["name","alert-circle","class","w-4 h-4 text-amber-600 opacity-50",4,"ngSwitchCase"],["name","edit-2","class","w-4 h-4 text-red-500 opacity-50",4,"ngSwitchCase"],[1,"text-red-500"],[1,"flex","items-center","gap-3","p-3","rounded-md","border","border-dashed","border-gray-300","bg-gray-50","hover:bg-blue-50","hover:border-blue-300","transition-colors","cursor-pointer"],[1,"p-2","bg-white","rounded","border","border-gray-200","shadow-sm","text-gray-500"],["name","upload-cloud",1,"w-5","h-5"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-[10px]","text-gray-500"],[1,"w-full","text-sm","rounded-md","px-3","py-2","outline-none","transition-all","shadow-sm","appearance-none","bg-white",3,"ngModelChange","ngModel","ngClass"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"w-full","text-sm","rounded-md","px-3","py-2","outline-none","transition-all","shadow-sm",3,"ngModelChange","ngModel","type","placeholder","ngClass"],["rows","3",1,"w-full","text-sm","rounded-md","px-3","py-2","outline-none","transition-all","shadow-sm",3,"ngModelChange","ngModel","placeholder","ngClass"],["name","check",1,"w-4","h-4","text-green-600","opacity-50"],["name","alert-circle",1,"w-4","h-4","text-amber-600","opacity-50"],["name","edit-2",1,"w-4","h-4","text-red-500","opacity-50"],[1,"text-xs","font-semibold","text-blue-600","hover:text-blue-800","transition-colors"],[1,"h-14","border-b","border-gray-100","flex","items-center","justify-between","px-5","bg-gray-50"],[1,"text-xs","font-bold","uppercase","tracking-wider","text-gray-500","flex","items-center","gap-2"],["name","eye",1,"w-3.5","h-3.5"],[1,"text-gray-400","hover:text-gray-600",3,"click"],["name","x",1,"w-4","h-4"],[1,"p-5","flex-1","overflow-y-auto"],[1,"mb-6"],[1,"text-[10px]","uppercase","font-bold","text-gray-400","mb-1"],[1,"mt-2","flex","items-center","gap-2"],[1,"px-2","py-0.5","rounded","text-[10px]","font-bold","uppercase"],["class","text-xs font-medium text-gray-500",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-xs","font-medium","text-gray-500"],[1,"space-y-6"],["class","bg-amber-50 rounded-lg p-3 border border-amber-100",4,"ngIf"],[1,"pt-4","border-t","border-gray-100"],[1,"w-full","py-2","bg-white","border","border-gray-200","text-gray-600","hover:text-blue-600","hover:border-blue-300","rounded-lg","text-xs","font-semibold","transition-colors","flex","items-center","justify-center","gap-2"],["name","external-link",1,"w-3.5","h-3.5"],[1,"bg-amber-50","rounded-lg","p-3","border","border-amber-100"],[1,"flex","gap-2"],["name","git-branch",1,"w-4","h-4","text-amber-600","flex-none","mt-0.5"],[1,"text-xs","font-bold","text-amber-800","mb-1"],[1,"text-xs","text-amber-700","leading-relaxed"],[1,"text-[10px]","uppercase","font-bold","text-gray-400","mb-2"],[1,"bg-slate-50","rounded-lg","p-3","border","border-slate-200","text-xs","text-gray-600","font-mono","leading-relaxed","relative","cursor-pointer","hover:bg-slate-100","transition-colors"],[1,"absolute","top-2","right-2","opacity-50"],["name","quote",1,"w-3","h-3","text-slate-400"],[1,"space-y-4"],[1,"bg-blue-50","rounded-lg","p-4","border","border-blue-100","text-center"],[1,"w-10","h-10","rounded-full","bg-blue-100","flex","items-center","justify-center","mx-auto","mb-3"],["name","bot",1,"w-5","h-5","text-blue-600"],[1,"text-sm","font-bold","text-blue-900","mb-1"],[1,"text-xs","text-blue-700","mb-3"],[1,"w-full","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","text-xs","font-bold","transition-colors","shadow-sm","shadow-blue-200"]],template:function(n,o){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return o.closeEditor()}),a(4,"lucide-icon",4),t(),e(5,"div")(6,"h1",5),i(7," eNPA Proposal Form (v2.0) "),e(8,"span",6),i(9," TSG2025-042 "),t()(),e(10,"p",7),i(11,"Auto-Fill Source: "),e(12,"span",8),i(13,"TSG1917 (94% Match)"),t()()()(),e(14,"div",2)(15,"div",9)(16,"span",10),a(17,"lucide-icon",11),i(18," Direct Copy "),t(),e(19,"span",12),a(20,"lucide-icon",13),i(21," Adapted "),t(),e(22,"span",14),a(23,"lucide-icon",15),i(24," Manual Input "),t()(),e(25,"button",16),i(26," Reset "),t(),e(27,"button",17),a(28,"lucide-icon",18),i(29," Save & Close "),t()()(),e(30,"div",19)(31,"div",20)(32,"nav",21),p(33,ot,3,7,"a",22),t()(),e(34,"div",23),u("scroll",function(g){return o.onScroll(g)}),e(35,"div",24),p(36,ht,19,6,"div",25),t()(),e(37,"div",26),p(38,Et,19,17,"ng-container",27),t()()()),n&2&&(d(33),s("ngForOf",o.sections),d(3),s("ngForOf",o.sections),d(),D("translate-x-full",!o.focusedField)("translate-x-0",o.focusedField),d(),s("ngIf",o.focusedField))},dependencies:[w,I,A,E,be,ve,_,S,j,Ee,Ae,Y,Ce,X,J],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{bg:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};function At(r,l){if(r&1){let n=v();e(0,"app-npa-template-editor",72),u("close",function(){x(n);let m=c();return f(m.showTemplateEditor=!1)}),t()}}function Tt(r,l){if(r&1&&(e(0,"span",76),i(1),t()),r&2){let n=c().$implicit,o=c();K(o.getBadgeColor(n.id)),d(),h(" ",n.badge," ")}}function kt(r,l){if(r&1){let n=v();e(0,"button",73),u("click",function(){let m=x(n).$implicit,g=c();return f(g.activeTab=m.id)}),a(1,"lucide-icon",74),i(2),p(3,Tt,2,3,"span",75),t()}if(r&2){let n=l.$implicit,o=c();K(o.activeTab===n.id?"border-blue-600 text-blue-700 font-semibold":"border-transparent text-gray-500 hover:text-gray-800 font-medium hover:bg-gray-50"),d(),K(o.activeTab===n.id?"text-blue-600":"text-gray-400"),s("name",n.icon),d(),h(" ",n.label," "),d(),s("ngIf",n.badge)}}function It(r,l){r&1&&a(0,"lucide-icon",114)}function Mt(r,l){if(r&1&&(e(0,"div",109)(1,"p",110),i(2),p(3,It,1,0,"lucide-icon",111),t(),e(4,"div",81)(5,"p",112),i(6),t(),e(7,"div",113),i(8),t()()()),r&2){let n=l.$implicit;d(2),h(" ",n.label," "),d(),s("ngIf",n.confidence>90),d(3),b(n.value),d(2),h(" ",n.confidence,"% ")}}function Dt(r,l){if(r&1){let n=v();e(0,"div",77)(1,"div",78)(2,"div",79)(3,"h2",80),i(4,"Product Attributes"),t(),e(5,"div",81)(6,"span",82),i(7," \u2705 78% Auto-Filled "),t(),e(8,"span",83),i(9," Verified by DocExtraction "),t()()(),e(10,"div",84),p(11,Mt,9,4,"div",85),t()(),e(12,"div",86)(13,"div",87),u("click",function(){x(n);let m=c();return f(m.showTemplateEditor=!0)}),e(14,"div",88),a(15,"lucide-icon",89),t(),e(16,"h3",90),i(17,"Template Completion"),t(),e(18,"div",91),ce(),e(19,"svg",92),a(20,"path",93)(21,"path",94),t(),pe(),e(22,"div",95)(23,"span",96),i(24,"37"),t(),e(25,"span",97),i(26,"of 47 Fields"),t()()(),e(27,"div",98)(28,"p",99),i(29,"Saved approx. "),e(30,"span",100),i(31,"45 minutes"),t(),i(32," of manual entry."),t()()(),e(33,"div",101)(34,"h3",102),i(35,"KB Source Match"),t(),e(36,"p",103),i(37," Data auto-filled based on 94% match with historical NPA: "),t(),e(38,"div",104)(39,"div",105),a(40,"lucide-icon",106),t(),e(41,"div")(42,"p",107),i(43,"TSG1917 - FX Option EUR/USD"),t(),e(44,"p",108),i(45,"Approved: Dec 04, 2024 \u2022 Validity: Active"),t()()()()()()}if(r&2){let n=c();d(11),s("ngForOf",n.productAttributes)}}function Ot(r,l){r&1&&(e(0,"div",77)(1,"div",115)(2,"div",116)(3,"div",117),a(4,"lucide-icon",118),t(),e(5,"h4",119),i(6,"Approval Likelihood"),t(),e(7,"div",120)(8,"span",121),i(9,"78%"),t(),e(10,"span",122),i(11,"High"),t()(),e(12,"p",123),i(13,"Confidence Interval: \xB15%"),t(),e(14,"div",124),a(15,"div",125),t()(),e(16,"div",126)(17,"h4",119),i(18,"Predicted Timeline"),t(),e(19,"div",120)(20,"span",121),i(21,"4.2"),t(),e(22,"span",127),i(23,"Days"),t()(),e(24,"p",123),i(25,"vs 12 Day Baseline (67% faster)"),t()(),e(26,"div",128)(27,"h4",129),a(28,"lucide-icon",130),i(29," Likely Bottleneck "),t(),e(30,"p",131),i(31,"Finance Dept"),t(),e(32,"p",132),i(33,"Est. 1.8 Days"),t(),e(34,"p",133),i(35," Reason: ROAE analysis often requested for >$50M deals. "),t()()(),e(36,"div")(37,"h3",134),i(38,"Agent Findings (3)"),t(),e(39,"div",135)(40,"div",136)(41,"div",137)(42,"div",138),a(43,"lucide-icon",139),t()(),e(44,"div",140)(45,"div",141)(46,"h4",100),i(47,"Missing Risk Memo"),t(),e(48,"span",142),i(49,"Blocker"),t()(),e(50,"p",143),i(51," Global Risk Policy 5.2 requires a Risk Memo for FX Options > $10M notional. This is a hard requirement for Sign-Off. "),t(),e(52,"button",144),i(53," Auto-Draft Waiver Request "),a(54,"lucide-icon",145),t()()(),e(55,"div",146)(56,"div",137)(57,"div",147),a(58,"lucide-icon",148),t()(),e(59,"div",140)(60,"h4",149),i(61,"Compliance Checks Passed"),t(),e(62,"p",150),i(63," Prohibited List Checker (4 Layers), Sanctions Check (OFAC/UN), and Regulatory Check (MAS) all cleared. "),t()()()()()())}function Nt(r,l){r&1&&(e(0,"div",151)(1,"div",152)(2,"div")(3,"h3",153),i(4,"Sign-Off Status"),t(),e(5,"p",154),i(6,"Pending 6 Approvals \u2022 SLA Expires in 22 Hours"),t()(),e(7,"div",15)(8,"div",155)(9,"div",156),i(10,"0/6"),t(),e(11,"div",157),i(12,"Completed"),t()(),e(13,"div",158),a(14,"div",159),t()()(),e(15,"div",160)(16,"div",161)(17,"div",162),i(18,"Department / Approver"),t(),e(19,"div",163),i(20,"Status"),t(),e(21,"div",163),i(22,"Time Elapsed"),t(),e(23,"div",164),i(24,"Action"),t()(),e(25,"div",165)(26,"div",166)(27,"div",162)(28,"p",100),i(29,"RMG-Credit"),t(),e(30,"p",127),i(31,"Jane Tan"),t()(),e(32,"div",163)(33,"span",167),i(34," Pending Review "),t()(),e(35,"div",168),i(36,"2h 15m"),t(),e(37,"div",164)(38,"button",169),i(39,"Nudge"),t()()(),e(40,"div",170)(41,"div",171),a(42,"div",172),e(43,"p",100),i(44,"Finance (Product Control)"),t(),e(45,"p",127),i(46,"Mark Lee"),t()(),e(47,"div",163)(48,"span",173),i(49," Viewing Now "),t()(),e(50,"div",168),i(51,"2h 12m"),t(),e(52,"div",164)(53,"button",174),i(54,"--"),t()()(),e(55,"div",175)(56,"div",162)(57,"p",100),i(58,"Finance VP"),t(),e(59,"p",127),i(60,"Waiting for Finance..."),t()(),e(61,"div",163)(62,"span",176),i(63," Locked "),t()(),e(64,"div",177),i(65,"--"),t(),a(66,"div",164),t()()()())}function Pt(r,l){r&1&&(e(0,"div",77)(1,"div",178)(2,"div",179)(3,"div",180),a(4,"lucide-icon",181),t(),e(5,"h3",182),i(6,"Stage 1: Initiation"),t(),e(7,"p",183),i(8,"Completed: Dec 16, 09:42 AM (Duration: 38m)"),t(),e(9,"div",184)(10,"div",15),a(11,"lucide-icon",185),e(12,"span",186),i(13,"Product Ideation Interview"),t(),e(14,"span",187),i(15,"COMPLETE"),t()(),e(16,"div",15),a(17,"lucide-icon",188),e(18,"span",186),i(19,"Document Upload (13 Files)"),t(),e(20,"span",187),i(21,"COMPLETE"),t()(),e(22,"div",15),a(23,"lucide-icon",189),e(24,"span",186),i(25,"Prohibited List Check (4 Layers)"),t(),e(26,"span",187),i(27,"PASSED"),t()()()(),e(28,"div",179)(29,"div",190),a(30,"div",191),t(),e(31,"h3",192),i(32,"Stage 2: Review & Sign-Off"),t(),e(33,"p",193),i(34,"In Progress \u2022 Start: Dec 16, 10:00 AM"),t(),e(35,"div",194)(36,"div",15),a(37,"lucide-icon",195),e(38,"span",196),i(39,"NPA Champion Review"),t(),e(40,"span",197),i(41,"PENDING"),t()(),e(42,"div",198),i(43," Assigned to: "),e(44,"span",199),i(45,"David Chen"),t()()()(),e(46,"div",200),a(47,"div",201),e(48,"h3",202),i(49,"Stage 4: Launch"),t(),e(50,"p",203),i(51,"Estimated: Dec 20"),t()()()())}function Rt(r,l){r&1&&(e(0,"div",204)(1,"div",205)(2,"div",206)(3,"div",207),a(4,"lucide-icon",208),t(),e(5,"div",209)(6,"p"),i(7,"Hi Sarah! I noticed this is a $75M FX Option. Based on notional >$50M, Finance VP approval will be required."),t(),e(8,"p",210),i(9,"Plot ROAE Sensitivity Analysis?"),t()()()(),e(10,"div",211)(11,"div",212),a(12,"input",213),e(13,"button",214),a(14,"lucide-icon",215),t()()()())}var ae=class r{onBack=new C;autoOpenEditor=!1;activeTab="PRODUCT_SPECS";ngOnInit(){this.autoOpenEditor&&(this.showTemplateEditor=!0)}tabs=[{id:"PRODUCT_SPECS",label:"NPA Proposal",icon:"clipboard-list"},{id:"ANALYSIS",label:"Analysis & Predictions",icon:"brain-circuit",badge:"78%"},{id:"APPROVALS",label:"Sign-Off Status",icon:"users",badge:"6"},{id:"WORKFLOW",label:"Workflow",icon:"git-branch"},{id:"CHAT",label:"Assistant",icon:"message-square"}];productAttributes=[{label:"Product Type",value:"FX Put Option",confidence:95},{label:"Underlying",value:"GBP / USD",confidence:99},{label:"Notional",value:"$75,000,000",confidence:99},{label:"Tenor",value:"6 Months",confidence:99},{label:"Strike Price",value:"1.2750",confidence:92},{label:"Settlement",value:"Cash (USD)",confidence:96},{label:"Counterparty",value:"Acme Corp (HK)",confidence:85},{label:"Credit Rating",value:"A- (S&P)",confidence:98},{label:"Booking Desk",value:"Singapore FX",confidence:99}];getBadgeColor(l){switch(l){case"ANALYSIS":return"text-green-600 bg-green-100 border-green-200";case"APPROVALS":return"text-amber-600 bg-amber-100 border-amber-200";default:return"text-gray-600 bg-gray-100"}}showTemplateEditor=!1;static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-npa-detail"]],inputs:{autoOpenEditor:"autoOpenEditor"},outputs:{onBack:"onBack"},decls:122,vars:7,consts:[[3,"close",4,"ngIf"],[1,"fixed","inset-0","z-[100]","flex","flex-col","h-screen","w-screen","bg-slate-50","overscroll-none","font-sans"],[1,"flex-none","bg-white","border-b","border-gray-200","px-6","py-3","flex","items-center","justify-between","shadow-sm","z-20"],[1,"flex","items-center","gap-4"],[1,"group","flex","items-center","justify-center","p-2","rounded-full","hover:bg-gray-100","text-gray-500","hover:text-gray-900","transition-all","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["name","arrow-left",1,"w-6","h-6","stroke-[1.5]","group-hover:-translate-x-0.5","transition-transform"],[1,"flex","items-center","gap-3","text-xs","text-gray-500","mb-2"],[1,"font-medium","text-gray-400"],["name","chevron-right",1,"w-3","h-3","text-gray-300"],[1,"font-mono","text-gray-600","bg-gray-100","px-2","py-0.5","rounded"],[1,"flex","items-center","gap-1.5","ml-2"],["name","user",1,"w-3","h-3"],[1,"font-medium","text-gray-700"],[1,"text-gray-300"],[1,"text-gray-400"],[1,"flex","items-center","gap-3"],[1,"text-lg","font-bold","text-gray-900","tracking-tight"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-semibold","bg-blue-100","text-blue-700","border","border-blue-200"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-purple-50","text-purple-700","border","border-purple-200"],["name","globe",1,"w-3","h-3","mr-1"],[1,"px-3","py-2","text-sm","font-medium","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors","border","border-gray-200","hover:border-gray-300","flex","items-center","gap-2"],["name","help-circle",1,"w-4","h-4"],["name","save",1,"w-4","h-4"],[1,"h-6","w-px","bg-gray-300","mx-1"],[1,"px-4","py-2","text-sm","font-medium","text-red-600","hover:bg-red-50","rounded-lg","transition-colors","border","border-transparent","hover:border-red-100/50"],[1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","rounded-lg","shadow-sm","transition-colors","focus:ring-2","focus:ring-offset-2","focus:ring-blue-600","shadow-blue-200"],[1,"flex-1","overflow-hidden"],[1,"grid","grid-cols-1","lg:grid-cols-12","h-full"],[1,"lg:col-span-4","flex","flex-col","h-full","border-r","border-gray-200","bg-white","p-0","overflow-hidden"],[1,"flex-none","p-4","border-b","border-gray-100","flex","items-center","justify-between","bg-gray-50/50"],[1,"font-semibold","text-sm","flex","items-center","gap-2","text-gray-900"],[1,"p-1.5","bg-white","border","border-gray-200","rounded-md","shadow-sm","text-red-500"],["name","file-text",1,"w-4","h-4"],[1,"flex-1","bg-slate-50","relative","group","overflow-hidden","flex","flex-col","items-center","justify-center","p-8"],[1,"absolute","inset-0","bg-[url('https://www.transparenttextures.com/patterns/graphy.png')]","opacity-10"],[1,"absolute","inset-0","bg-white/60","backdrop-blur-[2px]","opacity-0","group-hover:opacity-100","transition-all","duration-300","flex","items-center","justify-center","z-10","cursor-pointer"],[1,"bg-gray-900","text-white","px-5","py-2.5","rounded-full","text-sm","font-medium","shadow-lg","transform","translate-y-2","group-hover:translate-y-0","transition-transform"],[1,"w-48","h-64","bg-white","shadow-2xl","shadow-gray-300/50","border","border-gray-200","rounded-lg","p-6","relative","transform","group-hover:scale-105","transition-transform","duration-500","ease-out"],[1,"space-y-3","opacity-60"],[1,"h-2","w-1/3","bg-gray-800","rounded","mb-4"],[1,"h-1.5","w-full","bg-gray-200","rounded"],[1,"h-1.5","w-5/6","bg-gray-200","rounded"],[1,"h-1.5","w-full","bg-gray-200","rounded","mt-4"],[1,"h-32","w-full","bg-blue-50/50","border","border-blue-100","rounded","mt-2"],[1,"mt-6","text-sm","font-medium","text-gray-500"],[1,"flex-none","bg-white","border-t","border-gray-200","h-1/3","flex","flex-col"],[1,"px-4","py-3","border-b","border-gray-100","bg-gray-50/50","flex","items-center","justify-between"],[1,"text-xs","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"p-1","hover:bg-blue-50","text-blue-600","rounded"],["name","upload-cloud",1,"w-4","h-4"],[1,"overflow-y-auto","p-2","space-y-1"],[1,"flex","items-center","p-2","rounded-lg","hover:bg-gray-50","cursor-pointer","group","transition-colors","border","border-transparent","hover:border-gray-200"],[1,"w-8","h-8","rounded","bg-red-50","text-red-500","flex","items-center","justify-center","mr-3","border","border-red-100"],[1,"flex-1","min-w-0"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-900","truncate"],["name","check-circle-2",1,"w-3.5","h-3.5","text-green-500"],[1,"text-xs","text-gray-500","flex","items-center","gap-2"],[1,"w-1","h-1","rounded-full","bg-gray-300"],[1,"flex","items-center","p-2","rounded-lg","hover:bg-gray-50","cursor-pointer","group","transition-colors"],[1,"w-8","h-8","rounded","bg-blue-50","text-blue-500","flex","items-center","justify-center","mr-3","border","border-blue-100"],["name","file-bar-chart-2",1,"w-4","h-4"],["name","alert-triangle",1,"w-3.5","h-3.5","text-amber-500"],[1,"w-8","h-8","rounded","bg-green-50","text-green-600","flex","items-center","justify-center","mr-3","border","border-green-100"],["name","file-check",1,"w-4","h-4"],[1,"lg:col-span-8","flex","flex-col","h-full","bg-slate-50/50","overflow-hidden","relative"],[1,"flex-none","flex","items-center","px-6","border-b","border-gray-200","bg-white","gap-6","overflow-x-auto","no-scrollbar","shadow-[0_1px_2px_rgba(0,0,0,0.02)]"],["class","flex items-center gap-2 py-4 border-b-2 text-sm transition-all whitespace-nowrap px-2",3,"class","click",4,"ngFor","ngForOf"],[1,"flex-1","overflow-y-auto","p-8","scroll-smooth"],["class","space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300 max-w-4xl mx-auto",4,"ngIf"],["class","space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300 max-w-4xl mx-auto",4,"ngIf"],["class","h-[calc(100vh-280px)] flex flex-col bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300",4,"ngIf"],[3,"close"],[1,"flex","items-center","gap-2","py-4","border-b-2","text-sm","transition-all","whitespace-nowrap","px-2",3,"click"],[1,"w-4","h-4",3,"name"],["class","ml-1.5 px-1.5 py-0.5 rounded-full text-[10px] bg-gray-100 text-gray-600 font-bold border border-gray-200/50",3,"class",4,"ngIf"],[1,"ml-1.5","px-1.5","py-0.5","rounded-full","text-[10px]","bg-gray-100","text-gray-600","font-bold","border","border-gray-200/50"],[1,"space-y-8","animate-in","fade-in","slide-in-from-bottom-2","duration-300","max-w-4xl","mx-auto"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-gray-900"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-medium","text-green-700","bg-green-50","px-2.5","py-1","rounded-full","border","border-green-100"],[1,"text-xs","font-medium","text-blue-700","bg-blue-50","px-2.5","py-1","rounded-full","border","border-blue-100"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-y-6","gap-x-8"],["class","group",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-white","rounded-xl","border","border-gray-200","p-6","shadow-sm","cursor-pointer","hover:shadow-md","hover:border-blue-300","transition-all","group","relative",3,"click"],[1,"absolute","top-3","right-3","opacity-0","group-hover:opacity-100","transition-opacity"],["name","external-link",1,"w-4","h-4","text-blue-500"],[1,"text-sm","font-bold","text-gray-900","mb-4","group-hover:text-blue-700"],[1,"relative","w-40","h-40","mx-auto"],["viewBox","0 0 36 36",1,"w-full","h-full","transform","-rotate-90"],["d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","3.5",1,"text-gray-100"],["stroke-dasharray","78, 100","d","M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831","fill","none","stroke","currentColor","stroke-width","3.5",1,"text-blue-600"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-xs","text-gray-500","font-medium","uppercase"],[1,"mt-4","text-center"],[1,"text-sm","text-gray-600"],[1,"font-bold","text-gray-900"],[1,"bg-gradient-to-br","from-blue-50","to-slate-50","rounded-xl","border","border-blue-100","p-6"],[1,"text-sm","font-bold","text-blue-900","mb-2"],[1,"text-sm","text-blue-800/80","mb-4"],[1,"bg-white","rounded-lg","p-3","border","border-blue-100","shadow-sm","flex","items-start","gap-3"],[1,"p-2","bg-blue-100","rounded","text-blue-600"],["name","database",1,"w-5","h-5"],[1,"text-sm","font-bold","text-gray-900"],[1,"text-xs","text-gray-500","mt-0.5"],[1,"group"],[1,"text-xs","font-semibold","text-gray-400","uppercase","tracking-wider","mb-1","flex","items-center","gap-1"],["name","sparkles","class","w-3 h-3 text-amber-400 opacity-60",4,"ngIf"],[1,"text-base","font-semibold","text-gray-900"],[1,"opacity-0","group-hover:opacity-100","transition-opacity","bg-blue-600","text-white","text-[10px]","px-1.5","py-0.5","rounded","font-mono"],["name","sparkles",1,"w-3","h-3","text-amber-400","opacity-60"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","p-6","rounded-xl","border","border-gray-200","shadow-sm","relative","overflow-hidden"],[1,"absolute","right-0","top-0","p-4","opacity-10"],["name","trending-up",1,"w-16","h-16","text-green-600"],[1,"text-sm","font-medium","text-gray-500","mb-2"],[1,"flex","items-baseline","gap-2"],[1,"text-4xl","font-bold","text-gray-900"],[1,"text-sm","font-medium","text-green-600","bg-green-50","px-2","py-0.5","rounded-full"],[1,"text-xs","text-gray-400","mt-2"],[1,"mt-4","h-1.5","w-full","bg-gray-100","rounded-full","overflow-hidden"],[1,"h-full","bg-green-500","w-[78%]","rounded-full"],[1,"bg-white","p-6","rounded-xl","border","border-gray-200","shadow-sm"],[1,"text-sm","text-gray-500"],[1,"bg-white","p-6","rounded-xl","border","border-red-100","shadow-sm","bg-red-50/30"],[1,"text-sm","font-medium","text-red-600","mb-2","flex","items-center","gap-2"],["name","alert-circle",1,"w-4","h-4"],[1,"text-gray-900","font-bold"],[1,"text-sm","text-gray-600","mt-1"],[1,"text-xs","text-gray-500","mt-3","pt-3","border-t","border-red-100"],[1,"text-sm","font-bold","text-gray-900","mb-4"],[1,"space-y-4"],[1,"flex","gap-4","p-5","rounded-xl","bg-red-50/40","border","border-red-100"],[1,"flex-none","pt-1"],[1,"p-2","bg-white","rounded-lg","border","border-red-100","text-red-600","shadow-sm"],["name","shield-alert",1,"w-5","h-5"],[1,"flex-1"],[1,"flex","items-center","justify-between","mb-1"],[1,"text-xs","font-bold","text-red-600","bg-red-100","px-2","py-0.5","rounded","uppercase","tracking-wide"],[1,"text-sm","text-gray-600","leading-relaxed","mb-3"],[1,"text-sm","font-medium","text-blue-600","hover:text-blue-800","flex","items-center","gap-1","group"],["name","arrow-right",1,"w-4","h-4","group-hover:translate-x-0.5","transition-transform"],[1,"flex","gap-4","p-5","rounded-xl","bg-green-50/40","border","border-green-100"],[1,"p-2","bg-white","rounded-lg","border","border-green-100","text-green-600","shadow-sm"],["name","check-circle",1,"w-5","h-5"],[1,"font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600","leading-relaxed"],[1,"space-y-6","animate-in","fade-in","slide-in-from-bottom-2","duration-300","max-w-4xl","mx-auto"],[1,"bg-gray-900","text-white","rounded-xl","p-6","shadow-lg","flex","items-center","justify-between"],[1,"text-lg","font-bold"],[1,"text-gray-400","text-sm","mt-1"],[1,"text-right"],[1,"text-2xl","font-bold"],[1,"text-xs","text-gray-400"],[1,"w-12","h-12","rounded-full","border-4","border-gray-700","flex","items-center","justify-center"],[1,"w-10","h-10","rounded-full","border-4","border-transparent","border-t-blue-500","animate-spin"],[1,"bg-white","border","border-gray-200","rounded-xl","overflow-hidden","shadow-sm"],[1,"grid","grid-cols-12","bg-gray-50","border-b","border-gray-200","px-6","py-3","text-xs","font-bold","text-gray-500","uppercase","tracking-wider"],[1,"col-span-4"],[1,"col-span-3"],[1,"col-span-2","text-right"],[1,"divide-y","divide-gray-100"],[1,"grid","grid-cols-12","px-6","py-4","items-center","hover:bg-gray-50","transition-colors"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-yellow-100","text-yellow-800"],[1,"col-span-3","text-sm","text-gray-600","font-mono"],[1,"text-blue-600","hover:text-blue-800","text-xs","font-bold"],[1,"grid","grid-cols-12","px-6","py-4","items-center","hover:bg-gray-50","transition-colors","bg-blue-50/20"],[1,"col-span-4","relative"],[1,"absolute","-left-6","top-1/2","-translate-y-1/2","w-1","h-8","bg-blue-500","rounded-r"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","animate-pulse"],["disabled","",1,"text-gray-400","hover:text-gray-600","text-xs","font-bold"],[1,"grid","grid-cols-12","px-6","py-4","items-center","hover:bg-gray-50","transition-colors","opacity-60"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-500"],[1,"col-span-3","text-sm","text-gray-400","font-mono"],[1,"relative","pl-8","border-l","border-gray-200","space-y-12","my-6"],[1,"relative","group"],[1,"absolute","-left-[37px]","top-0","w-6","h-6","rounded-full","bg-blue-600","border-4","border-white","shadow-md","flex","items-center","justify-center"],["name","check",1,"w-3","h-3","text-white"],[1,"text-lg","font-bold","text-gray-900","mb-1"],[1,"text-xs","text-gray-500","uppercase","tracking-wide","mb-4"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200/60","space-y-3"],["name","message-square",1,"w-4","h-4","text-blue-500"],[1,"text-sm","text-gray-700"],[1,"text-xs","text-green-600","font-mono","ml-auto"],["name","upload-cloud",1,"w-4","h-4","text-blue-500"],["name","shield-check",1,"w-4","h-4","text-blue-500"],[1,"absolute","-left-[37px]","top-0","w-6","h-6","rounded-full","bg-white","border-[3px]","border-blue-600","shadow-md","flex","items-center","justify-center","animate-pulse"],[1,"w-2","h-2","bg-blue-600","rounded-full"],[1,"text-lg","font-bold","text-blue-700","mb-1"],[1,"text-xs","text-blue-600","uppercase","tracking-wide","mb-4"],[1,"bg-white","rounded-lg","p-5","border","border-blue-200","shadow-sm","space-y-4"],["name","eye",1,"w-4","h-4","text-gray-400"],[1,"text-sm","text-gray-900","font-medium"],[1,"text-xs","bg-yellow-100","text-yellow-800","px-2","py-0.5","rounded","ml-auto"],[1,"pl-7","text-xs","text-gray-500","border-l","border-gray-100","ml-2"],[1,"font-semibold","text-gray-700"],[1,"relative","group","opacity-50"],[1,"absolute","-left-[37px]","top-0","w-6","h-6","rounded-full","bg-gray-200","border-4","border-white","shadow-sm"],[1,"text-lg","font-bold","text-gray-500","mb-1"],[1,"text-xs","text-gray-400","uppercase","tracking-wide","mb-4"],[1,"h-[calc(100vh-280px)]","flex","flex-col","bg-white","rounded-2xl","border","border-gray-200","shadow-sm","overflow-hidden","animate-in","fade-in","slide-in-from-bottom-2","duration-300"],[1,"flex-1","p-6","space-y-6","overflow-y-auto","bg-slate-50/50"],[1,"flex","items-start","gap-4"],[1,"w-8","h-8","rounded-full","bg-indigo-600","flex","items-center","justify-center","text-white","shadow-sm"],["name","bot",1,"w-4","h-4"],[1,"bg-white","p-4","rounded-2xl","rounded-tl-none","shadow-sm","border","border-gray-100","max-w-[85%]","text-sm","text-gray-700","leading-relaxed"],[1,"mt-2","text-indigo-600","font-medium","cursor-pointer","hover:underline"],[1,"p-4","bg-white","border-t","border-gray-100"],[1,"relative"],["type","text","placeholder","Type a message...",1,"w-full","pl-4","pr-12","py-3","rounded-xl","border","border-gray-200","focus:ring-2","focus:ring-blue-500/20","focus:border-blue-500","outline-none","text-sm"],[1,"absolute","right-2","top-2","p-1.5","text-blue-600","hover:bg-blue-50","rounded-lg"],["name","send",1,"w-4","h-4"]],template:function(n,o){n&1&&(p(0,At,1,0,"app-npa-template-editor",0),e(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),u("click",function(){return o.onBack.emit()}),a(5,"lucide-icon",5),t(),e(6,"div")(7,"div",6)(8,"span",7),i(9,"NPA Pipeline"),t(),a(10,"lucide-icon",8),e(11,"span",9),i(12,"TSG2025-042"),t(),e(13,"span",10),a(14,"lucide-icon",11),e(15,"span",12),i(16,"Sarah Lim (SG FX Desk)"),t()(),e(17,"span",13),i(18,"|"),t(),e(19,"span",14),i(20,"Sub: Dec 16, 09:42 AM"),t()(),e(21,"div",15)(22,"h1",16),i(23," FX Put Option GBP/USD "),t(),e(24,"span",17),i(25," Variation (Medium Risk) "),t(),e(26,"span",18),a(27,"lucide-icon",19),i(28," Cross-Border "),t()()()(),e(29,"div",15)(30,"button",20),a(31,"lucide-icon",21),i(32," Help "),t(),e(33,"button",20),a(34,"lucide-icon",22),i(35," Save Draft "),t(),a(36,"div",23),e(37,"button",24),i(38," Reject "),t(),e(39,"button",25),i(40," Approve & Sign-Off "),t()()(),e(41,"div",26)(42,"div",27)(43,"div",28)(44,"div",29)(45,"h3",30)(46,"div",31),a(47,"lucide-icon",32),t(),i(48," Document Preview "),t()(),e(49,"div",33),a(50,"div",34),e(51,"div",35)(52,"div",36),i(53," Click to expand view "),t()(),e(54,"div",37)(55,"div",38),a(56,"div",39)(57,"div",40)(58,"div",40)(59,"div",41)(60,"div",42)(61,"div",43),t()(),e(62,"p",44),i(63,"FX_Option_Term_Sheet_v1.pdf"),t()(),e(64,"div",45)(65,"div",46)(66,"h4",47),i(67,"Attachments (13)"),t(),e(68,"button",48),a(69,"lucide-icon",49),t()(),e(70,"div",50)(71,"div",51)(72,"div",52),a(73,"lucide-icon",32),t(),e(74,"div",53)(75,"div",54)(76,"p",55),i(77,"Term_Sheet_Final.pdf"),t(),a(78,"lucide-icon",56),t(),e(79,"p",57)(80,"span"),i(81,"2.4 MB"),t(),a(82,"span",58),e(83,"span"),i(84,"Product Specs"),t()()()(),e(85,"div",59)(86,"div",60),a(87,"lucide-icon",61),t(),e(88,"div",53)(89,"div",54)(90,"p",55),i(91,"Risk_Assessment_Draft.docx"),t(),a(92,"lucide-icon",62),t(),e(93,"p",57)(94,"span"),i(95,"1.1 MB"),t(),a(96,"span",58),e(97,"span"),i(98,"Risk Analysis"),t()()()(),e(99,"div",59)(100,"div",63),a(101,"lucide-icon",64),t(),e(102,"div",53)(103,"div",54)(104,"p",55),i(105,"Pricing_Model_v2.xlsx"),t(),a(106,"lucide-icon",56),t(),e(107,"p",57)(108,"span"),i(109,"8.5 MB"),t(),a(110,"span",58),e(111,"span"),i(112,"Finance"),t()()()()()()(),e(113,"div",65)(114,"div",66),p(115,kt,4,7,"button",67),t(),e(116,"div",68),p(117,Dt,46,1,"div",69)(118,Ot,64,0,"div",69)(119,Nt,67,0,"div",70)(120,Pt,52,0,"div",69)(121,Rt,15,0,"div",71),t()()()()()),n&2&&(s("ngIf",o.showTemplateEditor),d(115),s("ngForOf",o.tabs),d(2),s("ngIf",o.activeTab==="PRODUCT_SPECS"),d(),s("ngIf",o.activeTab==="ANALYSIS"),d(),s("ngIf",o.activeTab==="APPROVALS"),d(),s("ngIf",o.activeTab==="WORKFLOW"),d(),s("ngIf",o.activeTab==="CHAT"))},dependencies:[w,A,E,_,S,re],styles:[".no-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.no-scrollbar[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}"]})};function Ft(r,l){if(r&1){let n=v();e(0,"div",3)(1,"app-npa-dashboard",4),u("navigateToCreate",function(){x(n);let m=c();return f(m.goToCreate())})("navigateToDraft",function(){x(n);let m=c();return f(m.goToDraft())}),t()()}}function Lt(r,l){if(r&1){let n=v();e(0,"div",5)(1,"app-chat-interface",6),u("onBack",function(){x(n);let m=c();return f(m.goToDashboard())})("onComplete",function(){x(n);let m=c();return f(m.goToDraft())}),t()()}}function Vt(r,l){if(r&1){let n=v();e(0,"div",7)(1,"app-npa-detail",8),u("onBack",function(){x(n);let m=c();return f(m.goToDashboard())}),t()()}if(r&2){let n=c();d(),s("autoOpenEditor",n.autoOpenEditor)}}var Me=class r{layoutService=V(Se);viewMode="DASHBOARD";autoOpenEditor=!1;constructor(){console.log("NPAAgentComponent Initialized. viewMode:",this.viewMode)}goToDashboard(){this.viewMode="DASHBOARD",this.autoOpenEditor=!1,this.layoutService.setSidebarVisible(!0)}goToCreate(){this.viewMode="IDEATION",this.autoOpenEditor=!1,this.layoutService.setSidebarVisible(!0),this.layoutService.setSidebarState(!0)}goToDraft(){this.viewMode="WORK_ITEM",this.autoOpenEditor=!0,this.layoutService.setSidebarVisible(!0),this.layoutService.setSidebarState(!0)}ngOnDestroy(){this.layoutService.setSidebarVisible(!0),this.layoutService.setSidebarState(!1)}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-npa-agent"]],decls:3,vars:3,consts:[["class","h-full w-full overflow-y-auto scrollbar-hide",4,"ngIf"],["class","h-[calc(100vh-64px)] w-full border-t border-gray-200 bg-white",4,"ngIf"],["class","h-full w-full",4,"ngIf"],[1,"h-full","w-full","overflow-y-auto","scrollbar-hide"],[3,"navigateToCreate","navigateToDraft"],[1,"h-[calc(100vh-64px)]","w-full","border-t","border-gray-200","bg-white"],[3,"onBack","onComplete"],[1,"h-full","w-full"],[3,"onBack","autoOpenEditor"]],template:function(n,o){n&1&&p(0,Ft,2,0,"div",0)(1,Lt,2,0,"div",1)(2,Vt,2,1,"div",2),n&2&&(s("ngIf",o.viewMode==="DASHBOARD"),d(),s("ngIf",o.viewMode==="IDEATION"),d(),s("ngIf",o.viewMode==="WORK_ITEM"))},dependencies:[w,E,_,Q,ne,ae],encapsulation:2})};export{Me as NPAAgentComponent};
