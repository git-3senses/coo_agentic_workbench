import{Jc as u,P as s,T as i,Y as a,g as o}from"./chunk-IVDQKAZB.js";var l=class n{http=a(u);userSubject=new o(this.loadUser());user$=this.userSubject.asObservable();get currentUser(){return this.userSubject.value}get token(){return localStorage.getItem("auth_token")}get isLoggedIn(){return!!this.token&&!!this.currentUser}login(t,r){return this.http.post("/api/auth/login",{user_id:t,password:r}).pipe(s(e=>{localStorage.setItem("auth_token",e.token),localStorage.setItem("auth_user",JSON.stringify(e.user)),this.userSubject.next(e.user)}))}loginByEmail(t,r){return this.http.post("/api/auth/login",{email:t,password:r}).pipe(s(e=>{localStorage.setItem("auth_token",e.token),localStorage.setItem("auth_user",JSON.stringify(e.user)),this.userSubject.next(e.user)}))}logout(){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),this.userSubject.next(null)}loadUser(){try{let t=localStorage.getItem("auth_user");return t?JSON.parse(t):null}catch{return null}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=i({token:n,factory:n.\u0275fac,providedIn:"root"})};export{l as a};
